<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>12.1.4 Enabling the Global Meta Cache Feature</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Operation Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="b1439-00-12-00-00.html">Chapter&nbsp;12  Global Meta Cache</a> &gt; <a href="b1439-00-12-01-00.html">12.1 Usage</a> &gt; 12.1.4 Enabling the Global Meta Cache Feature</div><div class="back_next"><a href="b1439-00-12-01-03.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1439-00-12-01-05.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="ID0600-gmcN4">12.1.4 Enabling the Global Meta Cache Feature</h3><div class="body"><div class="textblock"><p>To Enable the Global Meta Cache feature edit the postgresql.conf file and set the pgx_global_metacahe parameter. Restarting the instance after editing the postgresql.conf file is required. Refer to "<a href="b1439-a-00-00.html">Appendix&nbsp;A Parameters</a>" for information on the parameters.</p><table><col><col><tr><th valign="top"><p>Parameter Name</p></th><th valign="top"><p>Description</p></th></tr><tr><td align="left" valign="top"><p>pgx_global_metacache</p></td><td align="left" valign="top"><p>Specify the maximum amount of memory for the GMC area on shared memory. When it&rsquo;s set to 0 (default value), the Global Meta Cache feature is disabled.</p><p>When enabled, the minimum value allowed is 10MB.</p></td></tr></table><p>When the cache is created, if the total amount of meta caches on shared memory exceeds the value specified by pgx_global_metacache, the inactive, unreferenced meta caches are removed from the GMC area. Note that if all GMC are in use and the cache cannot be created in the GMC area, the cache is temporarily created in the local memory of the backend process.</p><div class="ex"><p class="title">Example</p><div class="exbody"><p>Here is an example postgresql.conf configuration:</p><pre class="border">pgx_global_metacache = 800 MB</pre></div></div><dl><dt class="em">Wait Events</dt><dd><p>The Global Meta Cache feature may cause wait events. Wait events are identified in the wait_event column of the pg_stat_activity view. GMC specific wait events are described below.</p><p>[GMC Feature Wait Events]</p><table><col><col><col><tr><th valign="top"><p>Wait Event Type</p></th><th valign="top"><p>Wait Event Name</p></th><th valign="top"><p>Description</p></th></tr><tr><td align="left" valign="top"><p>LWLock</p></td><td align="left" valign="top"><p>GlobalCatcache</p></td><td align="left" valign="top"><p>Waiting to find, add, and remove meta caches in the GMC area.</p></td></tr><tr><td align="left" valign="top"><p>IPC</p></td><td align="left" valign="top"><p>GMCSweep</p></td><td align="left" valign="top"><p>Waiting to select a meta cache that can be deleted when GMC space is low.</p><p>If the GMC is fully referencing and there is no deletable meta cache, it is waiting for the reference to be removed and a deletable meta cache to be selected.</p></td></tr></table><div class="note"><p class="title">Note</p><div class="notebody"><p>If GMCSweep is happened frequently, increase the pgx_global_metacache setting.</p></div></div><div class="ref"><p class="title">See</p><div class="refbody"><p>Refer to "Viewing Statistics" in the PostgreSQL Documentation for information on the pg_stat_activity view.</p></div></div></dd></dl><p></p></div></div><div class="header_footer"><div class="back_next"><a href="b1439-00-12-01-03.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1439-00-12-01-05.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>