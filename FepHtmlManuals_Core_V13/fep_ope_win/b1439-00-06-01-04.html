<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>6.1.4 Masking Format</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Operation Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="b1439-00-06-00-00.html">Chapter&nbsp;6 Data Masking</a> &gt; <a href="b1439-00-06-01-00.html">6.1 Masking Policy</a> &gt; 6.1.4 Masking Format</div><div class="back_next"><a href="b1439-00-06-01-03.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1439-00-06-02-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="ID0500-mskN8">6.1.4 Masking Format<a name="N62G"></a></h3><div class="body"><div class="textblock"><p>Masking format is a combination of change method and displayed characters when the masking condition is met. Masking format varies depending on the masking type. The following describes the masking format.</p><p></p></div><p class="subhead_1" id="ID0500-mskN9"><span class="em">Full masking</span></p><div class="textblock"><p>With full masking, all characters are changed to values as determined by the database. Changed characters can be referenced in the pgx_confidential_values table. Also, replacement characters can be changed using the pgx_update_confidential_values system management function.</p><div class="ref"><p class="title">See</p><div class="refbody"><p>Refer to "<a href="b1439-00-06-03-00.html">6.3 Data Types for Masking</a>" for information on the data types for which data masking can be performed.</p></div></div></div><p class="subhead_1" id="ID0500-mskN10"><span class="em">Partial masking</span></p><div class="textblock"><p>With partial masking, data is changed according to the content in the function_parameters parameter. The method of specifying function_parameters varies depending on the data type.</p><table><col><col><tr><th valign="top"><p>Category</p></th><th valign="top"><p>Method of specifying function_parameters</p></th></tr><tr><td align="left" valign="top"><p>Numeric type</p></td><td align="left" valign="top"><p>'<span class="i">replacementC</span><span class="i">haracter</span>, <span class="i">start</span><span class="i">Position</span>, <span class="i">end</span><span class="i">Position</span>'</p><ul><li><p><span class="i">r</span><span class="i">eplacement</span><span class="i">C</span><span class="i">haracter</span>: Specify the number to display. Specify a value from 0 to 9.</p></li><li><p><span class="i">s</span><span class="i">tart</span><span class="i">Position</span>: Specify the start position of masking. Specify a positive integer.</p></li><li><p><span class="i">e</span><span class="i">nd</span><span class="i">Position</span>: Specify the end position of masking. Specify a positive integer that is greater than <span class="i">start</span><span class="i">Position</span>.</p></li></ul><div class="ex"><p class="title">Example</p><div class="exbody"><p>Specify as below to change the values from the 1st to 5th digits to 9.</p><p>function_parameters := '9, 1, 5'</p><p>In this example, if the original data is "123456789", it will be changed to "999996789".</p></div></div></td></tr><tr><td align="left" valign="top"><p>Character type</p></td><td align="left" valign="top"><p><span class="i">'</span><span class="i">inputF</span><span class="i">ormat</span>, <span class="i">output</span><span class="i">F</span><span class="i">ormat</span>, <span class="i">replacementC</span><span class="i">haracter</span>, <span class="i">start</span><span class="i">Position</span>, <span class="i">end</span><span class="i">Position</span><span class="i">'</span></p><ul><li><p><span class="i">inputF</span><span class="i">ormat</span>: Specify the current format of the data. Specify "V" for characters that will potentially be masked, and specify "F" for values such as spaces or hyphens that will not be masked.</p></li><li><p><span class="i">outputF</span><span class="i">ormat</span>: Define the method to format the displayed data. Specify "V" for characters that will potentially be masked. Any character to be output can be specified for each character "F" in <span class="i">input</span><span class="i">F</span><span class="i">ormat</span>. If you want to output a single quotation mark, specify two of them consecutively. </p></li><li><p><span class="i">r</span><span class="i">eplacement</span><span class="i">C</span><span class="i">haracter</span>: Specify any single character. If you want to output a single quotation mark, specify two of them consecutively.</p></li><li><p><span class="i">s</span><span class="i">tart</span><span class="i">Position</span>: Specify the position of "V" as the start position of masking. For example, to specify the position of the 4th "V" from the left, specify 4. Specify a positive integer.</p></li><li><p><span class="i">e</span><span class="i">nd</span><span class="i">Position</span>: Specify the position of "V" as an end position of masking. When working out the end position, do not include positions of "F". For example, to specify the position of the 11th "V" from the left, specify 11. Specify a positive integer that is greater than <span class="i">startPosition</span>.</p></li></ul><div class="ex"><p class="title">Example</p><div class="exbody"><p>Specify as below to mask a telephone number other than the first three digits using *.</p><p>function_parameters := 'VVVFVVVVFVVVV, VVV-VVVV-VVVV, *, 4, 11'</p><p>In this example, if the original data is "012-3156-7890", it will be changed to "012-****-****".</p></div></div></td></tr><tr><td align="left" valign="top"><p>Date/timestamp type</p></td><td align="left" valign="top"><p>'MDYHMS'</p><ul><li><p>M: Masks month. To mask month, enter the month from 1 to 12 after a lowercase letter m. Specify an uppercase letter M to not mask month.</p></li><li><p>D: Masks date. To mask date, enter the date from 1 to 31 after a lowercase letter d. If a value bigger than the last day of the month is entered, the last day of the month will be displayed. Specify an uppercase letter D to not mask date.</p></li><li><p>Y: Masks year. To mask year, enter the year from 1 to 9999 after a lowercase letter y. Specify an uppercase letter Y to not mask year.</p></li><li><p>H: Masks hour. To mask hour, enter the hour from 0 to 23 after a lowercase letter h. Specify an uppercase letter H to not mask hour.</p></li><li><p>M: Masks minute. To mask minute, enter the minute from 0 to 59 after a lowercase letter m. Specify an uppercase letter M to not mask minute.</p></li><li><p>S: Masks second. To mask second, enter the second from 0 to 59 after a lowercase letter s. Specify an uppercase letter S to not mask second.</p></li></ul><div class="ex"><p class="title">Example</p><div class="exbody"><p>Specify as below to mask hour, minute, and second and display 00:00:00.</p><p>function_parameters := 'MDYh0m0s0'</p><p>In this example, if the original data is "2010-10-10 10:10:10", it will be changed to "2010-10-10 00:00:00".</p></div></div></td></tr></table><div class="ref"><p class="title">See</p><div class="refbody"><ul><li><p>Refer to "<a href="b1439-b-03-02.html">B.3.2 pgx_create_confidential_policy</a>" for information on function_parameters.</p></li><li><p>Refer to "<a href="b1439-00-06-03-00.html">6.3 Data Types for Masking</a>" for information on the data types for which masking can be performed.</p></li></ul></div></div></div><p class="subhead_1" id="ID0500-mskN11"><span class="em">Regular expression masking</span></p><div class="textblock"><p>With regular expression masking, data is changed according to the content of the regexp_pattern, regexp_replacement and regexp_flags parameters. For regexp_pattern, specify the search pattern using a regular expression. For regexp_replacement, specify the replacement character to use when data matches the search pattern. For regexp_flags, specify the regular expression flags.</p><div class="ex"><p class="title">Example</p><div class="exbody"><p>Specify as below to change all three characters starting from b to X.</p><p>regexp_pattern := 'b..'</p><p>regexp_replacement:= 'X'</p><p>regexp_flags := 'g'</p><p>In this example, if the original data is "foobarbaz", it will be changed to "fooXX".</p></div></div><div class="ref"><p class="title">See</p><div class="refbody"><ul><li><p>Refer to "POSIX Regular Expressions" in the PostgreSQL Documentation and check pattern, replacement, and flags for information on the values that can be specified for regexp_pattern, regexp_replacement, and regexp_flags.</p></li><li><p>Refer to "<a href="b1439-00-06-03-00.html">6.3 Data Types for Masking</a>" for information on the data types for which masking can be performed.</p></li></ul></div></div><div class="note"><p class="title">Note</p><div class="notebody"><ul><li><p>When column data type is character(<span class="i">n</span>) or char(<span class="i">n</span>) and if the string length after change exceeds n, the extra characters will be truncated and only characters up to the nth character will be displayed.</p></li><li><p>When column data type is character varying(<span class="i">n</span>) or varchar(<span class="i">n</span>) and if the string length after change exceeds the length before the change, the extra characters will be truncated and only characters up to the length before change will be displayed.</p></li></ul></div></div></div></div><div class="header_footer"><div class="back_next"><a href="b1439-00-06-01-03.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1439-00-06-02-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>