<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>15.1.1 Using WebAdmin</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Operation Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="b1439-00-15-00-00.html">Chapter&nbsp;15 Actions when an Error Occurs</a> &gt; <a href="b1439-00-15-01-00.html">15.1 Recovering from Disk Failure (Hardware)</a> &gt; 15.1.1 Using WebAdmin</div><div class="back_next"><a href="b1439-00-15-01-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1439-00-15-01-02.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="br071100">15.1.1 Using WebAdmin</h3><div class="body"><div class="textblock"><p>Recover the database cluster by following the appropriate recovery procedure below for the disk where the failure occurred.</p><div class="note"><p class="title">Note</p><div class="notebody"><p>Recovery operation cannot be performed on an instance that is part of a streaming replication cluster in standby mode.</p><p>If disk failure occurs on a standby instance, it may be necessary to delete and re-create the instance.</p><p>Recovery operation can be performed on an instance that is part of a streaming replication cluster in "Master" mode. If a recovery operation is performed on a master instance, it will break the replication cluster and streaming replication will stop between the master instance and all its standby instances. In such an event, the standby instances can be promoted to standalone instances or can be deleted and re-created.</p></div></div><p></p></div><p class="subhead_1" id="ID07000000N3"><span class="em">If failure occurred in the data storage disk or the transaction log storage disk</span><a name="N92G"></a><span class="em"></span></p><div class="textblock"><p>Follow the procedure below to recover the data storage disk or the transaction log storage disk.</p><ol><li><p>Stop applications</p><p>Stop applications that are using the database.</p></li><li><p>Stop the instance</p><p>Stop the instance. Refer to "<a href="b1439-00-02-01-01.html">2.1.1 Using WebAdmin</a>" for information on how to stop an instance. WebAdmin automatically stops instances if recovery of the database cluster is performed without stopping the instance.</p></li><li><p>Recover the failed disk</p><p>Replace the disk, and then recover the volume configuration information.</p></li><li><p>Create a tablespace directory</p><p>If a tablespace was defined after backup, create a directory for it.</p></li><li><p>Recover the keystore, and enable automatic opening of the keystore</p><p>Do the following if the data in the database has been encrypted:</p><ul><li><p>Restore the keystore to its state at the time of the database backup.</p></li><li><p>Enable automatic opening of the keystore.</p></li></ul></li><li><p>Recover the database cluster</p><p>Log in to WebAdmin, and in the [Instances] tab, click [Solution] for the error message in the lower-right corner.</p></li><li><p>Run recovery</p><p>In the [Restore Instance] dialog box, click [Yes].</p><p>Instance restore is performed. An instance is automatically started when recovery is successful.</p><div class="note"><p class="title">Note</p><div class="notebody"><p>WebAdmin does not support recovery of hash index. If you are using a hash index, then after recovery, execute the REINDEX command to rebuild it. Use of hash indexes is not recommended.</p></div></div></li><li><p>Resume applications</p><p>Resume applications that are using the database.</p></li></ol><div class="point"><p class="title">Point</p><div class="pointbody"><p>WebAdmin may be unable to detect disk errors, depending on how the error occurred.</p><p>If this happens, refer to "<a href="b1439-00-15-10-03.html">15.10.3 Other Errors</a>" to perform recovery.</p></div></div></div><p class="subhead_1" id="ID07000000N4"><span class="em">If failure occurred on the backup</span><span class="em"> data</span><span class="em"> storage disk</span><a name="N93G"></a><span class="em"></span></p><div class="textblock"><p>Follow the procedure below to recover the backup data storage disk.</p><ol><li><p>Recover the failed disk</p><p>Replace the disk, and then recover the volume configuration information.</p></li><li><p>Recover the backup data</p><p>Log in to WebAdmin, and in the [Instances] tab, click [Solution] for the error message.</p></li><li><p>Run backup</p><p>Perform backup to enable recovery of the backup data. In the [Backup] dialog box, click [Yes]. The backup is performed. An instance is automatically started when backup is performed.</p></li></ol><div class="point"><p class="title">Point</p><div class="pointbody"><p>If you click [Recheck the status], the resources in the data storage destination and the backup data storage destination are reconfirmed. As a result, the following occurs:</p><ul><li><p>If an error is not detected</p><p>The status of the data storage destination and the backup data storage destination returns to normal, and it is possible to perform operations as usual.</p></li><li><p>If an error is detected</p><p>An error message is displayed in the message list again. Click [Solution], and resolve the problem by following the resolution for the cause of the error displayed in the dialog box.</p></li></ul></div></div></div></div><div class="header_footer"><div class="back_next"><a href="b1439-00-15-01-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1439-00-15-01-02.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>