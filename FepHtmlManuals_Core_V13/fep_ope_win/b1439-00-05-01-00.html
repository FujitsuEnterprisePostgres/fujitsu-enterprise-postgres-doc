<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>5.1 Protecting Data Using Encryption</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Operation Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="b1439-00-05-00-00.html">Chapter&nbsp;5 Protecting Storage Data Using Transparent Data Encryption</a> &gt; 5.1 Protecting Data Using Encryption</div><div class="back_next"><a href="b1439-00-05-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1439-00-05-02-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="br051000">5.1 Protecting Data Using Encryption</h2><div class="body"><div class="textblock"><p>With PostgreSQL, data in a database is protected from access by unauthorized database users through the use of authentication and access controls. However, the OS file is not protected from attackers who bypass the database server's authentication and access controls.</p><p>With FUJITSU Enterprise Postgres, data inside the OS file is encrypted, so valuable information is protected even if the file or disk is stolen.</p><p>Data to be stored in a database is encrypted when it is written to the data file, and decrypted when it is read.</p><p>This is performed automatically by the instance, so the user and the application need not be aware of key management and encryption or decryption. This process is called TDE (Transparent Data Encryption).</p><p>The characteristics of TDE are described below.</p><p></p></div><p class="subhead_1" id="ID05000000N1"><span class="em">Encryption mechanisms</span><a name="N26G"></a><span class="em"></span></p><div class="textblock"><dl><dt class="em">Two-layer encryption key and the keystore<a name="N27G"></a></dt><dd><p>In each tablespace, there is a tablespace encryption key that encrypts and decrypts all the data within. The tablespace encryption key is encrypted by the master encryption key and saved. <br>Only one master encryption key exists in a database cluster. It is encrypted based on a passphrase specified by the user and stored in a keystore. FUJITSU Enterprise Postgres provides a file-based keystore. Attackers who do not know the passphrase cannot read the master encryption key from the keystore.</p></dd></dl><dl><dt class="em">Strong encryption algorithms<a name="N28G"></a></dt><dd><p>TDE uses the Advanced Encryption Standard (AES) as its encryption algorithm. AES was adopted as a standard in 2002 by the United States Federal Government, and is used throughout the world.</p></dd></dl><dl><dt class="em">Faster encryption and decryption based on hardware<a name="N29G"></a></dt><dd><p>TDE minimizes the overhead of encryption and decryption by using the AES-NI (Advanced Encryption Standard New Instructions) built into Intel(R) Xeon(R) processors since the 5600 series. This means that even in situations where previously the minimum encryption target was selected as a tradeoff between performance and security, it is now possible to encrypt all the data of an application.</p><p>Refer to the Intel Corporation's website for information on the list of processors equipped with AES-NI.</p></dd></dl><dl><dt class="em">Zero overhead storage areas</dt><dd><p>Encryption does not change the size of data stored in tables, indexes, or WAL. There is, therefore, no need for additional estimates or disks.</p></dd></dl></div><p class="subhead_1" id="ID05000000N2"><span class="em">Scope of encryption</span><a name="N30G"></a><span class="em"></span></p><div class="textblock"><dl><dt class="em">All user data within the specified tablespace<a name="N31G"></a></dt><dd><p>The tablespace is the unit for specifying encryption. All tables, indexes, temporary tables, and temporary indexes created in the encrypted tablespace are encrypted. There is no need for the user to consider which tables and strings to encrypt.</p><p>Refer to "<a href="b1439-00-05-04-00.html">5.4 Encrypting a Tablespace</a>" for details.</p></dd></dl><dl><dt class="em">Backup data<a name="N32G"></a></dt><dd><p>The pgx_dmpall command and pg_basebackup command create backup data by copying the OS file. Backups of the encrypted data are, therefore, also encrypted. Information is protected from leakage even if the backup medium is stolen.</p></dd></dl><dl><dt class="em">WAL and temporary files<a name="N33G"></a></dt><dd><p>WAL, which is created by updating encrypted tables and indexes, is encrypted with the same security strength as the update target. When large merges and sorts are performed, the encrypted data is written to a temporary file in encrypted format.</p></dd></dl><dl><dt class="em">Streaming replication support<a name="N34G"></a></dt><dd><p>You can combine streaming replication and transparent data encryption. The data and WAL encrypted on the primary server is transferred to the standby server in its encrypted format and stored.</p></dd></dl><div class="note"><p class="title">Note</p><div class="notebody"><p>The following are not encrypted:</p><ul><li><p>pg_dump and pg_dumpall output files</p></li><li><p>Files output by the COPY command</p></li><li><p>Notification event payloads that communicate using the LISTEN or NOTIFY command</p></li><li><p>Checksum validation is not performed on encrypted tablespaces during backup and when using the pg_checksum utility.</p></li></ul></div></div></div></div><div class="header_footer"><div class="back_next"><a href="b1439-00-05-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1439-00-05-02-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>