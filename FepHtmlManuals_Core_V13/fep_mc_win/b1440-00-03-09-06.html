<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>3.9.6 Uninstalling in Database Multiplexing Mode</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Cluster Operation Guide(Database Multiplexing)</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="b1440-00-03-00-00.html">Chapter&nbsp;3 Operations in Database Multiplexing Mode</a> &gt; <a href="b1440-00-03-09-00.html">3.9 Changes in Operation </a> &gt; 3.9.6 Uninstalling in Database Multiplexing Mode</div><div class="back_next"><a href="b1440-00-03-09-05.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1440-00-04-00-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="mID_070704_w">3.9.6 Uninstalling in Database Multiplexing Mode<a name="N86G"></a></h3><div class="body"><div class="textblock"><p>This section explains how to uninstall FUJITSU Enterprise Postgres on a server using database multiplexing mode.</p><p>Some tasks must be performed on the database server, and others must be performed on the arbitration server.</p><p>The tasks on the arbitration server are required only if the arbitration server is used for automatic degradation.</p><p></p></div><p class="subhead_1" id="IDclust07N27"><span class="em">Tasks on the database server</span></p><div class="textblock"><ol><li><p>Stop the multiplexed instances and Mirroring Controller</p><p>Refer to "<a href="b1440-00-03-02-00.html">3.2 Starting and Stopping Mirroring Controller</a>" for information on how to stop the instance.</p></li><li><p>Unregister Mirroring Controller from the Windows service</p><p>Execute the mc_ctl command in unregister mode to unregister Mirroring Controller from the Windows service.</p><pre>Example)</pre><pre class="border">&gt; mc_ctl unregister -M D:\mcdir\inst1</pre></li><li><p>Delete registries related to the event log</p><p>If messages are output to the event log, DLLs are registered in accordance with "<a href="b1440-00-02-02-01.html#mID_060202_w2">2.2.1.2 Preparatory Tasks for the Output of Error Logs to the Event Log</a>". Delete these registries so that no unnecessary issues occur.</p><pre>Example)The following is an example in which the DLL of a 64-bit product that is registered under the default event source name is deleted. Note that "&lt;<span class="i">x</span>&gt;" indicates the product version.</pre><pre class="border">&gt; regsvr32 /u "c:\Program Files\Fujitsu\fsepv&lt;<span class="i">x</span>&gt;server64\lib\mcevent.dll"</pre><ul><li><p>Delete the registered DLL for each instance</p><p>DLL registration is performed so that messages output to the event log are identified by each instance, and are output to any event source named by the user.</p><p>Accordingly, it is necessary to delete the DLL registry for each instance. Delete the DLL registry for each event source name.</p><pre>Example)The following is an example in which the DLL of a 64-bit product that is registered under the event source name "Mirroring Controller inst1" is deleted. Note that "&lt;<span class="i">x</span>&gt;" indicates the product version.</pre><pre class="border">&gt; regsvr32 /u /i:"Mirroring Controller inst1" "c:\Program Files\Fujitsu\fsepv&lt;<span class="i">x</span>&gt;server64\lib\mcevent.dll"</pre></li><li><p>If installing multiple versions</p><p>If the database multiplexing system you set up using the FUJITSU Enterprise Postgres package has been set to output error logs to the event log, use the DLL path name that you took note of previously as explained in "<a href="b1440-00-02-02-01.html#mID_060202_w2">2.2.1.2 Preparatory Tasks for the Output of Error Logs to the Event Log</a>" to reregister the default event source name.</p></li></ul><div class="note"><p class="title">Note</p><div class="notebody"><p>Ensure that you delete the DLLs before the uninstallation. If you perform the uninstallation without doing so, you may not be able to delete the DLLs at a later time.</p></div></div></li><li><p>Uninstall FUJITSU Enterprise Postgres</p><p>Refer to "Uninstallation" in the Installation and Setup Guide for Server for information on how to uninstall FUJITSU Enterprise Postgres.</p></li></ol></div><p class="subhead_1" id="IDclust07N28"><span class="em">Tasks on the arbitration server</span></p><div class="textblock"><p>Refer to "Uninstallation" in the Installation and Setup Guide for Server Assistant, and uninstall the Server Assistant.</p></div></div><div class="header_footer"><div class="back_next"><a href="b1440-00-03-09-05.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1440-00-04-00-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2016-2021 FUJITSU LIMITED</div></div></body></html>