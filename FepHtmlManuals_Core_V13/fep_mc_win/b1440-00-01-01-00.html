<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>1.1 What is Database Multiplexing Mode</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Cluster Operation Guide(Database Multiplexing)</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="b1440-00-01-00-00.html">Chapter&nbsp;1 Overview of Database Multiplexing Mode</a> &gt; 1.1 What is Database Multiplexing Mode</div><div class="back_next"><a href="b1440-00-01-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1440-00-01-01-01.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="mID_0501">1.1 What is Database Multiplexing Mode<a name="N2G"></a></h2><div class="body"><div class="textblock"><p>Database multiplexing mode is an operation mode (log shipping mode) based on PostgreSQL streaming replication. Other software such as cluster software is not required.</p><p>This mode replicates the database on all servers that comprise the cluster system. It achieves this by transferring the updated transaction logs of the database from the server that receives the updates (primary server) to another server (standby server), and then reflecting them on the standby server. The client driver automatically distinguishes between the primary and standby servers, so applications can be connected transparently regardless of the physical server.</p><p>It consists of a feature that detects faults in the elements that are essential for the continuity of the database operation (such as the database process, disk, and network), as well as simplified switchover and standby server disconnection features. Furthermore, referencing can be performed on the standby server. The database will be copied in synchronous mode.</p><div class="note"><p class="title">Note</p><div class="notebody"><p>If using WebAdmin or Mirroring Controller, FUJITSU Enterprise Postgres supports cluster systems comprising one primary server and one standby server.</p><ul><li><p>Although it is possible to connect an asynchronous standby server to the cluster system as an additional server, the standby server is not targeted for monitoring by Mirroring Controller.</p></li><li><p>A synchronous standby server cannot be connected to the cluster system as an additional server.</p></li></ul></div></div><div class="ref"><p class="title">See</p><div class="refbody"><p>The streaming replication feature is not described in this manual.</p><p>Refer to "High Availability, Load Balancing, and Replication" in the PostgreSQL Documentation for information on the streaming replication feature.</p></div></div><br><p class="caption">Figure&nbsp;1.1 Failover from the primary server to the standby server</p><p><img src="clust05img/e-0501-db1.gif" alt="" width="392" height="303"></p><br><p class="caption">Figure&nbsp;1.2 Standby server disconnection</p><p><img src="clust05img/e-0501-db2.gif" alt="" width="393" height="307"></p><p></p></div><p class="subhead_1" id="mID_050101_arbiter_sv"><span class="em">Database degradation using the arbitration server</span></p><div class="textblock"><p>FUJITSU Enterprise Postgres provides the Server Assistant that objectively determines the status of database servers as a third party, and if necessary, isolates affected databases if the database servers are unable to accurately ascertain their mutual statuses in database multiplexing mode, such as due to a network error between database servers, or server instability. Database degradation can be performed by using the server (arbitration server) on which the Server Assistant is installed.</p><p>For database degradation using the arbitration server, if the database servers are unable to check their mutual statuses (due to a network error between database servers or server instability), then the database server queries the arbitration server for the status of the other database server. If it is determined based on the heartbeat result that the status is unstable, the applicable database server will be isolated from the cluster system (fencing). The arbitration server periodically heartbeats the database server so that it can respond immediately to queries from the database server. The fencing process can be customized according to the environment where Mirroring Controller is used.</p><p>Additionally, the database servers are always performing their heartbeats for the arbitration server so that it can perform check requests any time.</p><p class="caption">Figure&nbsp;1.3 Database degradation using the arbitration server</p><p><img src="clust05img/e-0501-db3.gif" alt="" width="431" height="457"></p><div class="note"><p class="title">Note</p><div class="notebody"><p>Install the arbitration server on a different physical server to that of the database server. Refer to "<a href="b1440-00-01-02-00.html">1.2 System Configuration for Database Multiplexing Mode</a>" for information on the system configuration when using the arbitration server.</p></div></div><br></div><p class="subhead_1" id="mID_050101_arbiter_cmd"><span class="em">Database degradation using the arbitration command</span></p><div class="textblock"><p>The arbitration command is a user command that performs arbitration processing in lieu of the arbitration server. If an arbitration server cannot be deployed, arbitration of the database server can be performed using the arbitration command.</p><p class="caption">Figure&nbsp;1.4 Database degradation using the arbitration command</p><p><img src="clust05img/e-0501-db4.gif" alt="" width="547" height="346"></p><div class="ref"><p class="title">See</p><div class="refbody"><p>Refer to "<a href="b1440-00-02-06-00.html">2.6 Creating a User Exit for a Database Server</a>" or "<a href="b1440-c-00-00.html">Appendix&nbsp;C User Commands</a>" for information on user commands.</p></div></div></div></div><div class="header_footer"><div class="back_next"><a href="b1440-00-01-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1440-00-01-01-01.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2016-2021 FUJITSU LIMITED</div></div></body></html>