<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>2.2.1 Preparing the Database Server</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Cluster Operation Guide(Database Multiplexing)</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="b1440-00-02-00-00.html">Chapter&nbsp;2 Setting Up Database Multiplexing Mode</a> &gt; <a href="b1440-00-02-02-00.html">2.2 Preparing for Setup</a> &gt; 2.2.1 Preparing the Database Server</div><div class="back_next"><a href="b1440-00-02-02-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1440-00-02-02-02.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="mID_060201">2.2.1 Preparing the Database Server<a name="N26G"></a></h3><div class="body"><div class="textblock"><p></p></div></div><h4 id="mID_06020101">2.2.1.1 Preparing the Backup Disk<a name="N27G"></a></h4><div class="body"><div class="textblock"><p>In Mirroring Controller, by performing a backup, recovery is possible even if all server disks are corrupted.</p><p>The content on the primary server should be backed up. However, through switching and failback, the standby server may also become the primary server. Accordingly, prepare each of the backup disk devices for the primary and standby servers. Perform backup on the primary server used at the time of the backup.</p></div></div><h4 id="mID_060202_w2">2.2.1.2 Preparatory Tasks for the Output of Error Logs to the Event Log<a name="N28G"></a></h4><div class="body"><div class="textblock"><p>This section explains the preparatory tasks required to output error logs to the event log.</p><div class="note"><p class="title">Note</p><div class="notebody"><p>If you do not register an event source name, the message content output to the event log may be incomplete.</p></div></div></div><p class="subhead_1" id="IDclust06N6"><span class="em">Setting </span><span class="em">each</span><span class="em"> server</span></p><div class="textblock"><p>You should register this default event source name beforehand because the default event source name "MirroringControllerOpen" may be output to the event log when Mirroring Controller commands on the database server are used.</p><p>Example)<br>The following is an example in which the DLL of a 64-bit product is registered under the default event source name. Note that "&lt;<span class="i">x</span>&gt;" indicates the product version.</p><pre class="border">&gt; regsvr32 "c:\Program Files\Fujitsu\fsepv&lt;<span class="i">x</span>&gt;server64\lib\mcevent.dll"</pre><br></div><p class="subhead_1" id="IDclust06N7"><span class="em">Setting </span><span class="em">each</span><span class="em"> instance</span></p><div class="textblock"><p>You can output messages to any event source named by the user, so that messages output to the event log can be identified by each instance.</p><pre>Example)The following is an example in which the DLL of a 64-bit product is registered under the event source name "Mirroring Controller inst1". Note that "&lt;<span class="i">x</span>&gt;" indicates the product version.</pre><pre class="border">&gt; regsvr32 /n /i:"Mirroring Controller inst1" "c:\Program Files\Fujitsu\fsepv&lt;<span class="i">x</span>&gt;server64\lib\mcevent.dll"</pre><br><p>The parameter must be edited for each instance. Refer to "<a href="b1440-a-04-01.html">A.4.1 Server Configuration File for the Database Servers</a>" to set the event_source parameter.</p></div><p class="subhead_1" id="IDclust06N8"><span class="em">If installing multiple versions</span></p><div class="textblock"><p>If FUJITSU Enterprise Postgres is already installed on the same machine, search for the key below in a registry editor, and make a note of the path of the registered DLL. Afterwards, register a new DLL using the default event source name.</p><p>Use the DLL path that you made a note of in the above step when re-registering the default event source name during uninstallation.</p><pre class="border">MirroringControllerOpen</pre></div></div><h4 id="mID_060203_w2">2.2.1.3 Security Policy Settings<a name="N29G"></a></h4><div class="body"><div class="textblock"><p>Security settings that allow logon as a service are required in Mirroring Controller for the operating system user account of the instance administrator user in order to start and stop Mirroring Controller and an instance using a Windows service.</p><p>If the security settings have not been configured, refer to "<a href="b1440-e-01-00.html">E.1 Security Policy Settings</a>" for information on configuring the settings.</p></div></div><div class="header_footer"><div class="back_next"><a href="b1440-00-02-02-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1440-00-02-02-02.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2016-2021 FUJITSU LIMITED</div></div></body></html>