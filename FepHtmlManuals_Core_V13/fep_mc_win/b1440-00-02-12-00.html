<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>2.12 Setting Automatic Start and Stop of Mirroring Controller and Multiplexed Instances</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Cluster Operation Guide(Database Multiplexing)</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="b1440-00-02-00-00.html">Chapter&nbsp;2 Setting Up Database Multiplexing Mode</a> &gt; 2.12 Setting Automatic Start and Stop of Mirroring Controller and Multiplexed Instances</div><div class="back_next"><a href="b1440-00-02-11-04.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1440-00-02-13-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="mID_0610">2.12 Setting Automatic Start and Stop of Mirroring Controller and Multiplexed Instances<a name="N57G"></a></h2><div class="body"><div class="textblock"><p>Multiplexed instances and Mirroring Controller can be started and stopped automatically in line with the starting and stopping of the operating system of the database server.</p><p>However, to stop the operating system on the primary server, it is necessary to stop the operating system on the standby server so that no unnecessary automatic switching or errors occur.</p><div class="note"><p class="title">Note</p><div class="notebody"><p>To guarantee the startup sequence of Mirroring Controller on the primary and standby servers, first confirm that the primary server has started, and then start the standby servers in sequence.</p><p>The startup sequence of the Mirroring Controller process on the database server and the Mirroring Controller arbitration process on the arbitration server is not guaranteed. If the arbitration server cannot be started first, execute the mc_ctl command in start mode with the --async-connect-arbiter option specified to start the Mirroring Controller process.</p></div></div><p>You can configure the Windows service to perform automatic start and stop of Mirroring Controller.</p><dl><dt class="em">Setting automatic start and stop of a multiplexed instance</dt><dd><p>No settings are required for Mirroring Controller to start and stop an instance.</p><div class="note"><p class="title">Note</p><div class="notebody"><p>Do not configure the Windows service of a multiplexed instance to perform automatic start.</p></div></div></dd></dl><dl><dt class="em">Configuring automatic start and stop for database multiplexing mode</dt><dd><dl><dt class="em">Configuring during setup</dt><dd><p>When registering Mirroring Controller to the Windows service in "<a href="b1440-00-02-04-01.html">2.4.1 Setting Up Database Multiplexing Mode on the Primary Server</a>" and "<a href="b1440-00-02-05-01.html">2.5.1 Setting Up Database Multiplexing Mode on the Standby Server</a>", specify "auto" for the -S option of the register mode used with the mc_ctl command.</p><pre>Example)</pre><pre class="border">&gt; mc_ctl register -M D:\mcdir\inst1 -P ******** -S auto</pre></dd></dl><dl><dt class="em">Changing the configuration after setup</dt><dd><p>Use the sc config command to change the configuration of the Windows service of Mirroring Controller.</p><pre>Example)The following is an example using the registered service name "Mirroring_Controller_inst1".</pre><pre class="border">&gt; sc config "Mirroring_Controller_inst1" start= auto</pre></dd></dl></dd></dl><div class="ref"><p class="title">See</p><div class="refbody"><p>Refer to documentation such as Windows Help and Support for the sc command for information on how to configure the service.</p></div></div><div class="tips"><p class="title">Information</p><div class="tipsbody"><p>You can check the registration status in the Windows service window or by using the sc qc command.</p></div></div><p></p></div></div><div class="header_footer"><div class="back_next"><a href="b1440-00-02-11-04.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1440-00-02-13-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2016-2021 FUJITSU LIMITED</div></div></body></html>