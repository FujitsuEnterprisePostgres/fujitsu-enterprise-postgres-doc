<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>4.3.1 Using WebAdmin</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Installation and Setup Guide for Server</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="b1438-00-04-00-00.html">Chapter&nbsp;4 Setup</a> &gt; <a href="b1438-00-04-03-00.html">4.3 Creating Instances</a> &gt; 4.3.1 Using WebAdmin</div><div class="back_next"><a href="b1438-00-04-03-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1438-00-04-03-02.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="mID_0402_instance_WebAdmin">4.3.1 Using WebAdmin<a name="N29G"></a></h3><div class="body"><div class="textblock"><p>This section describes how to create an instance using WebAdmin.</p><p>WebAdmin must be set up correctly before it can be used. Refer to "<a href="b1438-b-01-00.html">B.1 Setting Up WebAdmin</a>" for details. Additionally, if WebAdmin needs to be configured to use an external repository database, refer to "<a href="b1438-b-03-00.html">B.3 Using an External Repository for WebAdmin</a>" for details.</p><p>It is recommended to use the following browsers with WebAdmin:</p><ul><li><p>Internet Explorer 11</p></li><li><p>Microsoft Edge (Build41 or later)</p></li></ul><p>WebAdmin will work with other browsers, such as Firefox and Chrome, however, the look and feel may be slightly different.</p><p>Configure your browser to allow cookies and pop-up requests from the server on which FUJITSU Enterprise Postgres is installed.</p><p>Refer to "<a href="b1438-a-00-00.html">Appendix&nbsp;A Recommended WebAdmin Environments</a>" for information on how to change the pop-up request settings and other recommended settings.</p><div class="note"><p class="title">Note</p><div class="notebody"><ul><li><p>WebAdmin does not run in Windows(R) safe mode.</p></li><li><p>If the same instance is operated from multiple WebAdmin windows, it will not work correctly.</p></li><li><p>If the same instance is operated from multiple WebAdmin versions, it will not work correctly. Always use the latest version of WebAdmin for instance operations.</p></li><li><p>For efficient use of WebAdmin, it is recommended not to use the browser [Back] and [Forward] navigation buttons, the [Refresh] button, and context-sensitive menus, including equivalent keyboard shortcuts.</p></li><li><p>Copying and pasting the WebAdmin URLs are not supported. Additionally, bookmarking of WebAdmin URLs is not supported.</p></li><li><p>It is recommended to match the language between the instance server locale and WebAdmin.</p></li><li><p>WebAdmin supports only two languages: English and Japanese.</p></li><li><p>It is recommended to change the WebAdmin language setting from the instance details page only.</p></li><li><p>It is recommended to operate WebAdmin using the WebAdmin launcher.</p></li><li><p>WebAdmin uses the labels "Data storage path", "Backup storage path" and "Transaction log path" to indicate "data storage destination", "backup data storage destination" and "transaction log storage destination" respectively. In this manual these terms are used interchangeably.</p></li><li><p>If the browser was not operated for a fixed period (about 30 minutes), the session will time out and the login page will be displayed again for the next operation.</p></li><li><p>Port access permissions<br>If a port is blocked (access permissions have not been granted) by a firewall, enable use of the port by granting access. Refer to the vendor document for information on how to grant port access permissions.<br>Consider the security risks carefully when opening ports.</p></li><li><p>When creating or importing an instance in WebAdmin, set the log_directory parameter in postgresql.conf in the following format:<br>log_directory='<span class="i">userProfileFolder</span>\\<span class="i">localSettingsFolder</span>\\Fujitsu\\fsep_<span class="i">version</span>\\<span class="i">instanceNamePortNumber</span>\\log'<br><br>Example: <span class="i">userProfileFolder</span>\\<span class="i">localSettingsFolder</span> will be C:\\Users\\<span class="i">userName</span>\\AppData\\Local.</p></li></ul></div></div><p></p></div></div><h4 id="IDinsts04-03-wN4">4.3.1.1 Logging in to WebAdmin<a name="N30G"></a></h4><div class="body"><div class="textblock"><p>This section describes how to log in to WebAdmin.</p></div><p class="subhead_1" id="IDinsts04-03-wN5"><span class="em">Startup</span><span class="em"> URL for WebAdmin</span></p><div class="textblock"><p>In the browser address bar, type the startup URL of the WebAdmin window in the following format:</p><pre class="border">http://<span class="i">hostNameOrIpAddress</span>:<span class="i">portNumber</span>/</pre><ul><li><p><span class="i">hostNameOrIpAddress</span>: Host name or IP address of the server where WebAdmin is installed</p></li><li><p><span class="i">portNumber</span>: Port number of WebAdmin. The default port number is 27515.</p></li></ul><dl><dt class="em">Example</dt><dd><p>For a server with IP address "192.0.2.0" and port number "27515":</p><pre class="border">http://192.0.2.0:27515/</pre><br></dd></dl><p>The startup URL window shown below is displayed. From this window you can log in to WebAdmin or access the product documentation.</p><p><img src="insts04-03-wimg/e-webadmin-url.gif" alt="" width="795" height="451"></p></div><p class="subhead_1" id="IDinsts04-03-wN6"><span class="em">Logging in to </span><span class="em">WebAdmin</span></p><div class="textblock"><p>Click [Launch WebAdmin] in the startup URL window to start WebAdmin and display the login window. Enter the instance administrator user name (operating system user account name) and password, and log in to WebAdmin. User credential (instance administrator user ID and password) should not contain hazardous characters. Refer to "<a href="b1438-c-00-00.html">Appendix&nbsp;C WebAdmin Disallow User Inputs Containing Hazardous Characters</a>".</p></div></div><h4 id="mID_0402_instance_create">4.3.1.2 Creating an Instance<a name="N31G"></a></h4><div class="body"><div class="textblock"><p>This section describes how to create an instance.</p><ol><li><p>Start WebAdmin, and log in to the database server.</p></li><li><p>In the [Instances] tab, click <img src="insts04-03-wimg/e-add.gif" alt="" width="16" height="16">.</p></li><li><p>Enter the information for the instance to be created.</p><p><img src="insts04-03-wimg/e-win-instance-setup-info.gif" alt="" width="825" height="410"></p><p>Enter the following items:</p><ul><li><p>[Configuration type]: Whether to create a standalone instance or an instance that is part of a cluster.</p></li><li><p>[Server product type]: Sets which of the following instances to create:</p><ul><li><p>FUJITSU Enterprise Postgres 9.5 Instances</p></li><li><p>FUJITSU Enterprise Postgres 9.6 Instances</p></li><li><p>FUJITSU Enterprise Postgres 10 Instances</p></li><li><p>FUJITSU Enterprise Postgres 11 Instances</p></li><li><p>FUJITSU Enterprise Postgres 12 Instances</p></li><li><p>FUJITSU Enterprise Postgres 13 Instances</p></li></ul><p>The default is "FUJITSU Enterprise Postgres 13".<br>WebAdmin can create and manage instances compatible with the following, but new functionality in FUJITSU Enterprise Postgres 13 may not support the instance or it may be disabled.</p><ul><li><p>FUJITSU Enterprise Postgres 9.5</p></li><li><p>FUJITSU Enterprise Postgres 9.6</p></li><li><p>FUJITSU Enterprise Postgres 10</p></li><li><p>FUJITSU Enterprise Postgres 11</p></li><li><p>FUJITSU Enterprise Postgres 12</p></li></ul></li><li><p>[Location]: Whether to create the instance in the server that the current user is logged into, or in a remote server. The default is "Local", which will create the instance in the server machine where WebAdmin is currently running.</p></li><li><p>[Instance name]: Name of the database instance to manage</p><p>The name must meet the conditions below:</p><ul><li><p>Maximum of 16 characters</p></li><li><p>The first character must be an ASCII alphabetic character</p></li><li><p>The other characters must be ASCII alphanumeric characters</p></li></ul></li><li><p>[Instance port]: Port number of the database server</p></li><li><p>[Data storage path]: Directory where the database data will be stored</p></li><li><p>[Backup]: Whether to enable or disable the WebAdmin backup feature. The default is "Enabled". Select "Disabled" to disable all backup and restore functionality for the instance. If "Enabled" is selected, enter the following item:</p><ul><li><p>[Backup storage path]: Directory where the database backup will be stored</p></li></ul></li><li><p>[Transaction log path]: Directory where the transaction log will be stored</p></li><li><p>[Encoding]: Database encoding system</p></li><li><p>[WAL file size]: Allow the WAL file size to be set when creating an instance. The default is 16 MB if the field is blank. The size specified must be a power of 2 between 1 and 1024. This option is not available for standby instances.</p></li></ul><p>If "Remote" is selected for [Location], enter the following additional items:</p><ul><li><p>[Host name]: Name of the host where the instance is to be created</p></li><li><p>[Operating system credential]: Operating system user name and password for the remote machine where the instance is to be created</p></li><li><p>[Remote WebAdmin port for standalone]: Port in which WebAdmin is accessible in the remote machine</p></li></ul><div class="note"><p class="title">Note</p><div class="notebody"><ul><li><p>Refer to "<a href="b1438-00-04-02-02.html">4.2.2 Preparing Directories for Resource Deployment</a>" - "<span class="em">Considerations when deploying resources</span>" for information on points to consider when determining the data storage path, backup storage path, and transaction log path.</p></li><li><p>The following items can be modified after the instance has been created. These items cannot be modified on instances that have compatibility with FUJITSU Enterprise Postgres 9.5.</p><ul><li><p>Instance name</p></li><li><p>Port number</p></li><li><p>Backup storage path</p></li></ul><p>Refer to "<a href="b1438-00-04-03-01.html#mID_0403_WebAdmin_edit">Editing instance information</a>" for details.</p></li><li><p>Do not specify shortcuts for the data storage path, backup storage path, or transaction log path.</p></li><li><p>In the instance that is created using WebAdmin, the locale of the character set to be used in the database, and the locale of the collating sequence, are fixed using C.</p></li><li><p>The following characters can be used for the data storage path, backup storage path, and transaction log path:</p><ul><li><p>\ (backslash)</p></li><li><p>- (hyphen)</p></li><li><p>_ (underscore)</p></li><li><p>: (colon)</p></li><li><p>Space</p></li><li><p>A-Z, a-z, 0-9 (alphanumeric)</p></li></ul></li><li><p>Instance administrator read and write permissions are required for the data storage path, backup storage path, and transaction log path.</p></li><li><p>For the port number, specify an unused port number in the following range:</p><ul><li><p>1024 to 49151</p></li></ul></li><li><p>Make a note of the port number for use in the Windows firewall settings.</p></li><li><p>Refer to "<a href="b1438-00-04-05-02.html">4.5.2 Configuring Automatic Start and Stop of an Instance</a>" for information on configuring the automatic start and stop of instances.</p></li><li><p>For enhanced security, WebAdmin encrypts the superuser password using SCRAM-SHA-256 authentication for all FUJITSU Enterprise Postgres 10 or later instances. The client/driver must therefore support SCRAM-SHA-256 authentication if they need to connect to FUJITSU Enterprise Postgres 10 or later instances created by WebAdmin with superuser credentials.</p></li><li><p>Host name and Operating system credential (Operating system user name and password) should not contain hazardous characters. Refer to "<a href="b1438-c-00-00.html">Appendix&nbsp;C WebAdmin Disallow User Inputs Containing Hazardous Characters</a>".</p></li></ul></div></div></li><li><p>Click <img src="insts04-03-wimg/e-save.gif" alt="" width="16" height="16"> to create the instance.</p><p>If the instance is created successfully, a message indicating the same will be displayed.</p></li><li><p>The instance will be started when it is created successfully.</p><p><img src="insts04-03-wimg/e-win-setup-finish.gif" alt="" width="832" height="429"></p></li><li><p>Back up the basic information that was set</p><p>Back up the WebAdmin management information periodically to ensure operational continuity when a fault occurs on the system disk. Follow the procedure below to perform the backup.</p><ol class="alpha"><li><p>Stop the WebAdmin server. Refer to "<a href="b1438-b-01-03.html">B.1.3 Stopping the Web Server Feature of WebAdmin</a>" for details.</p></li><li><p>Back up the following directory:</p><pre><span class="i">webAdminInstallDir</span>\data\fepwa</pre><pre></pre></li></ol><div class="note"><p class="title">Note</p><div class="notebody"><p>The following message is output during startup of an instance when the startup process is operating normally, therefore, the user does not need to be aware of this message.</p><pre class="border">FATAL:  the database system is starting up (XXXXX)</pre></div></div></li></ol></div></div><h4 id="IDinsts04-03-wN7">4.3.1.3 Changing Instance Settings<a name="N32G"></a></h4><div class="body"><div class="textblock"><p>You can change the information that is set when an instance is created.</p><p>Change the following settings to suit the operating and management environment for FUJITSU Enterprise Postgres.</p><ul><li><p><a href="b1438-00-04-03-01.html#mID_0403_WebAdmin_code">Instance configuration</a></p><ul><li><p>Character encoding</p></li><li><p>Communication</p></li><li><p>SQL options</p></li><li><p>Memory</p></li><li><p>Streaming replication</p></li></ul></li><li><p><a href="b1438-00-04-03-01.html#mID_0403_WebAdmin_client"><span class="u">Changing client authentica</span><span class="u">t</span><span class="u">ion information</span></a></p></li><li><p><a href="b1438-00-04-03-01.html#mID_0403_WebAdmin_edit">Editing instance information</a></p></li></ul><div class="tips"><p class="title">Information</p><div class="tipsbody"><p>These settings are the same as the parameters that can be set in the files shown below. Refer to "<a href="b1438-d-00-00.html">Appendix&nbsp;D Configuring Parameters</a>" for information on the equivalence relationship between the item name and the parameter.</p><ul><li><p>postgresql.conf</p></li><li><p>pg_hba.conf</p></li></ul></div></div><div class="note"><p class="title">Note</p><div class="notebody"><p>The files shown below can also be modified directly, however if a parameter not described in "<a href="b1438-d-00-00.html">Appendix&nbsp;D Configuring Parameters</a>" was edited by mistake, WebAdmin may not run correctly.</p><ul><li><p>postgresql.conf</p></li><li><p>pg_hba.conf</p></li></ul></div></div><dl><dt class="em" id="mID_0403_WebAdmin_code">Instance configuration<a name="N33G"></a></dt><dd></dd></dl><ol><li><p>Start WebAdmin and log in to the database server.</p></li><li><p>In the [Instances] tab, click <img src="insts04-03-wimg/e-configuration.gif" alt="" width="16" height="16">.</p></li><li><p>Click <img src="insts04-03-wimg/e-edit.gif" alt="" width="16" height="16"> to change the configuration.</p></li><li><p>Click <img src="insts04-03-wimg/e-save.gif" alt="" width="16" height="16"> to save your changes.</p><div class="ref"><p class="title">See</p><div class="refbody"><p>Select a client-side encoding system that can be converted to/from the database encoding system. Refer to "Automatic Character Set Conversion Between Server and Client" in "Server Administration" in the "PostgreSQL Documentation" for information on the encoding system combinations that can be converted.</p></div></div></li></ol><dl><dt class="em" id="mID_0403_WebAdmin_client">Changing client authentication information<a name="N34G"></a></dt><dd></dd></dl><ol><li><p>Start WebAdmin and log in to the database server.</p></li><li><p>In the [Instances] tab, click <img src="insts04-03-wimg/e-authentication.gif" alt="" width="16" height="16">.</p><p>Click <img src="insts04-03-wimg/e-add.gif" alt="" width="16" height="16"> to register new authentication information.</p><p>To change authentication information, select the information, and then click <img src="insts04-03-wimg/e-edit-plump.gif" alt="" width="16" height="16">.</p><p>To delete authentication information, select the information, and then click <img src="insts04-03-wimg/e-delete.gif" alt="" width="16" height="16">. </p><div class="note"><p class="title">Note</p><div class="notebody"><p>When creating the instance, do not delete the entry below, because it is a connection required for WebAdmin to monitor the operational status of the database:<br>Type= host, Database=all, User=all, and Method=md5</p></div></div></li></ol><dl><dt class="em" id="mID_0403_WebAdmin_edit">Editing instance information<a name="N35G"></a></dt><dd></dd></dl><p>Use the [Edit instance] page to modify the following items for an instance:</p><ul><li><p>Instance name</p></li><li><p>Port number</p></li><li><p>Backup storage path</p></li></ul><ol><li><p>In the [Instances] tab, click <img src="insts04-03-wimg/e-edit-plump.gif" alt="" width="16" height="16">. The [Edit instance] page is displayed.</p></li><li><p>Modify the relevant items.</p><p>If [Backup storage path] is changed, [Backup management] is enabled. Select the required option:</p><p>Retain existing backup: Create a backup in [Backup storage path] and retain the existing backup in its original location.</p><p>Copy existing backup to new path: Copy the existing backup to [Backup storage path]. A new backup will not be created. The existing backup will be retained in its original location.</p><p>Move existing backup to new path: Move the existing backup to [Backup storage path]. A new backup will not be created.</p><p>Remove existing backup: Create a backup in [Backup storage path]. The existing backup will be removed.</p></li><li><p>Click <img src="insts04-03-wimg/e-save.gif" alt="" width="16" height="16"> to save your changes.</p></li></ol><div class="note"><p class="title">Note</p><div class="notebody"><ul><li><p>The [Edit instance] page is also displayed when the user selects 'Navigate to the "Edit instance" page' from the [Anomaly Error] dialog box. Refer to "Anomaly Detection and Resolution" in the Operation Guide for information on what takes place when an anomaly is detected.</p></li><li><p>When [Instance name] or [Instance port] is modified, the log_directory and core_directory parameters in postgresql.conf are updated. Also, the specified directories are created if they do not exist.</p><p>Refer to &ldquo;<a href="b1438-00-04-03-01.html#mID_0403_WebAdmin_import">4.3.1.4 Importing Instances</a>&rdquo; for information on the format of these directories.</p></li></ul></div></div></div></div><h4 id="mID_0403_WebAdmin_import">4.3.1.4 Importing Instances<a name="N36G"></a></h4><div class="body"><div class="textblock"><p>Instances can be created using WebAdmin, or via the command line using the initdb command. Instances created using the initdb command (command line instances) can be managed using WebAdmin, however, they must first be imported into WebAdmin.</p><p>This section explains how to import command line instances into WebAdmin.</p><ol><li><p>In the [Instances] tab, click <img src="insts04-03-wimg/e-import.gif" alt="" width="16" height="16">. The [Import instance] page is displayed.</p></li><li><p>Enter the information for the instance being imported. Refer to "<a href="b1438-00-04-03-01.html#mID_0402_instance_create">4.3.1.2 Creating an Instance</a>" for information on the items that need to be entered.</p></li><li><p>Click <img src="insts04-03-wimg/e-save.gif" alt="" width="16" height="16"> to import the instance.</p></li></ol><div class="note"><p class="title">Note</p><div class="notebody"><ul><li><p>Importing neither starts nor stops the instance.</p></li><li><p>A Windows service is automatically registered when an instance is imported into WebAdmin. If a Windows service was registered by the user prior to importing the instance, that service will not be deleted. After importing the instance into WebAdmin, it is recommended to discontinue the use of the user-created service.</p></li><li><p>The following restrictions apply to instance import:</p><ul><li><p>Any instance already managed by WebAdmin cannot be imported again.</p></li><li><p>The postgresql.conf file must be located in the same directory as [Data storage path].</p></li><li><p>Read/write permissions are required for [Data storage path].</p></li><li><p>The location specified in postgresql.conf for the following files must not have been changed:</p><ul><li><p>hba_file</p></li><li><p>ident_file</p></li></ul></li><li><p>If the instance is part of a cluster that is monitored by Mirroring Controller, WebAdmin will be unable to detect the Mirroring Controller settings.</p></li><li><p>Instances making use of Mirroring Controller functionality should not be imported, because subsequent operations on those instances may cause unexpected and undesirable side-effects.</p></li><li><p>It is not possible to import and operate an instance that uses a directory mounted by Network File System (NFS).</p></li><li><p>You must make the following changes to the parameters in postgresql.conf prior to importing the instance in WebAdmin.</p><table><col><col><tr><th valign="top"><p><span class="em">Parameter</span></p></th><th valign="top"><p><span class="em">Requirements</span></p></th></tr><tr><td align="left" valign="top"><p>port</p></td><td align="left" valign="top"><p>The port parameter should be uncommented.</p></td></tr></table><p>The log_directory and core_directory parameters in postgresql.conf are updated during import. Also, the specified directories are created if they do not exist.</p><p>The format of these directories is as follows:</p><p>log_directory: '<span class="i">userProfileFolder</span>\\<span class="i">localSettingsFolder</span>\\Fujitsu\\fsep_<span class="i">version</span>\\<span class="i">instanceNamePortNumber</span>\\log'</p><p>core_directory: '<span class="i">userProfileFolder</span>\\<span class="i">localSettingsFold</span><span class="i">er</span>\\Fujitsu\\fsep_<span class="i">version</span>\\<span class="i">instanceNamePortNumber</span>\\core'</p><p><span class="i">version</span>: product version_WA_architecture</p><p><span class="i">PortNumber</span>: port number specified when creating the instance</p><p>Examples:</p><p>log_directory: 'C:\\Users\\naomi\\AppData\\Local\\Fujitsu\\fsep_130_WA_64\\myinst27599\\log'</p><p>core_directory: 'C:\\Users\\naomi\\AppData\\Local\\Fujitsu\\fsep_130_WA_64\\myinst27599\\core'</p></li><li><p>When a standby instance is imported, a valid entry, using the IP address of the standby instance, must exist in the pg_hba.conf file of the master instance to allow the standby instance to connect to the master instance.</p></li><li><p>When a standby instance is imported, the value for "host" in the primary_conninfo parameter of postgresql.auto.conf should match the host name of the master instance.</p></li><li><p>When a standby instance is imported, you cannot specify "passfile" in the primary_conninfo parameter of postgresql.auto.conf. Be sure to specify "password".</p></li><li><p>Instances created by other operating systems cannot be imported.</p></li><li><p>If a FUJITSU Enterprise Postgres 10 or later instance is being imported while it is running, WebAdmin will encrypt the superuser password using SCRAM-SHA-256 authentication.</p></li></ul></li></ul></div></div></div></div><div class="header_footer"><div class="back_next"><a href="b1438-00-04-03-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1438-00-04-03-02.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>