<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>5.2 Uninstallation in Silent Mode</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Installation and Setup Guide for Server</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="b1438-00-05-00-00.html">Chapter&nbsp;5 Uninstallation</a> &gt; 5.2 Uninstallation in Silent Mode</div><div class="back_next"><a href="b1438-00-05-01-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1438-a-00-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="IDinsts06-wN12">5.2 Uninstallation in Silent Mode<a name="N46G"></a></h2><div class="body"><div class="textblock"><p>The uninstallation procedure is described below.</p><div class="note"><p class="title">Note</p><div class="notebody"><ul><li><p>Uninstalling removes all files and directories under the installation directory.If you have placed user files in the installation directory, you may need to save them before uninstalling.</p></li><li><p>If performing operation with WebAdmin, back up the following folder before uninstallation.<br>Instances will not be recognized by WebAdmin even if FUJITSU Enterprise Postgres is reinstalled after uninstallation.<br>If performing operation with WebAdmin after reinstalling FUJITSU Enterprise Postgres, replace the following backed up file after installation.</p><p>Follow the procedure below to perform the backup.</p><ol><li><p>Stop the WebAdmin server. Refer to "<a href="b1438-b-01-03.html">B.1.3 Stopping the Web Server Feature of WebAdmin</a>" for details.</p></li><li><p>Back up the following folder:</p><pre><span class="i">webAdminI</span><span class="i">nstallFolder</span>\data\fepwa</pre></li></ol><p>By replacing the above folder in the installation folder after installation, the instance will be recognized by WebAdmin, and the recognized instance will be set to automatically start and stop.<br>To disable the automatic start and stop setting for an instance, select the service for the applicable instance in the Windows services window, and in [Startup Type], select [Manual].</p></li><li><p>If using database multiplexing mode, refer to "Uninstalling in Database Multiplexing Mode" in the FUJITSU Enterprise Postgres Cluster Operation Guide (Database Multiplexing) before performing the uninstallation.</p></li></ul></div></div><div class="ref"><p class="title">See</p><div class="refbody"><ul><li><p>Refer to the Installation and Setup Guide for Client when uninstalling the FUJITSU Enterprise Postgres client feature.</p></li><li><p>Refer to the FUJITSU Enterprise Postgres product website for information on uninstallation in silent mode, such as the error messages.</p></li></ul></div></div><p></p></div><p class="subhead_1" id="IDinsts06-wN13"><span class="em">1</span><span class="em">. Stop applications and program</span><span class="em">s</span></p><div class="textblock"><p>Before starting the uninstallation, stop the following:</p><ul><li><p>Applications that use the product</p></li><li><p>pgAdmin</p></li></ul></div><p class="subhead_1" id="IDinsts06-wN14"><span class="em">2</span><span class="em">. Stop all instances</span></p><div class="textblock"><p>Stop all instances that are using the product to be uninstalled.</p><dl><dt class="em">When an instance was created with WebAdmin</dt><dd><p>In the [Instances] tab, select the instance to stop and click <img src="insts06-wimg/e-stop.gif" alt="" width="16" height="16">.</p></dd></dl><dl><dt class="em">When an instance was created with the initdb command</dt><dd><p>Use the following procedure to stop a service:</p><ol class="alpha"><li><p>Display the [Services] window. </p><p>In Windows, select [Administrative Tools], and then click [Services].</p></li><li><p>Stop the service</p><p>Select the instance name that you wish to stop from the services list, and click [Stop Service]. If you stop a service while applications and commands are running, FUJITSU Enterprise Postgres will force those applications and commands to close and will stop normally.</p></li></ol><p>You can also stop a service by specifying the service name in the net stop command or sc stop command.</p></dd></dl></div><p class="subhead_1" id="IDinsts06-wN15"><span class="em">3</span><span class="em">. Stop WebAdmin</span></p><div class="textblock"><p>If you are using WebAdmin, stop WebAdmin.</p><p>Refer to "<a href="b1438-b-01-03.html">B.1.3 Stopping the Web Server Feature of WebAdmin</a>" for details.</p></div><p class="subhead_1" id="IDinsts06-wN16"><span class="em">4</span><span class="em">. Unregister Windows services</span></p><div class="textblock"><p>Perform this step if the instance was created with the initdb command.</p><p>Unregister the instance registered in Windows services.</p><p>Use the unregister mode of the pg_ctl command to specify the registered service name and unregister the instance from Windows services.</p><dl><dt class="em">Example</dt><dd><p>The following is an example showing execution of this command for the registered service name "inst1".</p><pre class="border">&gt; pg_ctl unregister -N "inst1"</pre></dd></dl><div class="note"><p class="title">Note</p><div class="notebody"><p>You should unregister services before uninstalling FUJITSU Enterprise Postgres. If you uninstall FUJITSU Enterprise Postgres while services are running, several files will remain after the uninstallation.</p><p>If you have carried out the uninstallation without unregistering services beforehand, use the server command sc delete to unregister the services.</p><p>This command must be executed by an instance administrator user with administrator privileges. Execute the command from the [Administrator: Command Prompt] window. Right-click [Command Prompt], and then select [Run as administrator] from the menu to display the [Administrator: Command Prompt] window.</p></div></div></div><p class="subhead_1" id="IDinsts06-wN17"><span class="em">5</span><span class="em">. Delete registrations related to the event log</span></p><div class="textblock"><p>If you are outputting to the event log, a DLL registration mentioned in "<a href="b1438-00-04-02-07.html">4.2.5 Preparing for Output to the Event Log</a>" has been performed.</p><p>To prevent unnecessary issues from occurring, you should delete this registration. Refer to "Server Setup and Operation", "Registering Event Log on Windows" in the PostgreSQL Documentation for details.</p><p>The following is an example showing deletion of the DLL registration for a 64-bit product under the default event source name.</p><pre class="border">&gt; regsvr32 /u "c:\Program Files\Fujitsu\fsepv&lt;<span class="i">x</span>&gt;server64\lib\pgevent.dll"</pre><dl><dt class="em">If using multiple instances</dt><dd><p>DLL registration is performed so that you can output messages corresponding to the event source name assigned by the user, allowing you to identify messages output to the event log by instance.</p><p>Since it is necessary to delete the DLL registration for each instance, delete the DLL registration by event source name.</p><p>The following is an example showing deletion of the DLL of a 64-bit product registered under the event source name "Enterprise Postgres inst1".</p><pre class="border">&gt; regsvr32 /u /i:"Enterprise Postgres inst1" "c:\Program Files\Fujitsu\fsepv&lt;<span class="i">x</span>&gt;server64\lib\pgevent.dll"</pre><p>Note that this step is not required if the instance was created with WebAdmin.</p></dd></dl><dl><dt class="em">If installing multiple versions</dt><dd><p>If the instances you created using this package have been set to output error logs to the event log, use the DLL path name that you took note of previously as explained in "<a href="b1438-00-04-02-07.html">4.2.5 Preparing for Output to the Event Log</a>" to reregister the default event source name.</p></dd></dl><div class="note"><p class="title">Note</p><div class="notebody"><p>Ensure to delete DLLs before the uninstallation. If you perform the uninstallation without doing so, you may not be able to delete the DLLs at a later time.</p></div></div></div><p class="subhead_1" id="IDinsts06-wN18"><span class="em">6. Start the command prompt</span></p><div class="textblock"><p>In Windows, right-click [Command Prompt] and then select [Run as administrator].</p></div><p class="subhead_1" id="IDinsts06-wN19"><span class="em">7</span><span class="em">. Run the uninstaller</span><a name="N47G"></a><span class="em"></span></p><div class="textblock"><p>Execute the command below.</p><p>The installation folder may remain after uninstallation. If it is not required, delete it.</p><dl><dt class="em">Example</dt><dd><pre class="border"><span class="i">X</span>:&gt; <span class="i">installFolder</span>\suninst.bat</pre><p><span class="i">X</span>: Drive on which the product is installed</p></dd></dl></div></div><div class="header_footer"><div class="back_next"><a href="b1438-00-05-01-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="b1438-a-00-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>