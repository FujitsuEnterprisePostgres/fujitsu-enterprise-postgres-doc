<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>1.14.1 Memory Usage Reduction Using Global Meta Cache</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;General Description</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2673-00-01-00-00.html">Chapter&nbsp;1 FUJITSU Enterprise Postgres Basics</a> &gt; <a href="j2673-00-01-14-00.html">1.14 Memory Usage Reduce with Meta cache Reduction and Limit</a> &gt; 1.14.1 Memory Usage Reduction Using Global Meta Cache</div><div class="back_next"><a href="j2673-00-01-14-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2673-00-01-14-02.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="IDguide01N24">1.14.1 Memory Usage Reduction Using Global Meta Cache<a name="N16G"></a></h3><div class="body"><div class="textblock"><p>The Global Meta Cache feature cache the meta cache in shared memory. The meta cache on shared memory is called the Global Meta Cache (GMC).</p><p>Without this feature, the meta cache was cached in per-process memory. Therefore, there was a problem increase in memory usage in environments with large databases and large numbers of connections. The Global Meta Cache feature enables sharing of meta caches on shared memory, thereby reducing overall system memory usage.</p><div class="note"><p class="title">Note</p><div class="notebody"><p>This feature is available only in the Advanced Edition.</p></div></div><p></p></div><p class="subhead_1" id="IDguide01N25"><span class="em">Meta</span><span class="em"> </span><span class="em">cache</span></p><div class="textblock"><p>Processing a query involves parsing the query, creating the plan, executing the plan, and so on. PostgreSQL process accesses the system catalog to perform these steps. Once accessed, the system catalog tuples are cached in per-process memory. The direct definition is one tuple of system catalogs. Each process performs faster query processing by searching the meta cache instead of searching for the required tuples in the system catalog each time.</p><p>The meta cache usage increases in proportion to the number of tables and columns accessed. It is cached on a per-process basis, so the system's overall meta cache usage increases in proportion to the number of connections.</p></div><p class="subhead_1" id="IDguide01N26"><span class="em">Architecture of Global Meta Cache </span><span class="em">f</span><span class="em">eature</span></p><div class="textblock"><p>Describes the architecture of the Global Meta Cache feature.</p><p><img src="guide01img/e-gmc-outline.gif" alt="" width="867" height="418"></p><p>When the GMC feature is on, the per-process meta cache is cached in the GMC area on shared memory. Reference to the GMC area and process-specific work information is cached in the memory of each process. PostgreSQL process searches the meta cache for each process and accesses the GMC based on the reference information. If there is no reference information in the process's memory, it searches the GMC area. If the GMC area also does not have a corresponding meta cache, it accesses the system catalog to create meta cache.</p><p>Also, sharing the meta cache does not cause any loss of data consistency. If the system catalog or table definition changes while a transaction is running, the cache deletion or creation does not affect outside of the process running the transaction. After the transaction commits, the GMC area cache is deleted or created. If other transactions are referencing the cache when GMC is tried to be deleted, the deletion is deferred until there are no more references. After a commit, a new transaction sees the new cache instead of the old one.</p><div class="ref"><p class="title">See</p><div class="refbody"><p>Global Meta Cache feature is disabled by default. Refer to "Global Meta Cache" in the Operation Guide for information how to decide whether introduce it or not and usage.</p></div></div></div></div><div class="header_footer"><div class="back_next"><a href="j2673-00-01-14-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2673-00-01-14-02.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>