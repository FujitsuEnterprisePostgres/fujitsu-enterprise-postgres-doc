<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>1.11 Increased Aggregation Performance Using the In-memory Feature</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;General Description</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2673-00-01-00-00.html">Chapter&nbsp;1 FUJITSU Enterprise Postgres Basics</a> &gt; 1.11 Increased Aggregation Performance Using the In-memory Feature</div><div class="back_next"><a href="j2673-00-01-10-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2673-00-01-12-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="IDguide01N13">1.11 Increased Aggregation Performance Using the In-memory Feature</h2><div class="body"><div class="textblock"><p>FUJITSU Enterprise Postgres provides the in-memory feature, which uses columnar index and memory-resident data. This reduces disk I/Os and enhances aggregation performance.</p><div class="note"><p class="title">Note</p><div class="notebody"><p>This feature can only be used in Advanced Edition.</p></div></div><p></p></div><p class="subhead_1" id="IDguide01N14"><span class="em">Columnar </span><span class="em">index</span><a name="N12G"></a><span class="em"></span></p><div class="textblock"><p>Many aggregation processes may require a large portion of data in a particular column. However, traditional row data structure reads unnecessary columns, resulting in inefficient use of memory and CPU cache, and slower processing. FUJITSU Enterprise Postgres provides a type of columnar index, VCI (Vertical Clustered Index). This addresses the above issues, and enhances aggregation performance.</p><p>VCI provides the following benefits:</p><ul><li><p>Minimizes impact on existing jobs, and can perform aggregation using job data in real time.</p></li><li><p>Provided as an index, so no application modification is required.</p></li><li><p>Stores data also on the disk, so aggregation jobs can be quickly resumed using a VCI even if a failure occurs (when an instance is restarted).</p></li><li><p>If the amount of memory used by VCI exceeds the set value, aggregation can still continue by using VCI data on the disk.</p></li></ul><p>It also provides the features below:</p><ul><li><p>Disk compression<br>Compresses VCI data on the disk, minimizing required disk space. Even if disk access is required, read overhead is low. </p></li><li><p>Parallel scan<br>Enhances aggregation performance by distributing aggregation processes to multiple CPU cores and then processing them in parallel.</p></li></ul></div><p class="subhead_1" id="IDguide01N15"><span class="em">In-memory data</span><a name="N13G"></a><span class="em"></span></p><div class="textblock"><p>The following features keep VCI data in memory and minimize disk I/Os on each aggregation process.</p><ul><li><p>Preload feature<br>Ensures stable response times by loading VCI data to memory before an application scans it after the instance is restarted.</p></li><li><p>Stable buffer feature<br>Reduces disk I/Os by suppressing VCI data eviction from memory by other job data.</p></li></ul></div><p class="subhead_1" id="IDguide01N16"><span class="em">Purposes of this feature</span></p><div class="textblock"><p>This feature has a data structure that can efficiently use the newly added resources, and aims to enhance the existing aggregation processing in normal operations to be faster than parallel scan. It shares the same purpose of enhancing aggregation performance with the parallel scan feature that is provided separately, but differs in that it speeds up nightly batch processes by utilizing available resources.</p></div><p class="subhead_1" id="IDguide01N17"><span class="em">VCI architecture</span></p><div class="textblock"><p>This section briefly explains VCI architecture as it contains basic terminology required, for example, when setting parameters.</p><p>Update and aggregation operations to enable real time use of job data are described.</p><p>VCI has write buffer row-based WOS (Write Optimized Store) in addition to the columnar data structure ROS (Read Optimized Store). Converting each update into a columnar index has a significant impact on the update process response times. Therefore, data is synchronously reflected to the row-based WOS when updating. After a certain amount of data is stored in WOS, the ROS control daemon asynchronously converts it to ROS. As above, the entire VCI is synchronized with the target table column, minimizing update overhead.</p><p><img src="guide01img/e-imcs-1.gif" alt="" width="432" height="200"></p><p>The same scan results can be obtained without a VCI by using WOS in conjunction with ROS. More specifically, WOS is converted to Local ROS in local memory for each aggregation process, and aggregated with ROS.</p><p><img src="guide01img/e-imcs-2.gif" alt="" width="337" height="203"></p><div class="ref"><p class="title">See</p><div class="refbody"><p>Refer to "Installing and Operating the In-memory Feature" in the Operation Guide for information on installation and operation of VCI.</p><p>Refer to "Scan Using a Vertical Clustered Index (VCI)" in the Application Development Guide for information on scan using a VCI.</p></div></div></div></div><div class="header_footer"><div class="back_next"><a href="j2673-00-01-10-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2673-00-01-12-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>