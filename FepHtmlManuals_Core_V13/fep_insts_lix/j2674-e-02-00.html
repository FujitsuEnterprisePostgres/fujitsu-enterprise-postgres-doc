<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>E.2 Estimating Index Size Requirements</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Installation and Setup Guide for Server</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2674-e-00-00.html">Appendix&nbsp;E Estimating Database Disk Space Requirements</a> &gt; E.2 Estimating Index Size Requirements</div><div class="back_next"><a href="j2674-e-01-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2674-e-03-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="mID_0G02">E.2 Estimating Index Size Requirements</h2><div class="body"><div class="textblock"><p>This section provides the formulas for estimating index size requirements.</p><p>FUJITSU Enterprise Postgres provides six index types: B-tree, Hash, GiST, GIN, SP-GiST, and VCI. If you do not specify the index type in the CREATE INDEX statement, a B-tree index is generated.</p><p>The following describes how to estimate a B-tree index. Refer to "<a href="j2674-e-08-00.html">E.7 Estimating VCI Disk Space Requirements</a>" for information on how to estimate VCI.</p><p>A B-tree index is saved as a fixed-size page of 8 KB. The page types are meta, root, leaf, internal, deleted, and empty. Since leaf pages usually account for the highest proportion of space required, you need to calculate the requirements for these only.</p><table><caption id="mID_0G02_01">Table&nbsp;E.3 Estimation formula when the key data length is 512 bytes or less</caption><col><col><tr><th valign="top"><p><span class="em">Item</span></p></th><th valign="top"><p><span class="em">Estimation formula (bytes)</span></p></th></tr><tr><td align="left" valign="top"><p>(1) Entry length</p></td><td align="left" valign="top"><p>8 <span class="inline-note">*1</span> + key data length <span class="inline-note">*2</span></p><p>*1: Entry header</p><p>*2:  The key data length depends on its data type (refer to "<a href="j2674-e-03-00.html">E.3 Sizes of Data Types</a>" for details).</p><p>Because each entry is placed in boundaries of 8 bytes, you need to make an adjustment so that the length of the key data is a multiple of 8.<br>For example, if the calculated length is 28 bytes, add 4 to make the length 32 bytes.</p><ul><li><p>If the key data length exceeds 512 bytes, key data may be automatically compressed. In this case, use the estimation formula given in "<a href="j2674-e-02-00.html#mID_0G02_02">Table&nbsp;E.4 Estimation formula when the key data length exceeds 512 bytes</a>" to estimate the key data length.</p></li></ul></td></tr><tr><td align="left" valign="top"><p>(2) Page size requirement</p></td><td align="left" valign="top"><p>8192 <span class="inline-note">*1</span> &times; fillfactor <span class="inline-note">*2</span> - 24 <span class="inline-note">*3</span> - 16 <span class="inline-note">*4</span></p><p>*1: Page length (8192)</p><p>*2: Value of the fillfactor specified in the index definitions (if omitted, 90%)</p><p>In the case of indexes of primary key constraints and unique constraints,</p><p>the value of the fillfactor specified for each constraint in the table definitions (if omitted, 90%)</p><p>*3: Page header (24)</p><p>*4: Special data (16)</p><ul><li><p>The calculated (2) page size requirement will be rounded down to the nearest integer.</p></li></ul></td></tr><tr><td align="left" valign="top"><p>(3) Number of entries per page</p></td><td align="left" valign="top"><p>(2) Page size requirement / ((1) entry length + 4 <span class="inline-note">*1</span>)</p><p>*1: Pointer length</p><ul><li><p>Result of (3) number of entries per page will be rounded down to the nearest integer.</p></li></ul></td></tr><tr><td align="left" valign="top"><p>(4) Number of pages required for storing indexes</p></td><td align="left" valign="top"><p>Total number of records / (3) number of entries per page</p><ul><li><p>Result of (4) number of pages required for storing indexes will be rounded up to the nearest integer.</p></li></ul></td></tr><tr><td align="left" valign="top"><p>(5) Space requirement</p></td><td align="left" valign="top"><p>(4) Number of pages required for storing indexes x 8192 <span class="inline-note">*1</span> / usage rate <span class="inline-note">*2</span></p><p>*1: Page length</p><p>*2: Specify 0.7 or lower.</p></td></tr></table><table><caption id="mID_0G02_02">Table&nbsp;E.4 Estimation formula when the key data length exceeds 512 bytes</caption><col><col><tr><th valign="top"><p><span class="em">Item</span></p></th><th valign="top"><p><span class="em">Estimation formula (bytes)</span></p></th></tr><tr><td align="left" valign="top"><p>(5) Space requirement</p></td><td align="left" valign="top"><p>Total number of records x key data length x compression ratio <span class="inline-note">*1</span> / usage rate <span class="inline-note">*2</span></p><p>*1: The compression ratio depends on the data value, so specify 1.</p><p>*2: Specify 0.7 or lower as the usage rate.</p></td></tr></table><p></p></div></div><div class="header_footer"><div class="back_next"><a href="j2674-e-01-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2674-e-03-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>