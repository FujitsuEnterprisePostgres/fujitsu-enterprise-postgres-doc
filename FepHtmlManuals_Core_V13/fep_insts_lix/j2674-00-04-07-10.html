<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>4.7.10 Build with PGXS</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Installation and Setup Guide for Server</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2674-00-04-00-00.html">Chapter&nbsp;4 Setup</a> &gt; <a href="j2674-00-04-07-00.html">4.7 Setting Up and Removing OSS</a> &gt; 4.7.10 Build with PGXS</div><div class="back_next"><a href="j2674-00-04-07-09.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2674-00-04-08-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="mID_pgxs">4.7.10 Build with PGXS</h3><div class="body"><div class="textblock"><p>Many PostgreSQL extensions are built using a build base for extensions called PGXS. Building with PGXS also generates files related to llvm. Depending on which version of llvm you are using, follow these steps:.</p><p></p></div></div><h4 id="IDinsts04-07-ossN28">4.7.10.1 Using the Default Version of llvm</h4><div class="body"><div class="textblock"><p>The default version of llvm is described in "<a href="j2674-00-02-01-00.html">2.1 Required Operating System</a>". If you want to use the default version of llvm, use the OSS documentation to build and install OSS.</p></div></div><h4 id="IDinsts04-07-ossN29">4.7.10.2 Using a Non-Default Version of llvm</h4><div class="body"><div class="textblock"><ol><li><p>As superuser, copy the Makefile.global corresponding to the version of llvm you want to use.  The following is an example of using version 9 of llvm. Makefile.global is overwritten when an emergency fix is applied or removed from Fujitsu Enterpise Postgres, this procedure should be performed each time a build is performed.</p><pre class="border">$ su -Password:******# cp /opt/fsepv&lt;x&gt;server64/lib/pgxs/src/Makefile.global-vsn9 /opt/fsepv&lt;x&gt;server64/lib/pgxs/src/Makefile.global</pre></li><li><p>Follow the OSS documentation to build and install OSS.</p></li><li><p>As superuser, run the following command:. The following is an example of using version 9 of llvm:.</p><pre class="border">$ su -Password:******# mv /opt/fsepv&lt;x&gt;server64/lib/bitcode/&lt;OSSÂêç&gt;* /opt/fsepv&lt;x&gt;server64/lib/bitcode-vsn9/</pre></li></ol></div></div><h4 id="IDinsts04-07-ossN30">4.7.10.3 Without llvm</h4><div class="body"><div class="textblock"><p>If you do not use llvm, use the with _ llvm = no option when performing the build, as shown below. For other options, follow the OSS documentation.</p><pre class="border"># make USE_PGXS=1 with_llvm=no</pre></div></div><div class="header_footer"><div class="back_next"><a href="j2674-00-04-07-09.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2674-00-04-08-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>