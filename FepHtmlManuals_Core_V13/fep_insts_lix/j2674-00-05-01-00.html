<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>5.1 Uninstallation in Interactive Mode</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Installation and Setup Guide for Server</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2674-00-05-00-00.html">Chapter&nbsp;5 Uninstallation</a> &gt; 5.1 Uninstallation in Interactive Mode</div><div class="back_next"><a href="j2674-00-05-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2674-00-05-02-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="IDinsts06-slN1">5.1 Uninstallation in Interactive Mode<a name="N45G"></a></h2><div class="body"><div class="textblock"><p>Uninstall according to the following procedure:</p><p>Note that "<span class="i">x</span> SP<span class="i">z</span>" in sample windows indicates the version and level of products to uninstall and "&lt;<span class="i">x</span>&gt;" in paths indicates the product version.</p><div class="note"><p class="title">Note</p><div class="notebody"><ul><li><p>All files and directories in the installation directory are deleted during uninstallation. If user files have been placed in the installation directory, back them up before uninstallation if necessary.</p></li><li><p>On SLES 12, before uninstallation, ensure that Oracle JRE 8 is installed, and export the JAVA_HOME environment variable.</p><pre class="border">#export JAVA_HOME="<span class="i">oracleJre</span><span class="i">8InstallDir</span>"</pre></li><li><p>To reinstall FUJITSU Enterprise Postgres after it was uninstalled, and reuse an instance that was already created so that it can be managed from WebAdmin, back up the directory shown below in which the WebAdmin instance management information had been defined before uninstalling FUJITSU Enterprise Postgres, and then restore the backed up directory to its original location once FUJITSU Enterprise Postgres has been reinstalled.</p><p>Follow the procedure below to perform the backup.</p><ol><li><p>Stop the WebAdmin server. Refer to "<a href="j2674-b-01-03.html">B.1.3 Stopping the Web Server Feature of WebAdmin</a>" for details.</p></li><li><p>Back up the following directory:</p><pre><span class="i">webAdmin</span><span class="i">I</span><span class="i">nstallDir</span>/data/fepwa</pre></li></ol></li></ul></div></div><div class="tips"><p class="title">Information</p><div class="tipsbody"><p>If an error occurs while the product is being uninstalled, refer to "Uninstall (middleware) Messages" in the FUJITSU Enterprise Postgres product website, and take the required action.</p></div></div><p></p></div><p class="subhead_1" id="IDinsts06-slN2"><span class="em">1. Delete the operation information</span></p><div class="textblock"><p>If the FUJITSU Enterprise Postgres operation information has been registered in the operating system or another middleware product, for example, then it must be deleted. Cases in which deletion is required are as follows:</p><ul><li><p>For a cluster system using failover operation integrated with PRIMECLUSTER, stop the cluster applications and delete the cluster application resources and FUJITSU Enterprise Postgres resources. Refer to the Cluster Operation Guide (PRIMECLUSTER) and PRIMECLUSTER Installation and Administration Guide for details.</p></li><li><p>If you have set automatic start and stop of the instance, execute the following commands to disable the script and cancel registration.</p><pre>systemctl disable nameOfUnitFileThatPerformsAutomaticStartAndStoprm /usr/lib/systemd/system/nameOfUnitFileThatPerformsAutomaticStartAndStop</pre><dl><dt class="em">Example</dt><dd><pre class="border"># systemctl disable fsepsvoi_inst1.service# rm /usr/lib/systemd/system/fsepsvoi_inst1.service</pre></dd></dl></li></ul></div><p class="subhead_1" id="IDinsts06-slN3"><span class="em">2. Stop applications and program</span><span class="em">s</span></p><div class="textblock"><p>Before starting the uninstallation, stop the following:</p><ul><li><p>Applications that use the product</p></li><li><p>Instance</p><dl><dt class="em">Using WebAdmin</dt><dd><p>In the [Instances] tab, select the instance to stop and click <img src="insts06-slimg/e-stop.gif" alt="" width="16" height="16">.</p></dd></dl><dl><dt class="em">Using server commands</dt><dd><p>Execute the pg_ctl command in stop mode.</p><pre class="border">$ /opt/fsepv&lt;<span class="i">x</span>&gt;server64/bin/pg_ctl stop -D /database/inst1</pre></dd></dl></li><li><p>Web server feature of WebAdmin</p><p>Execute the WebAdminStop command to stop the Web server feature of WebAdmin.</p><dl><dt class="em">Example</dt><dd><p>If WebAdmin is installed in /opt/fsepv&lt;<span class="i">x</span>&gt;webadmin:</p><pre class="border"># cd /opt/fsepv&lt;<span class="i">x</span>&gt;webadmin/sbin# ./WebAdminStop</pre></dd></dl></li><li><p>Mirroring Controller</p><p>Execute the mc_ctl command with the stop mode option specified and stop the Mirroring Controller.</p><dl><dt class="em">Example</dt><dd><pre class="border">$ mc_ctl stop -M /mcdir/inst1</pre></dd></dl></li><li><p>pgBadger</p></li><li><p>Pgpool-II</p></li></ul></div><p class="subhead_1" id="IDinsts06-slN4"><span class="em">3</span><span class="em">. </span><span class="em">Change to the superuser</span></p><div class="textblock"><p>Run the following command to switch to the superuser on the system.</p><pre class="border">$ su -Password:******</pre></div><p class="subhead_1" id="IDinsts06-slN5"><span class="em">4. Start the Uninstall (middleware)</span></p><div class="textblock"><p>Execute the following command:</p><pre class="border"># /opt/FJSVcir/cimanager.sh -c</pre></div><p class="subhead_1" id="IDinsts06-slN6"><span class="em">5. Select the software</span></p><div class="textblock"><p>Type the number for the product to be uninstalled, and press Enter.</p></div><p class="subhead_1" id="IDinsts06-slN7"><span class="em">6. </span><span class="em">Start the uninstallation</span></p><div class="textblock"><p>To start the uninstallation, type "y" and press Enter.</p><p>To display the list of products again, type "b" and press Enter.</p></div><p class="subhead_1" id="IDinsts06-slN8"><span class="em">7. </span><span class="em">Finish the uninstallation</span></p><div class="textblock"><p>Upon successful completion, the window below is displayed.</p><p>The installation directory may remain after uninstallation. If it is not required, delete it.</p><pre class="border">Uninstalling...<span class="i">productName</span> is being uninstalled now.    100% ##############################The following products have been uninstalled successfully:    <span class="i">productName</span>        Uninstallation of "<span class="i">productName</span>" has completed successfully.Exiting Uninstaller.</pre></div></div><div class="header_footer"><div class="back_next"><a href="j2674-00-05-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2674-00-05-02-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>