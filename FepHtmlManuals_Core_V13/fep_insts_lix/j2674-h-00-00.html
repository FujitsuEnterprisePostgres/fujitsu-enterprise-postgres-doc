<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>Appendix&nbsp;H Configuring Kernel Parameters</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Installation and Setup Guide for Server</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist">Appendix&nbsp;H Configuring Kernel Parameters</div><div class="back_next"><a href="j2674-g-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2674-i-00-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h1 id="mID_0j" class="app">Appendix&nbsp;H Configuring Kernel Parameters</h1><div class="body"><div class="textblock"><p>Use the "System V IPC Parameters" table in "Managing Kernel Resources" in the PostgreSQL Documentation for the relationship between configuration parameters and kernel parameters, as well as calculation formulas.<br>Refer to the "Managing Kernel Resources" in the PostgreSQL Documentation to calculate shared memory usage.</p><p>For multiple instances, the kernel parameters should be evaluated for all instances. For example, in the case of the maximum number of shared memory segments for the entire system (SHMMNI), the total number of segments obtained by all instances should be added to the kernel parameters. In the case of the maximum number of semaphores for each process (SEMMSL), the largest of all sizes obtained by all instances should be compared to the current value prior to configuring the settings.</p><div class="note"><p class="title">Note</p><div class="notebody"><p>If there is insufficient shared memory due to miscalculation of SHMMAX, a message will be output indicating that the shmget system call failed at "errno=22 (EINVAL)". Review the calculation, and reconfigure.</p></div></div><p>The relationship between System V IPC parameters and kernel parameters in various operating systems is shown below. </p><table><col><col><col><tr><th valign="top"><p><span class="em">System</span></p></th><th valign="top"><p><span class="em">V IPC parameter</span></p></th><th valign="top"><p><span class="em">Kernel parameter action</span></p></th></tr><tr><td align="left" valign="top"><p>SHMMAX</p></td><td align="left" valign="top"><p>kernel.shmmax</p></td><td align="left" valign="top"><p>If <span class="i">current</span><span class="i">V</span><span class="i">alue</span> &lt; <span class="i">calculated</span><span class="i">V</span><span class="i">alue</span>, configure the calculated value</p></td></tr><tr><td align="left" valign="top"><p>SHMMIN</p></td><td align="left" valign="top"><p>No compatible parameter</p></td><td align="left" valign="top"></td></tr><tr><td align="left" valign="top"><p>SHMALL</p></td><td align="left" valign="top"><p>kernel.shmall</p></td><td align="left" valign="top"><p>Specify <span class="i">current</span><span class="i">V</span><span class="i">alue</span> + <span class="i">calculated</span><span class="i">V</span><span class="i">alue</span></p></td></tr><tr><td align="left" valign="top"><p>SHMSEG</p></td><td align="left" valign="top"><p>No compatible parameter</p></td><td align="left" valign="top"></td></tr><tr><td align="left" valign="top"><p>SHMMNI</p></td><td align="left" valign="top"><p>kernel.shmmni</p></td><td align="left" valign="top"><p>Specify <span class="i">current</span><span class="i">V</span><span class="i">alue</span> + <span class="i">calculated</span><span class="i">V</span><span class="i">alue</span></p></td></tr><tr><td align="left" valign="top"><p>SEMMNI</p></td><td align="left" valign="top"><p>Fourth parameter of kernel.sem</p></td><td align="left" valign="top"><p>Specify <span class="i">current</span><span class="i">V</span><span class="i">alue</span> + <span class="i">calculated</span><span class="i">V</span><span class="i">alue</span></p></td></tr><tr><td align="left" valign="top"><p>SEMMNS</p></td><td align="left" valign="top"><p>Second parameter of kernel.sem</p></td><td align="left" valign="top"><p>Specify <span class="i">current</span><span class="i">V</span><span class="i">alue</span> + <span class="i">calculated</span><span class="i">V</span><span class="i">alue</span></p></td></tr><tr><td align="left" valign="top"><p>SEMMSL</p></td><td align="left" valign="top"><p>First parameter of kernel.sem</p></td><td align="left" valign="top"><p>If <span class="i">current</span><span class="i">V</span><span class="i">alue</span> &lt; <span class="i">calculated</span><span class="i">V</span><span class="i">alue</span>, configure the calculated value</p></td></tr><tr><td align="left" valign="top"><p>SEMMAP</p></td><td align="left" valign="top"><p>No compatible parameter</p></td><td align="left" valign="top"></td></tr><tr><td align="left" valign="top"><p>SEMVMX</p></td><td align="left" valign="top"><p>No compatible parameter</p></td><td align="left" valign="top"></td></tr></table><p>Remark 1: kernel.shmall specifies the number of pages.<br>Remark 2: Specify all four parameters for kernel.sem. At this time, the value specified in the third parameter should be the same value as before configuration.</p><p></p></div></div><div class="header_footer"><div class="back_next"><a href="j2674-g-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2674-i-00-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>