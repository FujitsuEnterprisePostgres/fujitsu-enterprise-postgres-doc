<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>E.1 Estimating Table Size Requirements</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Installation and Setup Guide for Server</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2674-e-00-00.html">Appendix&nbsp;E Estimating Database Disk Space Requirements</a> &gt; E.1 Estimating Table Size Requirements</div><div class="back_next"><a href="j2674-e-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2674-e-02-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="mID_0G01">E.1 Estimating Table Size Requirements</h2><div class="body"><div class="textblock"><p>The following tables provide the formulas for estimating table size requirements.</p><table><caption id="mID_0G01_01">Table&nbsp;E.1 Estimation formula when the record length is 2032 bytes or less</caption><col><col><tr><th valign="top"><p><span class="em">Item</span></p></th><th valign="top"><p><span class="em">Estimation formula (bytes)</span></p></th></tr><tr><td align="left" valign="top"><p>(1) Record length</p></td><td align="left" valign="top"><p>27<span class="inline-note">*1</span> + NULL map + OID + column data</p><p>NULL map:  Number of columns / 8 <span class="inline-note">*2</span><br>OID: 4<br>Column data: Sum of column lengths</p><p>*1: Record header section</p><p>*2: Round the result up to the next integer.</p><ul><li><p>Because the column data is placed in boundaries of 8 bytes, you need to make an adjustment so that the sum of the record header section, NULL map and OID is a multiple of 8.<br>For example, if the calculated length is 27 + 1 / 8 (rounded up) + 0 = 28 bytes, add 4 to make the length 32 bytes.</p></li><li><p>Because the data of each column is placed in boundaries of the defined data type, take the boundary of each data type into account for the length of the column data.<br>For example, the length of the column data in the table below will not be the sum of the data types, which is 37 bytes, but will instead be 64 bytes following boundary adjustment.<br> Definition: create table tb1(c1 char(1), c2 long, c3 int, c4 box)<br> Estimation: CHAR type 1 byte + boundary adjustment of 7 bytes for LONG type 8 bytes + LONG type 8 bytes + INT type 4 bytes + boundary adjustment of 12 bytes for BOX type 32 bytes + BOX type 32 bytes = 64 bytes</p></li><li><p>Because each record is placed in boundaries of 8 bytes, you need to make an adjustment so that the length of the column data is a multiple of 8.</p></li><li><p>If the calculated record length exceeds 2,032 bytes, the variable length data in the record might be compressed automatically. If so, use the estimation formulas in "<a href="j2674-e-01-00.html#mID_0G01_02">Table&nbsp;E.2 Estimation formula when the record length exceeds 2032 bytes</a>" to estimate the table size.</p></li></ul></td></tr><tr><td align="left" valign="top"><p>(2) Page size requirement</p></td><td align="left" valign="top"><p>8192 <span class="inline-note">*1</span> &times; fillfactor <span class="inline-note">*2</span> - 24 <span class="inline-note">*3</span></p><p>*1: Page length (8192)</p><p>*2: Value of the fillfactor specified in the table definitions (if omitted, 100%)</p><p>*3: Page header (24)</p><ul><li><p>The calculated (2) page size requirement will be rounded down to the nearest integer.</p></li></ul></td></tr><tr><td align="left" valign="top"><p>(3) Number of records per page</p></td><td align="left" valign="top"><p>(2) Page size requirement / ((1) record length + 4 <span class="inline-note">*1</span>)</p><p>*1: Pointer length (4)</p><ul><li><p>The result will be rounded down to the nearest integer.</p></li></ul></td></tr><tr><td align="left" valign="top"><p>(4) Number of pages required for storing records</p></td><td align="left" valign="top"><p>Total number of records / (3) number of records per page</p><ul><li><p>The result will be rounded up to the next integer.</p></li></ul></td></tr><tr><td align="left" valign="top"><p>(5) Amount of space</p></td><td align="left" valign="top"><p>(4) Number of pages required for storing records x page length x safety factor <span class="inline-note">*1</span></p><p>*1: Specify 2.0 or higher.</p><ul><li><p>This is the safety factor assumed if vacuuming is performed for garbage collection in tables and indexes.</p></li></ul></td></tr></table><table><caption id="mID_0G01_02">Table&nbsp;E.2 Estimation formula when the record length exceeds 2032 bytes</caption><col><col><tr><th valign="top"><p><span class="em">Item</span></p></th><th valign="top"><p><span class="em">Estimation formula (bytes)</span></p></th></tr><tr><td align="left" valign="top"><p>(5) Amount of space</p></td><td align="left" valign="top"><p>Total number of records x (1) record length x safety factor <span class="inline-note">*1</span></p><p>*1: Specify 2.0 or higher.</p><ul><li><p>This is the safety factor assumed if vacuuming is performed for garbage collection in tables and indexes.</p></li></ul></td></tr></table><p></p></div></div><div class="header_footer"><div class="back_next"><a href="j2674-e-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2674-e-02-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>