<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>A.1 Parameters Set on the Primary Server</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Cluster Operation Guide(Database Multiplexing)</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2678-a-00-00.html">Appendix&nbsp;A Parameters</a> &gt; A.1 Parameters Set on the Primary Server</div><div class="back_next"><a href="j2678-a-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2678-a-02-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="mID_0b01">A.1 Parameters Set on the Primary Server<a name="N108G"></a></h2><div class="body"><div class="textblock"><p>The content for the parameters set in the postgresql.conf file of the primary server is shown in the table below.</p><table><caption>Table&nbsp;A.1 postgresql.conf file<a name="N109G"></a></caption><col><col><col><tr><th valign="top"><p>Parameter</p></th><th valign="top"><p>Value set</p></th><th valign="top"><p>Explanation</p></th></tr><tr><td align="left" valign="top"><p>wal_level</p></td><td align="left" valign="top"><p>replica or logical</p></td><td align="left" valign="top"><p>Specify the output level for the transaction log.</p><p>Specify "logical" when logical decoding is also to be used.</p></td></tr><tr><td align="left" valign="top"><p>max_wal_senders</p></td><td align="left" valign="top"><p>2 or more</p></td><td align="left" valign="top"><p>Specify "2" when building a Mirroring Controller cluster system.</p><p>When additionally connecting asynchronous standby servers to the cluster system, add the number of simultaneous connections from these standby servers.</p></td></tr><tr><td align="left" valign="top"><p>synchronous_standby_names</p></td><td align="left" valign="top"><p>'<span class="i">standbyServerName</span>'</p></td><td align="left" valign="top"><p>Use single quotation marks (') to enclose the name that will identify the standby server. Any name can be specified.</p><p>Do not change this parameter while Mirroring Controller is running.</p><p>Do not specify multiple names to this parameter as the Mirroring Controller can manage only one standby server.</p></td></tr><tr><td align="left" valign="top"><p>hot_standby</p></td><td align="left" valign="top"><p>on</p></td><td align="left" valign="top"><p>Specify whether queries can be run on the standby server.</p><p>Specify "on".</p></td></tr><tr><td align="left" valign="top"><p>wal_keep_size</p></td><td align="left" valign="top"><p>WAL save size (megabytes)</p></td><td align="left" valign="top"><p>If a delay exceeding the value set in this parameter occurs, the WAL segment required later by the primary server may be deleted.</p><p>Additionally, if you stop a standby server (for maintenance, for example), consider the stop time and set a value that will not cause the WAL segment to be deleted.</p><p>Refer to "Estimating Transaction Log Space Requirements" in the Installation and Setup Guide for Server for information on estimating the WAL save size.</p></td></tr><tr><td align="left" valign="top"><p>wal_log_hints</p></td><td align="left" valign="top"><p>on</p></td><td align="left" valign="top"><p>When using the pg_rewind command to recover a standby server, specify this parameter or enable checksums when executing the initdb command.</p></td></tr><tr><td align="left" valign="top"><p>wal_sender_timeout</p></td><td align="left" valign="top"><p>Timeout (milliseconds)</p></td><td align="left" valign="top"><p>Specify the time period after which it is determined that the receiver process (walreceiver) of the transaction log is in an abnormal state on the primary server.</p><p>The specified value must be larger than the value set for the wal_receiver_status_interval parameter set in the postgresql.conf file of the standby server.</p><p>By aligning this value with the value for the database process heartbeat monitoring time, you can unify the time after which it is determined that an error has occurred.</p></td></tr><tr><td align="left" valign="top"><p>wal_receiver_timeout</p></td><td align="left" valign="top"><p>Timeout (milliseconds)</p></td><td align="left" valign="top"><p>Specify the time period after which it is determined that an error has occurred when the transaction log was received on the standby server.</p><p>By aligning this value with the value for the database process heartbeat monitoring time, you can unify the time after which it is determined that an error has occurred.</p></td></tr><tr><td align="left" valign="top"><p>archive_mode</p></td><td align="left" valign="top"><p>on</p></td><td align="left" valign="top"><p>Specify the archive log mode.</p></td></tr><tr><td align="left" valign="top"><p>archive_command</p></td><td align="left" valign="top"><p>'<span class="i">installDir</span>/bin/pgx_walcopy.cmd "%p" "<span class="i">backupDataStorageDestinationDirectory</span>/archived_wal/%f"'</p></td><td align="left" valign="top"><p>Specify the command and storage destination to save the transaction log.</p></td></tr><tr><td align="left" valign="top"><p>backup_destination</p></td><td align="left" valign="top"><p>Backup data storage destination directory</p></td><td align="left" valign="top"><p>Specify the name of directory where to store the backup data.</p><p>Set the permissions so that only the instance administrator user can access the specified directory.</p><p>Specify the same full path on all servers, so that the backup data of other servers can be used to perform recovery.</p></td></tr><tr><td align="left" valign="top"><p>listen_addresses</p></td><td align="left" valign="top"><p>Primary server IP address, host name, or "*"</p></td><td align="left" valign="top"><p>Specify the IP address or host name of the primary server. Specify the IP address or corresponding host name that will be used to connect to the log transfer network.</p><p>The content specified is also used to allow connections from client applications.</p><p>To receive the connection and the transaction log from any client or standby server, specify "*".</p><p>Refer to "Connections and Authentication" in the PostgreSQL Documentation for details.</p></td></tr><tr><td align="left" valign="top"><p>max_connections</p></td><td align="left" valign="top"><p>Number of simultaneous client connections to the instance + superuser_reserved_connections value</p></td><td align="left" valign="top"><p>The value specified is also used to restrict the number of connections from client applications and the number of connections for the management of instances.</p><p>Refer to "When an Instance was Created with the initdb Command" in the Installation and Setup Guide for Server, and "Connections and Authentication" in the PostgreSQL Documentation, for details.</p></td></tr><tr><td align="left" valign="top"><p>superuser_reserved_connections</p></td><td align="left" valign="top"><p>Add the number of simultaneous executions of mc_ctl status <span class="inline-note">*1</span> + 2</p></td><td align="left" valign="top"><p>Specify the number of connections reserved for connections from database superusers.</p><p>Add the number of connections from Mirroring Controller processes. Also reflect the added value in the max_connections parameter.</p></td></tr><tr><td align="left" valign="top"><p>restart_after_crash</p></td><td align="left" valign="top"><p>off</p></td><td align="left" valign="top"><p>If "on" is specified, or the default value is used for this parameter, behavior equivalent to restarting FUJITSU Enterprise Postgres, including crash recovery, will be performed when some server processes end abnormally.</p><p>However, when database multiplexing monitoring is used, a failover will occur after an error is detected when some server processes end abnormally, and the restart of those server processes is forcibly stopped. Specify "off" to prevent behavior such as this from occurring for no apparent reason.</p></td></tr><tr><td align="left" valign="top"><p>synchronous_commit</p></td><td align="left" valign="top"><p>on or remote_apply</p></td><td align="left" valign="top"><p>Specify up to what position WAL send is to be performed before transaction commit processing returns a normal termination response to a client.</p><p>The recommended value is "on" or "remote_apply" to prevent data loss caused by operating system or server down immediately after a switch or switch.</p></td></tr><tr><td align="left" valign="top"><p>recovery_target_timeline</p></td><td align="left" valign="top"><p>latest</p></td><td align="left" valign="top"><p>Specify "latest" so that the new standby server (original primary server) will follow the new primary server when a switch occurs.</p><p>This parameter is required when the original primary server is incorporated as a new standby server after the primary server is switched.</p></td></tr></table><p class="supple">*1: Number of simultaneous executions of the mc_ctl command in the status mode.</p><p></p></div></div><div class="header_footer"><div class="back_next"><a href="j2678-a-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2678-a-02-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2016-2021 FUJITSU LIMITED</div></div></body></html>