<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>A.3 Network Configuration File</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Cluster Operation Guide(Database Multiplexing)</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2678-a-00-00.html">Appendix&nbsp;A Parameters</a> &gt; A.3 Network Configuration File</div><div class="back_next"><a href="j2678-a-02-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2678-a-04-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="mID_0b03">A.3 Network Configuration File<a name="N115G"></a></h2><div class="body"><div class="textblock"><p>This section explains the network configuration file (network.conf) to be defined individually for the database servers and the arbitration server. Define the same content on the primary server and standby server.</p><p>For database multiplexing mode, define the network configuration for the following in network.conf.</p><ul><li><p>Integration between Mirroring Controller processes</p></li><li><p>Integration between a Mirroring Controller process and the Mirroring Controller arbitration process</p></li></ul><p></p></div><p class="subhead_1" id="IDclust0bN1"><span class="em">Items to be defined in network.conf</span></p><div class="textblock"><pre>Format:</pre><pre class="border"><span class="i">serverIdentifier</span> <span class="i">hostName</span>[,<span class="i">hostName</span>] <span class="i">portNum</span>[,<span class="i">portNum</span>] [<span class="i">serverType</span>]Or, <span class="i">serverIdentifier</span> <span class="i">ipAddr</span>[,<span class="i">ipAddr</span>] <span class="i">portNum</span>[,<span class="i">portNum</span>] [<span class="i">server</span><span class="i">Type</span>]</pre><p>Specify the server identifier, IP address or host name, port number, and server type, using a space as the delimiter.</p><p>The items are explained in the table below.</p><table><caption>Table&nbsp;A.3 network.conf file<a name="N116G"></a></caption><col><col><tr><th valign="top"><p>Item</p></th><th valign="top"><p>Description</p></th></tr><tr><td align="left" valign="top"><p><span class="i">serverIdentifier</span></p></td><td align="left" valign="top"><p>Specify any identifier for the server. The maximum length is 64 bytes. Use ASCII characters excluding spaces and number signs (#) to specify this parameter.</p></td></tr><tr><td align="left" valign="top"><p><span class="i">ipAddrOrH</span><span class="i">ostName</span></p></td><td align="left" valign="top"><p>Specify the IP address or its corresponding host name that will connect to the admin network that performs communication between the database servers, and to the arbitration network that performs communication between a database server and the arbitration server.</p><p>When specifying two IP addresses or host names delimited by a comma, do not insert a space after the comma.</p><p>Use ASCII characters excluding spaces to specify the host name.</p></td></tr><tr><td align="left" valign="top"><p><span class="i">portNum</span></p></td><td align="left" valign="top"><p>A port number cannot be specified if it exceeds the range 0 to 65535. Ensure that the port number does not conflict with other software. Do not specify an ephemeral port that may temporarily be assigned by another program. Note that the value specified in this parameter must also be set in the services file.</p><p>When specifying two port numbers delimited by a comma, do not insert a space after the comma.</p></td></tr><tr><td align="left" valign="top"><p><span class="i">serverType</span></p></td><td align="left" valign="top"><p>Specify "server" for a database server ("server" can be omitted), or "arbiter" for the arbitration server.</p></td></tr></table></div><p class="subhead_1" id="IDclust0bN2"><span class="em">Content to be defined on the database servers</span></p><div class="textblock"><p>This section explains the network.conf content to be defined on the database servers.</p><p>The content to be defined depends on the operation settings at the time a heartbeat abnormality is detected.</p><dl><dt class="em">When automatic degradation by the arbitration server is selected</dt><dd><ul><li><p>Specify definitions related to the admin network and arbitration network.</p></li><li><p>Specify the IP address or host name and port number according to the server type (database server or arbitration server) as shown in the table below.</p><table><col><col><col><col><col><tr><th rowspan="2" valign="top"><p>Server type</p></th><th colspan="2" valign="top"><p>IP address or host name</p></th><th colspan="2" valign="top"><p>Port number</p></th></tr><tr><th valign="top"><p>First</p></th><th valign="top"><p>Second</p></th><th valign="top"><p>First</p></th><th valign="top"><p>Second</p></th></tr><tr><td align="left" valign="top"><p>server</p></td><td align="left" valign="top"><p>IP address or host name used as the admin network</p></td><td align="left" valign="top"><p>IP address or host name used as the arbitration network <span class="inline-note">*1</span></p></td><td align="left" valign="top"><p>Port number used as the admin network</p></td><td align="left" valign="top"><p>Port number used as the arbitration network <span class="inline-note">*1</span></p></td></tr><tr><td align="left" valign="top"><p>arbiter</p></td><td align="left" valign="top"><p>IP address or host name of the arbitration server</p><p>Specify the same value as that specified in the my_address parameter of arbitration.conf on the arbitration server.</p></td><td align="left" valign="top"><p>Not required</p></td><td align="left" valign="top"><p>Port number on the arbitration server</p><p>Specify the same value as that specified in the port parameter of arbitration.conf on the arbitration server.</p></td><td align="left" valign="top"><p>Not required</p></td></tr></table><p class="supple">*1: This value can be omitted from definitions not related to the local server. If it is omitted, network.conf must be created on both the primary server and standby server.</p><br></li></ul><dl><dt class="em">Example)</dt><dd><pre>IPv4</pre><pre class="border">server1 192.0.2.100,192.0.3.100 27540,27541 serverserver2 192.0.2.110,192.0.3.110 27540,27541 serverarbiter 192.0.3.120 27541 arbiter</pre><pre>IPv6</pre><pre class="border">server1 2001:258:8404:1217:250:56ff:fea7:559f,2001:258:8404:1217:250:56ff:fea8:559f 27540,27541 serverserver2 2001:258:8404:1217:250:56ff:fea7:55a0,2001:258:8404:1217:250:56ff:fea8:55a0 27540,27541 serverarbiter 2001:258:8404:1217:250:56ff:fea8:55a0 27541 arbiter</pre><br></dd></dl></dd></dl><dl><dt class="em">When operation other than automatic degradation by the arbitration server is selected</dt><dd><ul><li><p>Specify definitions related to the admin network.</p></li><li><p>Define the same content on the primary server and standby server.</p></li><li><p>Define lines for database servers only.</p></li><li><p>Specify only one IP address or host name and port number.</p><table><col><col><col><col><tr><th colspan="2" valign="top"><p>IP address or host name</p></th><th colspan="2" valign="top"><p>Port number</p></th></tr><tr><th valign="top"><p>First</p></th><th valign="top"><p>Second</p></th><th valign="top"><p>First</p></th><th valign="top"><p>Second</p></th></tr><tr><td align="left" valign="top"><p>IP address or host name to be used as the admin network</p></td><td align="left" valign="top"><p>Not required</p></td><td align="left" valign="top"><p>Port number used as the admin network</p></td><td align="left" valign="top"><p>Not required</p></td></tr></table><br></li></ul><dl><dt class="em">Example)</dt><dd><p>The literal space represents a space.</p><pre>IPv4</pre><pre class="border">server1 192.0.2.100 27540server2 192.0.2.110 27540</pre><pre>IPv6</pre><pre class="border">server1 2001:258:8404:1217:250:56ff:fea7:559f 27540server2 2001:258:8404:1217:250:56ff:fea7:55a0 27540</pre><br></dd></dl></dd></dl></div><p class="subhead_1" id="IDclust0bN3"><span class="em">Content to be defined on the arbitration server</span></p><div class="textblock"><p>This section explains the network.conf content to be defined on the arbitration server.</p><ul><li><p>Specify definitions related to the arbitration network.</p></li><li><p>Define lines for database servers only.</p></li><li><p>For the IP address or host name, specify the same value as the second IP address or host name specified in the database server line in network.conf of the database server.</p></li><li><p>For the port number, specify the same value as the second port number specified in the database server line in network.conf of the database server.</p><br></li></ul><dl><dt class="em">Example)</dt><dd><p>The literal space represents a space.</p><pre>IPv4</pre><pre class="border">server1 192.0.3.100 27541server2 192.0.3.110 27541</pre><pre>IPv6</pre><pre class="border">server1 2001:258:8404:1217:250:56ff:fea8:559f 27541server2 2001:258:8404:1217:250:56ff:fea8:55a0 27541</pre><br></dd></dl></div><p class="subhead_1" id="IDclust0bN4"><span class="em">Relationship between network-related definitions</span></p><div class="textblock"><p>Refer to the diagram below for the relationship between the host names and IP addresses or port numbers specified in the network configuration file (network.conf) and arbitration configuration file (arbitration.conf).</p><p><img src="clust0bimg/e-networkconf.gif" alt="" width="951" height="613"></p></div></div><div class="header_footer"><div class="back_next"><a href="j2678-a-02-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2678-a-04-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2016-2021 FUJITSU LIMITED</div></div></body></html>