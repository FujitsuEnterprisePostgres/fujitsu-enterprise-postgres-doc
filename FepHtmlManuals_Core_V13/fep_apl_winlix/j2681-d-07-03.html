<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>D.7.3 SQLSTATE vs. SQLCODE</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Application Development Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2681-d-00-00.html">Appendix&nbsp;D ECOBPG - Embedded SQL in COBOL</a> &gt; <a href="j2681-d-07-00.html">D.7 Error Handling</a> &gt; D.7.3 SQLSTATE vs. SQLCODE</div><div class="back_next"><a href="j2681-d-07-02.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-d-08-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="mID_0e0703">D.7.3 SQLSTATE vs. SQLCODE</h3><div class="body"><div class="textblock"><p>The fields SQLSTATE and SQLCODE are two different schemes that provide error codes. Both are derived from the SQL standard, but SQLCODE has been marked deprecated in the SQL-92 edition of the standard and has been dropped in later editions. Therefore, new applications are strongly encouraged to use SQLSTATE.</p><p>SQLSTATE is a five-character array. The five characters contain digits or upper-case letters that represent codes of various error and warning conditions. SQLSTATE has a hierarchical scheme: the first two characters indicate the general class of the condition, the last three characters indicate a subclass of the general condition. A successful state is indicated by the code 00000. The SQLSTATE codes are for the most part defined in the SQL standard. The PostgreSQL server natively supports SQLSTATE error codes; therefore a high degree of consistency can be achieved by using this error code scheme throughout all applications.</p><div class="ref"><p class="title">See</p><div class="refbody"><p>Refer to "PostgreSQL Error Codes" in "Appendixes" in the PostgreSQL Documentation for further information.</p></div></div><p>SQLCODE, the deprecated error code scheme, is a simple integer. A value of 0 indicates success, a positive value indicates success with additional information, and a negative value indicates an error. The SQL standard only defines the positive value +100, which indicates that the last command returned or affected zero rows, and no specific negative values. Therefore, this scheme can only achieve poor portability and does not have a hierarchical code assignment. Historically, the embedded SQL processor for PostgreSQL has assigned some specific SQLCODE values for its use, which are listed below with their numeric value and their symbolic name. Remember that these are not portable to other SQL implementations. To simplify the porting of applications to the SQLSTATE scheme, the corresponding SQLSTATE is also listed. There is, however, no one-to-one or one-to-many mapping between the two schemes (indeed it is many-to-many), so you should consult the global SQLSTATE in each case.</p><div class="ref"><p class="title">See</p><div class="refbody"><p>Refer to "PostgreSQL Error Codes" in "Appendixes" in the PostgreSQL Documentation.</p></div></div><p>These are the assigned SQLCODE values:</p><dl><dt class="em">0</dt><dd><p>Indicates no error. (SQLSTATE 00000)</p></dd></dl><dl><dt class="em">100</dt><dd><p>This is a harmless condition indicating that the last command retrieved or processed zero rows, or that you are at the end of the cursor. (SQLSTATE 02000)</p><p>When processing a cursor in a loop, you could use this code as a way to detect when to abort the loop, like this:</p><pre class="border">PERFORM NO LIMIT    EXEC SQL FETCH ... END-EXEC    IF SQLCODE = 100 THEN        GO TO FETCH-END    END-IFEND-PERFORM.</pre><p>But WHENEVER NOT FOUND GOTO ... effectively does this internally, so there is usually no advantage in writing this out explicitly.</p></dd></dl><dl><dt class="em">-12</dt><dd><p>Indicates that your virtual memory is exhausted. The numeric value is defined as -ENOMEM. (SQLSTATE YE001)</p></dd></dl><dl><dt class="em">-200</dt><dd><p>Indicates the preprocessor has generated something that the library does not know about. Perhaps you are running incompatible versions of the preprocessor and the library. (SQLSTATE YE002)</p></dd></dl><dl><dt class="em">-201</dt><dd><p>This means that the command specified more host variables than the command expected. (SQLSTATE 07001 or 07002)</p></dd></dl><dl><dt class="em">-202</dt><dd><p>This means that the command specified fewer host variables than the command expected. (SQLSTATE 07001 or 07002)</p></dd></dl><dl><dt class="em">-203</dt><dd><p>This means a query has returned multiple rows but the statement was only prepared to store one result row (for example, because the specified variables are not arrays). (SQLSTATE 21000)</p></dd></dl><dl><dt class="em">-204</dt><dd><p>The host variable is of type signed int and the datum in the database is of a different type and contains a value that cannot be interpreted as a signed int. The library uses strtol() for this conversion. (SQLSTATE 42804)</p></dd></dl><dl><dt class="em">-205</dt><dd><p>The host variable is of type unsigned int and the datum in the database is of a different type and contains a value that cannot be interpreted as an unsigned int. The library uses strtoul() for this conversion. (SQLSTATE 42804)</p></dd></dl><dl><dt class="em">-206</dt><dd><p>The host variable is of type float and the datum in the database is of another type and contains a value that cannot be interpreted as a float. The library uses strtod() for this conversion. (SQLSTATE 42804)</p></dd></dl><dl><dt class="em">-207</dt><dd><p>The host variable is of type DECIMAL and the datum in the database is of another type and contains a value that cannot be interpreted as a DECIMAL or DISPLAY value. For the case of DISPLAY, this error happens if values in the database is too large for converting to DISPLAY value. (SQLSTATE 42804)</p></dd></dl><dl><dt class="em">-208</dt><dd><p>The host variable is of type interval and the datum in the database is of another type and contains a value that cannot be interpreted as an interval value. (SQLSTATE 42804)</p></dd></dl><dl><dt class="em">-209</dt><dd><p>The host variable is of type date and the datum in the database is of another type and contains a value that cannot be interpreted as a date value. (SQLSTATE 42804)</p></dd></dl><dl><dt class="em">-210</dt><dd><p>The host variable is of type timestamp and the datum in the database is of another type and contains a value that cannot be interpreted as a timestamp value. (SQLSTATE 42804)</p></dd></dl><dl><dt class="em">-211</dt><dd><p>This means the host variable is of type bool and the datum in the database is neither 't' nor 'f'. (SQLSTATE 42804)</p></dd></dl><dl><dt class="em">-212</dt><dd><p>The statement sent to the PostgreSQL server was empty. (This cannot normally happen in an embedded SQL program, so it might point to an internal error.) (SQLSTATE YE002)</p></dd></dl><dl><dt class="em">-213</dt><dd><p>A null value was returned and no null indicator variable was supplied. (SQLSTATE 22002)</p></dd></dl><dl><dt class="em">-214</dt><dd><p>An ordinary variable was used in a place that requires an array. (SQLSTATE 42804)</p></dd></dl><dl><dt class="em">-215</dt><dd><p>The database returned an ordinary variable in a place that requires array value. (SQLSTATE 42804)</p></dd></dl><dl><dt class="em">-220</dt><dd><p>The program tried to access a connection that does not exist. (SQLSTATE 08003)</p></dd></dl><dl><dt class="em">-221</dt><dd><p>The program tried to access a connection that does exist but is not open. (This is an internal error.) (SQLSTATE YE002)</p></dd></dl><dl><dt class="em">-230</dt><dd><p>The statement you are trying to use has not been prepared. (SQLSTATE 26000)</p></dd></dl><dl><dt class="em">-240</dt><dd><p>The descriptor specified was not found. The statement you are trying to use has not been prepared. (SQLSTATE 33000)</p></dd></dl><dl><dt class="em">-241</dt><dd><p>The descriptor index specified was out of range. (SQLSTATE 07009)</p></dd></dl><dl><dt class="em">-242</dt><dd><p>An invalid descriptor item was requested. (This is an internal error.) (SQLSTATE YE002)</p></dd></dl><dl><dt class="em">-243</dt><dd><p>During the execution of a dynamic statement, the database returned a numeric value and the host variable was not numeric. (SQLSTATE 07006)</p></dd></dl><dl><dt class="em">-244</dt><dd><p>During the execution of a dynamic statement, the database returned a non-numeric value and the host variable was numeric. (SQLSTATE 07006)</p></dd></dl><dl><dt class="em">-400</dt><dd><p>Some error caused by the PostgreSQL server. The message contains the error message from the PostgreSQL server.</p></dd></dl><dl><dt class="em">-401</dt><dd><p>The PostgreSQL server signaled that we cannot start, commit, or rollback the transaction. (SQLSTATE 08007)</p></dd></dl><dl><dt class="em">-402</dt><dd><p>The connection attempt to the database did not succeed. (SQLSTATE 08001)</p></dd></dl><dl><dt class="em">-403</dt><dd><p>Duplicate key error, violation of unique constraint. (SQLSTATE 23505)</p></dd></dl><dl><dt class="em">-404</dt><dd><p>A result for the subquery is not single row. (SQLSTATE 21000)</p></dd></dl><dl><dt class="em">-602</dt><dd><p>An invalid cursor name was specified. (SQLSTATE 34000)</p></dd></dl><dl><dt class="em">-603</dt><dd><p>Transaction is in progress. (SQLSTATE 25001)</p></dd></dl><dl><dt class="em">-604</dt><dd><p>There is no active (in-progress) transaction. (SQLSTATE 25P01)</p></dd></dl><dl><dt class="em">-605</dt><dd><p>An existing cursor name was specified. (SQLSTATE 42P03)</p></dd></dl><p></p></div></div><div class="header_footer"><div class="back_next"><a href="j2681-d-07-02.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-d-08-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>