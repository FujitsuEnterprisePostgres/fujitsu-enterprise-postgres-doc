<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>D.4.3 Retrieving Query Results</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Application Development Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2681-d-00-00.html">Appendix&nbsp;D ECOBPG - Embedded SQL in COBOL</a> &gt; <a href="j2681-d-04-00.html">D.4 Using Host Variables</a> &gt; D.4.3 Retrieving Query Results</div><div class="back_next"><a href="j2681-d-04-02.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-d-04-04.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="IDapl0eN1">D.4.3 Retrieving Query Results</h3><div class="body"><div class="textblock"><p>Now you should be able to pass data generated by your program into an SQL command. But how do you retrieve the results of a query? For that purpose, embedded SQL provides special variants of the usual commands SELECT and FETCH. These commands have a special INTO clause that specifies which host variables the retrieved values are to be stored in. SELECT is used for a query that returns only single row, and FETCH is used for a query that returns multiple rows, using a cursor.</p><p>Here is an example:</p><pre class="border">** assume this table:* CREATE TABLE test (a int, b varchar(50));* EXEC SQL BEGIN DECLARE SECTION END-EXEC. 01 V1 PIC S9(9). 01 V2 PIC X(50) VARYING. EXEC SQL END DECLARE SECTION END-EXEC. ... EXEC SQL SELECT a, b INTO :V1, :V2 FROM test END-EXEC.</pre><p>So the INTO clause appears between the select list and the FROM clause. The number of elements in the select list and the list after INTO (also called the target list) must be equal.</p><br><p>Here is an example using the command FETCH:</p><pre class="border">EXEC SQL BEGIN DECLARE SECTION END-EXEC.01 V1 PIC S9(9).01 V2 PIC X(50) VARYING.EXEC SQL END DECLARE SECTION END-EXEC. ...EXEC SQL DECLARE foo CURSOR FOR SELECT a, b FROM test END-EXEC. ...PERFORM WITH    ...    EXEC SQL FETCH NEXT FROM foo INTO :V1, :V2 END-EXEC    ...END-PERFORM.</pre><p>Here the INTO clause appears after all the normal clauses.</p><p></p></div></div><div class="header_footer"><div class="back_next"><a href="j2681-d-04-02.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-d-04-04.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>