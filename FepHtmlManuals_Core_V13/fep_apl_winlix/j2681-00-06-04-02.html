<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>6.4.2 Compiling Applications</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Application Development Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2681-00-06-00-00.html">Chapter&nbsp;6 Embedded SQL in C</a> &gt; <a href="j2681-00-06-04-00.html">6.4 Application Development</a> &gt; 6.4.2 Compiling Applications</div><div class="back_next"><a href="j2681-00-06-04-01.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-00-06-04-04.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="mID_060402">6.4.2 Compiling Applications</h3><div class="body"><div class="textblock"><p>Append the extension "pgc" to the name of the source file for the embedded SQL in C.</p><p>When the pgc file is precompiled using the ecpg command, C source files will be created, so use the C compiler for the compile.</p><p></p></div><p class="subhead_1" id="IDapl06N5"><span class="em">Precompiling example</span><a name="N28G"></a><span class="em"></span></p><div class="textblock"><pre class="border">ecpg testproc.pgc</pre><p>If an optimizer hint block comment is specified for the SQL statement, specify the following option in the ecpg command:</p><dl><dt class="em">--enable-hint</dt><dd><p>Enables the optimizer hint block comment (hereafter, referred to as the "hint clause"). If this option is not specified, the hint clause will be removed as a result of the ecpg precompile and be disabled.</p><p>The SQL statements that can be specified in the hint clause are SELECT, INSERT, UPDATE, and DELETE.</p><p>The locations in which the hint clause can be specified are immediately after one of the SELECT, INSERT, UPDATE, DELETE, or WITH keywords. A syntax error will occur if any other location is specified.</p><dl><dt class="em">Example of specifying the hint clause<a name="N29G"></a></dt><dd><pre class="border">EXEC SQL SELECT /*+ IndexScan(prod ix01) */ name_id INTO :name_id FROM prod WHERE id = 1;</pre><br></dd></dl><p>Refer to "<a href="j2681-00-11-01-01.html">11.1.1 Optimizer Hints</a>" for information on optimizer hints.</p><br></dd></dl><div class="note"><p class="title">Note</p><div class="notebody"><p>Take the following points into account when using embedded SQL source files:</p><ul><li><p>Multibyte codes expressed in SJIS or UTF-16 cannot be included in statements or host variable declarations specified in EXEC SQL.</p></li><li><p>Do not use UTF-8 with a byte order mark (BOM), because an error may occur during compilation if the BOM character is incorrectly recognized as the source code.</p></li><li><p>Multibyte characters cannot be used in host variable names.</p></li><li><p>It is not possible to use a TYPE name that contains multibyte characters, even though it can be defined.</p></li></ul></div></div><br><p>Specify the following paths when compiling a C application output with precompiling.</p><p>Refer to your compiler documentation for information on how to specify the path.</p><div id="lix" class="spcl"><div class="spcl_body"><dl><dt class="em"><span class="icon"><img src="image/spcl-lix.gif" width="25" height="18" alt="Linux" title="Linux"></span>Linux</dt><dd><div id="lix" class="spcl_subhead"><div class="spcl_body"><table id="lix_spcl_table" border="1" width="76%"><caption><span class="icon"><img src="image/spcl-lix.gif" width="25" height="18" alt="Linux" title="Linux"></span>Table&nbsp;6.1 Include file and library path</caption><col><col><tr><th valign="top"><div class="spcl_body"><p class="lix_spcl_cont">Type of path</p></div></th><th valign="top"><div class="spcl_body"><p class="lix_spcl_cont">Path name</p></div></th></tr><tr><td align="left" valign="top"><div class="spcl_body"><p class="lix_spcl_cont">Path of the include file</p></div></td><td align="left" valign="top"><div class="spcl_body"><p class="lix_spcl_cont"><span class="i">fujitsuE</span><span class="i">nterprisePostgresClientInstallDir</span>/include</p></div></td></tr><tr><td align="left" valign="top"><div class="spcl_body"><p class="lix_spcl_cont">Path of the library</p></div></td><td align="left" valign="top"><div class="spcl_body"><p class="lix_spcl_cont"><span class="i">fujitsuE</span><span class="i">nterprisePostgresClientInstallDir</span>/lib</p></div></td></tr></table></div></div><div id="lix" class="spcl_subhead"><div class="spcl_body"><table id="lix_spcl_table" border="1" width="70%"><caption><span class="icon"><img src="image/spcl-lix.gif" width="25" height="18" alt="Linux" title="Linux"></span>Table&nbsp;6.2 C Library</caption><col><col><col><tr><th valign="top"><div class="spcl_body"><p class="lix_spcl_cont">Type of library</p></div></th><th valign="top"><div class="spcl_body"><p class="lix_spcl_cont">Library name</p></div></th><th valign="top"><div class="spcl_body"><p class="lix_spcl_cont">Note</p></div></th></tr><tr><td rowspan="2" align="left" valign="top"><div class="spcl_body"><p class="lix_spcl_cont">Dynamic library</p></div></td><td align="left" valign="top"><div class="spcl_body"><p class="lix_spcl_cont">libecpg.so</p></div></td><td align="left" valign="top"></td></tr><tr><td align="left" valign="top"><div class="spcl_body"><p class="lix_spcl_cont">libpgtypes.so</p></div></td><td align="left" valign="top"><div class="spcl_body"><p class="lix_spcl_cont">When using the pgtypes library</p></div></td></tr><tr><td rowspan="2" align="left" valign="top"><div class="spcl_body"><p class="lix_spcl_cont">Static library</p></div></td><td align="left" valign="top"><div class="spcl_body"><p class="lix_spcl_cont">libecpg.a</p></div></td><td align="left" valign="top"></td></tr><tr><td align="left" valign="top"><div class="spcl_body"><p class="lix_spcl_cont">libpgtypes.a</p></div></td><td align="left" valign="top"><div class="spcl_body"><p class="lix_spcl_cont">When using the pgtypes library</p></div></td></tr></table></div></div></dd></dl></div></div><div id="win" class="spcl"><div class="spcl_body"><dl><dt class="em"><span class="icon"><img src="image/spcl-win.gif" width="25" height="18" alt="Windows" title="Windows"></span>Windows(R)</dt><dd><div id="win" class="spcl"><div class="spcl_body"><p>If the include file and the library path have been set in the environment variable, there is no need to specify the paths shown below for the compile.</p></div></div><div id="win" class="spcl_subhead"><div class="spcl_body"><table id="win_spcl_table" border="1" width="75%"><caption><span class="icon"><img src="image/spcl-win.gif" width="25" height="18" alt="Windows" title="Windows"></span>Table&nbsp;6.3 Include file and library path</caption><col><col><tr><th valign="top"><div class="spcl_body"><p class="win_spcl_cont">Type of path</p></div></th><th valign="top"><div class="spcl_body"><p class="win_spcl_cont">Path name</p></div></th></tr><tr><td align="left" valign="top"><div class="spcl_body"><p class="win_spcl_cont">Path of the include file</p></div></td><td align="left" valign="top"><div class="spcl_body"><p class="win_spcl_cont"><span class="i">fujitsuE</span><span class="i">nterprisePostgres</span><span class="i">ClientInstallDir</span><span class="i">\include</span></p></div></td></tr><tr><td align="left" valign="top"><div class="spcl_body"><p class="win_spcl_cont">Path of the library</p></div></td><td align="left" valign="top"><div class="spcl_body"><p class="win_spcl_cont"><span class="i">fujitsuE</span><span class="i">nterprisePostgres</span><span class="i">ClientInstallDir</span><span class="i">\</span><span class="i">lib</span></p></div></td></tr></table></div></div><div id="win" class="spcl_subhead"><div class="spcl_body"><table id="win_spcl_table" border="1" width="70%"><caption><span class="icon"><img src="image/spcl-win.gif" width="25" height="18" alt="Windows" title="Windows"></span>Table&nbsp;6.4 C Library</caption><col><col><col><tr><th valign="top"><div class="spcl_body"><p class="win_spcl_cont">Type of library</p></div></th><th valign="top"><div class="spcl_body"><p class="win_spcl_cont">Library name</p></div></th><th valign="top"><div class="spcl_body"><p class="win_spcl_cont">Note</p></div></th></tr><tr><td rowspan="2" align="left" valign="top"><div class="spcl_body"><p class="win_spcl_cont">Library for links</p></div></td><td align="left" valign="top"><div class="spcl_body"><p class="win_spcl_cont">libecpg.lib</p></div></td><td align="left" valign="top"></td></tr><tr><td align="left" valign="top"><div class="spcl_body"><p class="win_spcl_cont">libpgtypes.lib</p></div></td><td align="left" valign="top"><div class="spcl_body"><p class="win_spcl_cont">When using the pgtypes library</p></div></td></tr><tr><td rowspan="2" align="left" valign="top"><div class="spcl_body"><p class="win_spcl_cont">Dynamic library</p></div></td><td align="left" valign="top"><div class="spcl_body"><p class="win_spcl_cont">libecpg.dll</p></div></td><td align="left" valign="top"></td></tr><tr><td align="left" valign="top"><div class="spcl_body"><p class="win_spcl_cont">libpgtypes.dll</p></div></td><td align="left" valign="top"><div class="spcl_body"><p class="win_spcl_cont">When using the pgtypes library</p></div></td></tr></table></div></div><div id="win" class="spcl_list2"><div class="spcl_body"><div class="note"><p class="title">Note</p><div class="notebody"><ul><li><div id="win" class="spcl"><div class="spcl_body"><p>The libecpg library in Windows(R) is created by "release" and "multithreaded" options. When using the ECPGdebug function included in this library, compile using the "release" and "multithreaded" flags in all programs that use this library. When you do this, use the "dynamic" flag if you are using libecpg.dll, and use the "static" flag if you are using libecpg.lib.</p></div></div><div id="win" class="spcl"><div class="spcl_body"><p>Refer to "Library Functions" in "Client Interfaces" in the PostgreSQL Documentation for information on the ECPGdebug function.</p></div></div></li><li><div id="win" class="spcl"><div class="spcl_body"><p>The cl command expects input to be a program that uses one of the following code pages, so convert the program to these code pages and then compile and link it (refer to the Microsoft documentation for details).</p></div></div><ul><li><div id="win" class="spcl"><div class="spcl_body"><p>ANSI console code pages (example: Shift-JIS for Japanese)</p></div></div></li><li><div id="win" class="spcl"><div class="spcl_body"><p>UTF-16 little-endian with or without BOM (Byte Order Mark)</p></div></div></li><li><div id="win" class="spcl"><div class="spcl_body"><p>UTF-16 big-endian with or without BOM</p></div></div></li><li><div id="win" class="spcl"><div class="spcl_body"><p>UTF-8 with BOM</p></div></div></li></ul><div id="win" class="spcl"><div class="spcl_body"><p>The cl command converts strings in a program to an ANSI console code page before generating a module, so the data sent to and received from the database server becomes an ANSI console code page. Therefore, set the coding system corresponding to the ANSI console code page as the coding system of the client.</p></div></div><div id="win" class="spcl"><div class="spcl_body"><p>Refer to "Character Set Support" in "Server Administration" in the PostgreSQL Documentation for information on how to set the client encoding system.<br>(Example: To use environment variables in Japanese, set SJIS in PGCLIENTENCODING.)</p></div></div></li></ul></div></div></div></div></dd></dl></div></div></div></div><div class="header_footer"><div class="back_next"><a href="j2681-00-06-04-01.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-00-06-04-04.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>