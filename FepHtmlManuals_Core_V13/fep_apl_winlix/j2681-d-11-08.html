<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>D.11.8 GET DESCRIPTOR</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Application Development Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2681-d-00-00.html">Appendix&nbsp;D ECOBPG - Embedded SQL in COBOL</a> &gt; <a href="j2681-d-11-00.html">D.11 Embedded SQL Commands</a> &gt; D.11.8 GET DESCRIPTOR</div><div class="back_next"><a href="j2681-d-11-07.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-d-11-09.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="mID_0e11_get_descriptor">D.11.8 GET DESCRIPTOR</h3><div class="body"><div class="textblock"><p></p></div><p class="subhead_1" id="IDapl0eN50"><span class="em">Name</span></p><div class="textblock"><p>GET DESCRIPTOR -- get information from an SQL descriptor area</p></div><p class="subhead_1" id="IDapl0eN51"><span class="em">Synopsis</span></p><div class="textblock"><pre>GET DESCRIPTOR <span class="i">descriptor</span>_<span class="i">name</span> :<span class="i">hostvariable</span> = <span class="i">descriptor</span>_<span class="i">header</span>_<span class="i">item</span> [, ... ]</pre><pre>GET DESCRIPTOR <span class="i">descriptor</span>_<span class="i">name</span> VALUE <span class="i">column</span>_<span class="i">number</span> :<span class="i">hostvariable</span> = <span class="i">descriptor</span>_<span class="i">item</span> [, ... ]</pre></div><p class="subhead_1" id="IDapl0eN52"><span class="em">Description</span></p><div class="textblock"><p>GET DESCRIPTOR retrieves information about a query result set from an SQL descriptor area and stores it into host variables. A descriptor area is typically populated using FETCH or SELECT before using this command to transfer the information into host language variables.</p><p>This command has two forms: The first form retrieves descriptor "header" items, which apply to the result set in its entirety. One example is the row count. The second form, which requires the column number as additional parameter, retrieves information about a particular column. Examples are the column name and the actual column value.</p></div><p class="subhead_1" id="IDapl0eN53"><span class="em">Parameters</span></p><div class="textblock"><dl><dt class="em"><span class="i">descriptor</span>_<span class="i">name</span></dt><dd><p>A descriptor name.</p></dd></dl><dl><dt class="em"><span class="i">descriptor</span>_<span class="i">header</span>_<span class="i">item</span></dt><dd><p>A token identifying which header information item to retrieve. Only COUNT, to get the number of columns in the result set, is currently supported.</p></dd></dl><dl><dt class="em"><span class="i">column</span>_<span class="i">number</span></dt><dd><p>The number of the column about which information is to be retrieved. The count starts at 1.</p></dd></dl><dl><dt class="em"><span class="i">descriptor</span>_<span class="i">item</span></dt><dd><p>A token identifying which item of information about a column to retrieve. See Section 33.7.1 for a list of supported items.</p></dd></dl><dl><dt class="em"><span class="i">hostvariable</span></dt><dd><p>A host variable that will receive the data retrieved from the descriptor area.</p></dd></dl></div><p class="subhead_1" id="IDapl0eN54"><span class="em">Examples</span></p><div class="textblock"><p>An example to retrieve the number of columns in a result set:</p><pre class="border">EXEC SQL GET DESCRIPTOR d :d_count = COUNT END-EXEC.</pre><br><p>An example to retrieve a data length in the first column:</p><pre class="border">EXEC SQL GET DESCRIPTOR d VALUE 1 :d_returned_octet_length = RETURNED_OCTET_LENGTH END-EXEC.</pre><br><p>An example to retrieve the data body of the second column as a string:</p><pre class="border">EXEC SQL GET DESCRIPTOR d VALUE 2 :d_data = DATA END-EXEC.</pre><br><p>Here is an example for a whole procedure of executing SELECT current_database(); and showing the number of columns, the column data length, and the column data:</p><pre class="border">EXEC SQL BEGIN DECLARE SECTION END-EXEC.    01 D-COUNT PIC S9(9) COMP-5.    01 D-DATA PIC X(1024).    01 D-RETURNED-OCTET-LENGTH PIC S9(9) COMP.EXEC SQL END DECLARE SECTION END-EXEC.    EXEC SQL CONNECT TO testdb AS con1 USER testuser END-EXEC.    EXEC SQL ALLOCATE DESCRIPTOR d END-EXEC.*   Declare, open a cursor, and assign a descriptor to the cursor    EXEC SQL DECLARE cur CURSOR FOR SELECT current_database() END-EXEC.    EXEC SQL OPEN cur END-EXEC.    EXEC SQL FETCH NEXT FROM cur INTO SQL DESCRIPTOR d END-EXEC.*   Get a number of total columns    EXEC SQL GET DESCRIPTOR d :D-COUNT = COUNT END-EXEC.    DISPLAY "d_count                 = " D-COUNT.*   Get length of a returned column    EXEC SQL GET DESCRIPTOR d VALUE 1 :D-RETURNED-OCTET-LENGTH = RETURNED_OCTET_LENGTH END-EXEC.    DISPLAY "d_returned_octet_length = " D-RETURNED-OCTET-LENGTH.*   Fetch the returned column as a string    EXEC SQL GET DESCRIPTOR d VALUE 1 :D-DATA = DATA END-EXEC.    DISPLAY "d_data                  = " D-DATA.*   Closing    EXEC SQL CLOSE cur END-EXEC.    EXEC SQL COMMIT END-EXEC.    EXEC SQL DEALLOCATE DESCRIPTOR d END-EXEC.    EXEC SQL DISCONNECT ALL END-EXEC.</pre><p>When the example is executed, the result will look like this:</p><pre class="border">d_count                 = +000000001d_returned_octet_length = +000000006d_data                  = testdb</pre></div><p class="subhead_1" id="IDapl0eN55"><span class="em">Compatibility</span></p><div class="textblock"><p>GET DESCRIPTOR is specified in the SQL standard.</p></div><p class="subhead_1" id="IDapl0eN56"><span class="em">See Also</span></p><div class="textblock"><p><a href="j2681-d-11-01.html"><span class="u">ALLOCATE DESCRIPTOR</span></a>, <a href="j2681-d-11-13.html"><span class="u">SET DESCRIPTOR</span></a></p></div></div><div class="header_footer"><div class="back_next"><a href="j2681-d-11-07.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-d-11-09.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>