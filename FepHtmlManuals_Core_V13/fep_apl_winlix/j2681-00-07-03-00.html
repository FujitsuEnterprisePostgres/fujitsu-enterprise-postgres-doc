<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>7.3 Connecting with the Database</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Application Development Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2681-00-07-00-00.html">Chapter&nbsp;7 Embedded SQL in COBOL</a> &gt; 7.3 Connecting with the Database</div><div class="back_next"><a href="j2681-00-07-02-03.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-00-07-04-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="mID_0603_cob">7.3 Connecting with the Database</h2><div class="body"><div class="textblock"><p>Use the CONNECT statement shown below to create a connection to the database server.</p><p></p></div><p class="subhead_1" id="IDapl06-for-cobolN2"><span class="em">Format</span></p><div class="textblock"><pre class="border">EXEC SQL CONNECT TO target [AS connection-name] [USER user-name]END-EXEC.</pre><dl><dt class="em">target</dt><dd><p>Write in one of the following formats:</p><ul><li><p>dbname@host:port</p></li><li><p>tcp:postgresql://host:port/dbname[?options]</p></li></ul><ul><li><div id="lix" class="spcl"><div class="spcl_body"><p><span class="icon"><img src="image/spcl-lix.gif" width="25" height="18" alt="Linux" title="Linux"></span>unix:postgresql://host[:port][/dbname][?options]<br>(Definition method when using the UNIX domain socket)</p></div></div></li></ul><ul><li><p>SQL string literal containing one of the above formats</p></li><li><p>Reference to a character variable containing one of the above formats</p></li><li><p>DEFAULT</p></li></ul><div class="note"><p class="title">Note</p><div class="notebody"><p>If target is DEFAULT, the AS clause and USER clause cannot be specified.</p></div></div></dd></dl><dl><dt class="em">user-name</dt><dd><p>Write in one of the following formats:</p><ul><li><p>username</p></li><li><p>username/password</p></li><li><p>username IDENTIFIED BY password</p></li><li><p>username USING password</p></li></ul></dd></dl></div><p class="subhead_1" id="IDapl06-for-cobolN3"><span class="em">Description of the arguments</span></p><div class="textblock"><table><col><col><tr><th valign="top"><p>Argument</p></th><th valign="top"><p>Description</p></th></tr><tr><td align="left" valign="top"><p>dbname</p></td><td align="left" valign="top"><p>Specify the database name.</p></td></tr><tr><td align="left" valign="top"><p>host</p></td><td align="left" valign="top"><p>Specify the host name for the connection destination.</p></td></tr><tr><td align="left" valign="top"><p>port</p></td><td align="left" valign="top"><p>Specify the port number for the database server.</p><p>The default is "27500".</p></td></tr><tr><td align="left" valign="top"><p>connection-name</p></td><td align="left" valign="top"><p>Specify connection names to identify connections when multiple connections are to be processed within a single program.</p></td></tr><tr><td align="left" valign="top"><p>username</p></td><td align="left" valign="top"><p>Specify the user that will connect with the database.</p><p>If this is omitted, the name used will be that of the user on the operating system that is executing the application.</p></td></tr><tr><td align="left" valign="top"><p>password</p></td><td align="left" valign="top"><p>Specify a password when authentication is required.</p></td></tr><tr><td align="left" valign="top"><p>options</p></td><td align="left" valign="top"><p>Specify the following parameter when specifying a time for timeout. Connect parameters with &amp; when specifying more than one. The following shows the values specified for each parameter.</p><ul><li><p>connect_timeout</p><p>Specify the timeout for connections.</p><p>Specify a value between 0 and 2147483647 (in seconds). There is no limit set if you set 0 or an invalid value. If "1" is specified, the behavior will be the same as when "2" was specified. An error occurs when a connection cannot be established within the specified time.</p></li><li><p>keepalives</p><p>This enables keepalive.</p><p>Keepalive is disabled if 0 is specified. Keepalive is enabled when any other value is specified. The default is keepalive enabled. Keepalive causes an error to occur when it is determined that the connection with the database is disabled.</p></li><li><p>keepalives_idle</p><p>Specify the time until the system starts sending keepalive messages when communication with the database is not being performed.</p><ul><li><p>Linux</p><p>Specify a value between 1 and 32767 (in seconds). The default value of the system is used if this is not specified.</p></li><li><p>Windows(R)</p><p>Specify a value between 1 and 2147483647 (in seconds). 7200 will be set as default if a value outside this range is specified or if nothing is specified.</p></li></ul></li><li><p>keepalives_interval</p><p>Specify the interval between resends when there is no response to keepalive messages.</p><ul><li><p>Linux</p><p>Specify a value between 1 and 32767 (in seconds). The default value of the system is used if this is not specified.</p></li><li><p>Windows(R)</p><p>Specify a value between 1 and 2147483647 (in seconds). 1 will be set as default if a value outside this range is specified or if nothing is specified.</p></li></ul></li><li><p>keepalives_count</p><p>Specify the number of resends for keepalive messages.</p><ul><li><p>Linux</p><p>Specify a value between 1 and 127. The default value of the system is used if this is not specified.</p></li><li><p>Windows(R)</p><p>The system default value is used irrespective of what is specified for this parameter.</p></li></ul></li></ul></td></tr></table></div><p class="subhead_1" id="IDapl06-for-cobolN4"><span class="em">Code examples for applications</span><a name="N35G"></a></p><div class="textblock"><pre class="border">EXEC SQL CONNECT TO tcp:postgresql://sv1:27500/mydb?connect_timeout=20&amp;keepalives_idle=20&amp;keepalives_interval=5&amp;keepalives_count=2&amp;keepalives=1 USER myuser/myuser01 END-EXEC.</pre></div></div><div class="header_footer"><div class="back_next"><a href="j2681-00-07-02-03.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-00-07-04-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>