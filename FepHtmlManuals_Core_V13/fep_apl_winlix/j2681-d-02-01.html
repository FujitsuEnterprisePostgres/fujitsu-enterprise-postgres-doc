<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>D.2.1 Connecting to the Database Server</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Application Development Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2681-d-00-00.html">Appendix&nbsp;D ECOBPG - Embedded SQL in COBOL</a> &gt; <a href="j2681-d-02-00.html">D.2 Managing Database Connections</a> &gt; D.2.1 Connecting to the Database Server</div><div class="back_next"><a href="j2681-d-02-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-d-02-02.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="mID_0e0201">D.2.1 Connecting to the Database Server</h3><div class="body"><div class="textblock"><p>One connects to a database using the following statement:</p><pre class="border">EXEC SQL CONNECT TO target [AS connection-name] [USER user-name] END-EXEC.</pre><br><p>The target can be specified in the following ways:</p><ul><li><p>dbname[@hostname][:port]</p></li><li><p>tcp:postgresql://hostname[:port][/dbname][?options]</p></li><li><p>unix:postgresql://hostname[:port][/dbname][?options]</p></li><li><p>an SQL string literal containing one of the above forms</p></li><li><p>a reference to a character variable containing one of the above forms (see examples)</p></li><li><p>DEFAULT</p></li></ul><p>If you specify the connection target literally (that is, not through a variable reference) and you don't quote the value, then the case-insensitivity rules of normal SQL are applied. In that case you can also double-quote the individual parameters separately as needed. In practice, it is probably less error-prone to use a (single-quoted) string literal or a variable reference. The connection target DEFAULT initiates a connection to the default database under the default user name. No separate user name or connection name can be specified in that case.</p><p>There are also different ways to specify the user name:</p><ul><li><p>username</p></li><li><p>username/password</p></li><li><p>username IDENTIFIED BY password</p></li><li><p>username USING password</p></li></ul><p>As above, the parameters username and password can be an SQL identifier, an SQL string literal, or a reference to a character variable.</p><p>The connection-name is used to handle multiple connections in one program. It can be omitted if a program uses only one connection. The most recently opened connection becomes the current connection, which is used by default when an SQL statement is to be executed (see later in this chapter).</p><br><p>Here are some examples of CONNECT statements:</p><pre class="border">EXEC SQL CONNECT TO mydb@sql.mydomain.com END-EXEC.</pre><pre class="border">EXEC SQL CONNECT TO tcp:postgresql://sql.mydomain.com/mydb AS myconnection USER john END-EXEC.</pre><pre class="border">EXEC SQL BEGIN DECLARE SECTION END-EXEC.01 TARGET PIC X(25).01 USER PIC X(5).EXEC SQL END DECLARE SECTION END-EXEC. ...MOVE "mydb@sql.mydomain.com" TO TARGET.MOVE "john" TO USER.EXEC SQL CONNECT TO :TARGET USER :USER END-EXEC.</pre><p>The last form makes use of the variant referred to above as character variable reference. For this purpose, only fixed-length string(no VARYING) variable can be used. Trailing spaces are ignored. You will see in later sections how COBOL variables can be used in SQL statements when you prefix them with a colon.</p><p>Be advised that the format of the connection target is not specified in the SQL standard. So if you want to develop portable applications, you might want to use something based on the last example above to encapsulate the connection target string somewhere.</p><p></p></div></div><div class="header_footer"><div class="back_next"><a href="j2681-d-02-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-d-02-02.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>