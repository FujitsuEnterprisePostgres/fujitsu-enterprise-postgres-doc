<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>11.1.1 Optimizer Hints</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Application Development Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2681-00-11-00-00.html">Chapter&nbsp;11 Performance Tuning</a> &gt; <a href="j2681-00-11-01-00.html">11.1 Enhanced Query Plan Stability</a> &gt; 11.1.1 Optimizer Hints</div><div class="back_next"><a href="j2681-00-11-01-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-00-11-01-02.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="mID_110101">11.1.1 Optimizer Hints</h3><div class="body"><div class="textblock"><p>This section explains the basic feature content of the optimizer hint (pg_hint_plan).</p><p>Refer to the open-source software webpage for information on pg_hint_plan.</p><p>In FUJITSU Enterprise Postgres, the optimizer hints can be specified in all application interfaces.</p><p></p></div><p class="subhead_1" id="IDapl11N1"><span class="em">Description</span></p><div class="textblock"><p>You can specify a query plan in each SQL statement.</p></div><p class="subhead_1" id="IDapl11N2"><span class="em">List of Features</span></p><div class="textblock"><p>The main query plans that can be specified using this feature are as follows:</p><ul><li><p>Query methods</p></li><li><p>Join methods</p></li><li><p>Join sequences</p><br></li></ul><dl><dt class="em">Query methods</dt><dd><p>Specify which method to use to query the specified table.</p><p>The main features are as follows:</p><ul><li><p>SeqScan (<span class="i">tableName</span>)</p></li><li><p>BitMapScan (<span class="i">tableName</span> [<span class="i">index</span><span class="i">N</span><span class="i">ame</span> ... ])</p></li><li><p>IndexScan (<span class="i">tableName</span> [<span class="i">indexName</span> ... ])</p></li><li><p>IndexOnlyScan (<span class="i">tableName</span> [<span class="i">indexName</span> ... ])</p></li></ul><div class="note"><p class="title">Note</p><div class="notebody"><ul><li><p>If the specified index does not exist, or is not related to the search condition column specified in the WHERE clause, for example, SeqScan will be used.</p></li><li><p>Even if IndexOnlyScan is specified, IndexScan may be used if it is necessary to access the table because a row was updated, for example.</p></li><li><p>If multiple query methods were specified for the same table, the method specified last will be used.</p></li></ul></div></div><br></dd></dl><dl><dt class="em">Join methods</dt><dd><p>Specify the join method.</p><p>The main features are as follows:</p><ul><li><p>NestLoop (<span class="i">table</span><span class="i">N</span><span class="i">ame</span> <span class="i">tableName</span> [<span class="i">tableName</span> ... ])</p></li><li><p>MergeJoin (<span class="i">tableName</span> <span class="i">tableName</span> [<span class="i">tableName</span> ... ])</p></li><li><p>HashJoin (<span class="i">tableName</span> <span class="i">tableName</span> [<span class="i">tableName</span> ... ])</p></li></ul><div class="note"><p class="title">Note</p><div class="notebody"><ul><li><p>These cannot be specified for view tables and subqueries.</p></li><li><p>If multiple methods were specified for the same table combination, the method specified last will be used.</p></li></ul></div></div><br></dd></dl><dl><dt class="em">Join sequences</dt><dd><p>The tables will be joined in the specified table sequence.</p><p>Specify the information using the following method:</p><ul><li><p>Leading ((<span class="i">table</span> <span class="i">table</span>))</p><p>The method used to specify [<span class="i">table</span>] is as follows:</p><p><span class="i">table</span> = <span class="i">table</span><span class="i">N</span><span class="i">ame</span> or ( <span class="i">table</span> <span class="i">table</span> )</p></li></ul><div class="note"><p class="title">Note</p><div class="notebody"><p>If multiple sequences were specified for the same table combination, the sequence specified last will be used.</p></div></div></dd></dl></div><p class="subhead_1" id="IDapl11N3"><span class="em">Usage method</span></p><div class="textblock"><p>The use of this feature is explained below.</p><br><dl><dt class="em">Method used to define this feature</dt><dd><p>Define this feature by specifying the format (block comment) " /*+ ...  */".</p><ul><li><p>To specify hint clauses in each SELECT statement, for example when there are multiple SELECT statements in the SQL statement, define all hint clauses in the first block comment.</p><div class="ex"><p class="title">Example</p><div class="exbody"><p><span class="em">Specifying hint clauses for the emp table and the dept table</span></p><pre class="border">WITH /*+ IndexScan(emp emp_age_index) IndexScan(dept dept_deptno_index) */ age30AS (SELECT * FROM emp WHERE age BETWEEN 30 AND 39)SELECT * FROM age30, dept WHERE age30.deptno = dept.deptno;</pre></div></div></li><li><p>To specify separate hint clauses for the same object in the SQL statement, define aliases in each object, and then specify hint clauses for those aliases.</p><div class="ex"><p class="title">Example</p><div class="exbody"><p><span class="em">Specifying separate hint clauses for the emp table</span></p><pre class="border">WITH /*+ SeqScan(ta) IndexScan(tb) */ over100AS (SELECT empno FROM emp ta WHERE salary &gt; 1000000)SELECT * FROM emp tb, over100 WHERE tb.empno = over100.empno AND tb.age &lt; 30</pre></div></div></li><li><p>When using embedded SQL in C, the locations in which the hint clause block comment is specified are restricted. Refer to "<a href="j2681-00-06-04-02.html">6.4.2 Compiling Applications</a>" for details.</p></li></ul></dd></dl></div><p class="subhead_1" id="IDapl11N4"><span class="em">Usage notes</span></p><div class="textblock"><ul><li><p>If a hint clause was specified in multiple block comments in the SQL statement, the hint clause specified in the second block comment and thereafter will be ignored.</p></li><li><p>If characters other than those listed below appear before the hint clause in the SQL statement, they will be invalid even for hint clause block comments.</p><ul><li><p>Space, tab, line feed</p></li><li><p>Letter (uppercase and lowercase), number</p></li><li><p>Underscore, comma</p></li><li><p>Brackets ()</p></li></ul></li></ul></div></div><div class="header_footer"><div class="back_next"><a href="j2681-00-11-01-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-00-11-01-02.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>