<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>12.1 Operating Conditions</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Application Development Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2681-00-12-00-00.html">Chapter&nbsp;12 Scan Using a Vertical Clustered Index (VCI)</a> &gt; 12.1 Operating Conditions</div><div class="back_next"><a href="j2681-00-12-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-00-12-02-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="mID_1301">12.1 Operating Conditions</h2><div class="body"><div class="textblock"><p>Faster aggregation can be achieved by using a VCI defined for all columns to be referenced.</p><p>This section describes the conditions under which a scan can use a VCI.</p><p>Whether to use VCI is determined based on cost estimation in the same way as normal indexes. Therefore, another execution plan will be selected if it is cheaper than a VCI even if a VCI is available.</p><p></p></div><p class="subhead_1" id="IDapl13N1"><span class="em">SQL statement</span><span class="em">s</span><span class="em"> </span><span class="em">that can use VCIs</span></p><div class="textblock"><p>In addition to general SELECT statements, VCIs can be used for the SQL statements below (as long as they do not specify any of the elements listed in "SQL statements that cannot use VCIs" below):</p><ul><li><p>SELECT INTO</p></li><li><p>CREATE TABLE AS SELECT</p></li><li><p>CREATE MATERIALIZED VIEW ... AS SELECT</p></li><li><p>CREATE VIEW ... AS SELECT</p></li><li><p>COPY (SELECT ...) TO</p></li></ul></div><p class="subhead_1" id="IDapl13N2"><span class="em">SQL statements that cannot use VCIs</span></p><div class="textblock"><p>VCIs cannot be used for SQL statements that specify any of the following:</p><ul><li><p>Subquery to reference the column in which the parent query is referencing is specified</p></li><li><p>Lock clause (such as FOR UPDATE)</p></li><li><p>Cursor declared with WITH HOLD or scrollable</p></li><li><p>SERIALIZABLE transaction isolation level</p></li><li><p>Function or operator listed in "Functions and operators that do not use a VCI"</p></li><li><p>User-defined function</p></li></ul><table><caption>Table&nbsp;12.1 Functions and operators that cannot use VCIs</caption><col><col><col><tr><th colspan="2" valign="top"><p>Classification</p></th><th valign="top"><p>Function/operator</p></th></tr><tr><td align="left" valign="top"><p>Mathematical functions and operators</p></td><td align="left" valign="top"><p>Random functions</p></td><td align="left" valign="top"><p>random and setseed</p></td></tr><tr><td align="left" valign="top"><p>String functions and operators</p></td><td align="left" valign="top"><p>String functions</p></td><td align="left" valign="top"><p>format (if the <span class="i">format</span> argument is specified), regexp_matches, regexp_split_to_array and regexp_split_to_table</p></td></tr><tr><td rowspan="2" align="left" valign="top"><p>Date/time functions and operators</p></td><td align="left" valign="top"><p>Date/time functions</p></td><td align="left" valign="top"><p>age(timestamp), current_date, current_time, current_timestamp, localtime, localtimestamp, statement_timestamp and transaction_timestamp</p></td></tr><tr><td align="left" valign="top"><p>Delaying execution functions</p></td><td align="left" valign="top"><p>pg_sleep, pg_sleep_for, and pg_sleep_until</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Enum support functions</p></td><td align="left" valign="top"><p>All functions and operators</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Geometric functions and operators</p></td><td align="left" valign="top"><p>All functions and operators</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Network address functions and operators</p></td><td align="left" valign="top"><p>All functions and operators</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Text search functions and operators</p></td><td align="left" valign="top"><p>All functions and operators</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>XML functions</p></td><td align="left" valign="top"><p>All functions</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>JSON functions and operators</p></td><td align="left" valign="top"><p>All functions and operators</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Sequence manipulation functions</p></td><td align="left" valign="top"><p>All functions</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Array functions and operators</p></td><td align="left" valign="top"><p>All functions and operators</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Range functions and operators</p></td><td align="left" valign="top"><p>All functions and operators</p></td></tr><tr><td rowspan="4" align="left" valign="top"><p>Aggregate functions</p></td><td align="left" valign="top"><p>General-purpose aggregate functions</p></td><td align="left" valign="top"><p>array_agg, json_agg, json_object_agg, string_agg and xmlagg</p></td></tr><tr><td align="left" valign="top"><p>Aggregate functions for statistics</p></td><td align="left" valign="top"><p>corr, covar_pop, covar_samp, regr_avgx, regr_avgy, regr_count, regr_intercept, regr_r2, regr_slope, regr_sxx, regr_sxy and regr_syy</p></td></tr><tr><td align="left" valign="top"><p>Ordered-set aggregate functions</p></td><td align="left" valign="top"><p>All functions</p></td></tr><tr><td align="left" valign="top"><p>Hypothetical-set aggregate functions</p></td><td align="left" valign="top"><p>All functions</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Window functions</p></td><td align="left" valign="top"><p>All functions</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Subquery expressions</p></td><td align="left" valign="top"><p>Subquery expressions with its row constructor specified on the left side</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Row and array comparisons</p></td><td align="left" valign="top"><p>Row constructor and composite type comparisons</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Set returning functions</p></td><td align="left" valign="top"><p>All functions</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>System information functions</p></td><td align="left" valign="top"><p>All functions</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>System administration functions</p></td><td align="left" valign="top"><p>All functions</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Trigger functions</p></td><td align="left" valign="top"><p>All functions</p></td></tr><tr><td colspan="2" align="left" valign="top"><p>Session information functions</p></td><td align="left" valign="top"><p>current_role and current_user</p></td></tr></table></div></div><div class="header_footer"><div class="back_next"><a href="j2681-00-12-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-00-12-02-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>