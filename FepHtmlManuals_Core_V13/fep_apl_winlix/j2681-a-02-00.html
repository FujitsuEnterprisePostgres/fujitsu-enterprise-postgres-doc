<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>A.2 Notes when Using Temporary Tables</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Application Development Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2681-a-00-00.html">Appendix&nbsp;A Precautions when Developing Applications</a> &gt; A.2 Notes when Using Temporary Tables</div><div class="back_next"><a href="j2681-a-01-02.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-a-03-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="mID_0a0102">A.2 Notes when Using Temporary Tables</h2><div class="body"><div class="textblock"><p>In standard SQL, a temporary table can be defined in advance to enable an empty temporary table to be created automatically when the application connects to the database. However, in FUJITSU Enterprise Postgres, a temporary table must be created when the application connects to the database by explicitly using the CREATE TABLE statement.</p><p>If the same temporary table is repeatedly created and deleted during the same session, the system table might expand, and memory usage might increase. To prevent this, specify the CREATE TABLE statement to ensure the temporary table is reused.</p><p>For example, in cases where a temporary table would be created and deleted for repeatedly executed transactions, specify the CREATE TABLE statement as shown below:</p><ul><li><p>Specify "IF NOT EXISTS" to create a temporary table only if none exists when the transaction starts.</p></li><li><p>Specify "ON COMMIT DELETE ROWS" to ensure all rows are deleted when the transaction ends.</p></li></ul><div class="ref"><p class="title">See</p><div class="refbody"><p>Refer to "SQL Commands" under "Reference" in the PostgreSQL Documentation for information on the CREATE TABLE statement.</p></div></div><p>Examples of SQL using a temporary table are shown below:</p><dl><dt class="em">Example of bad use (creating and deleting a temporary table)</dt><dd><pre class="border">BEGIN;CREATE TEMPORARY TABLE mytable(col1 CHAR(4), col2 INTEGER) ON COMMIT DROP;     (mytable processes)COMMIT;</pre></dd></dl><dl><dt class="em">Example of good use (reusing a temporary table)</dt><dd><pre class="border">BEGIN;CREATE TEMPORARY TABLE IF NOT EXISTS mytable(col1 CHAR(4), col2 INTEGER) ON COMMIT DELETE ROWS;     (mytable processes)COMMIT;</pre></dd></dl><p></p></div></div><div class="header_footer"><div class="back_next"><a href="j2681-a-01-02.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-a-03-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>