<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>6.4.4 DECLARE STATEMENT</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Application Development Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2681-00-06-00-00.html">Chapter&nbsp;6 Embedded SQL in C</a> &gt; <a href="j2681-00-06-04-00.html">6.4 Application Development</a> &gt; 6.4.4 DECLARE STATEMENT</div><div class="back_next"><a href="j2681-00-06-04-04.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-00-06-04-06.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="mID_060404">6.4.4 DECLARE STATEMENT</h3><div class="body"><div class="textblock"><p>This section describes the DECLARE STATEMENT.</p><p></p></div><p class="subhead_1" id="IDapl06N16"><span class="em">Synopsis</span></p><div class="textblock"><pre>EXEC SQL [ AT <span class="i">conn</span><span class="i">N</span><span class="i">ame</span>] DECLARE <span class="i">statement</span><span class="i">N</span><span class="i">ame</span> STATEMENT;</pre></div><p class="subhead_1" id="IDapl06N17"><span class="em">Description</span></p><div class="textblock"><p>DECLARE STATEMENT is an embedded SQL command that declares an identifier for a prepared statement. The declared identifier can be used as an identifier in a prepared statement for the following SQL commands:</p><ul><li><p>EXECUTE</p></li><li><p>DECLARE</p></li><li><p>DESCRIBE</p></li><li><p>PREPARE (Embedded SQL commands)</p></li><li><p>PREPARE (SQL commands)</p></li></ul><p>You can associate an identifier in a prepared statement with a connection by executing a DECLARE STATEMENT that specifies the connection. If you specify an identifier associated with the connection in a later SQL command, the SQL command is executed using the connection associated with the identifier. The association between the connection and the identifier in the prepared statement is shared throughout the process.</p><p>Only one connection can be associated with a prepared statement of the same name. If you make multiple associations across files, subsequent DECLARE STATEMENT are ignored. If you associate the same file more than once, precompiling the file fails.</p><p>If you use the identifier associated with a connection in a SQL command, do not use the AT clause. If a connection different from the connection linked to the identifier using the AT clause is selected, a runtime error will occur.</p></div><p class="subhead_1" id="IDapl06N18"><span class="em">Parameters</span></p><div class="textblock"><dl><dt class="em">connName</dt><dd><p>A database connection name established by the CONNECT command.</p><p>If AT clause is omitted, no association is made between the connection and the identifier. DECLARE STATEMENT is executed, but has no effect.</p></dd></dl><dl><dt class="em">statementName</dt><dd><p>Specify the identifier of the prepared statement. You can specify either a SQL identifier or a host variable.</p></dd></dl></div><p class="subhead_1" id="IDapl06N19"><span class="em">Examples</span></p><div class="textblock"><dl><dt class="em">Dynamic SQL statement</dt><dd><p>DECLARE STATEMENT is primarily used to execute dynamic SQL statements.</p><pre class="border">EXEC SQL BEGIN DECLARE SECTION;char dbname[128];EXEC SQL END DECLARE SECTION;...EXEC SQL CONNECT TO postgres AS con1;EXEC SQL CONNECT TO another_database AS con2;EXEC SQL AT con1 DECLARE sql_stmt STATEMENT;EXEC SQL DECLARE cursor_name CURSOR FOR sql_stmt;EXEC SQL PREPARE sql_stmt FROM "SELECT current_database()";EXEC SQL OPEN cursor_name;EXEC SQL FETCH cursor_name INTO :dbname;EXEC SQL CLOSE cursor_name;</pre><p>In the example above, the connection 'con1' is associated with the prepared statement identifier 'sql_stmt'. So the current connection is 'con2', but the embedded SQL commands that follow are executed on 'con1'.</p><br></dd></dl><dl><dt class="em">PREPARE AS statement</dt><dd><p>The following is an example using a PREPARE statement in the SQL command:</p><pre class="border">EXEC SQL AT db1 DECLARE stmt STATEMENT;EXEC SQL PREPARE stmt (int) AS    SELECT * FROM employee WHERE id = $1;EXEC SQL EXECUTE stmt USING 1;</pre><p>The above SELECT statement is executed on the connection 'db1'.</p></dd></dl></div><p class="subhead_1" id="IDapl06N20"><span class="em">Compatibility</span></p><div class="textblock"><p>DECLARE STATEMENT is not specified in the SQL standard.</p></div><p class="subhead_1" id="IDapl06N21"><span class="em">See Also</span></p><div class="textblock"><p>EXECUTE, DECLARE, DESCLIBE, PREPARE (Embedded SQL commands), PREPARE (SQL commands)</p><div class="ref"><p class="title">See</p><div class="refbody"><ul><li><p>Refer to "Embedded SQL Commands" in "Client Interfaces" in the PostgreSQL documentation for information on the embedde SQL commands.</p></li><li><p>Refer to "SQL Commands" in "Reference" in the PostgreSQL documentation for information on the SQL commands.</p></li></ul></div></div></div></div><div class="header_footer"><div class="back_next"><a href="j2681-00-06-04-04.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2681-00-06-04-06.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>