<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>2.4.1 Registering Entries to the machine.config File</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Installation and Setup Guide  for Client</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2675-00-02-00-00.html">Chapter&nbsp;2 Installation and Uninstallation of the Windows Client</a> &gt; <a href="j2675-00-02-04-00.html">2.4 Registering .NET Data Provider</a> &gt; 2.4.1 Registering Entries to the machine.config File</div><div class="back_next"><a href="j2675-00-02-04-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2675-00-03-00-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="mID_020401">2.4.1 Registering Entries to the machine.config File</h3><div class="body"><div class="textblock"><p>If you want to use different versions of Npgsql for each application during multi-version installation, this can be achieved by registering multiple entries with different invariant values to DbProviderFactories in the machine.config file and using the relevant value for each application.</p><p>NpgsqlRegister.exe is a tool provided by FUJITSU.</p><p>The NpgsqlRegister.exe tool allows a user to:</p><ul><li><p>Change the invariant value registered to a different version of FUJITSU Enterprise Postgres to this version (cannot be edited with the exception of the default invariant value "FUJITSU.Npgsql").</p></li><li><p>Register an invariant value.</p></li></ul><div class="note"><p class="title">Note</p><div class="notebody"><ul><li><p>When changing existing invariant values, a user must edit existing DbProvider entries very carefully. Ensure that no application is using the DbProvider entries being edited.</p></li><li><p>If it is likely that a user will install multiple versions of Npgsql, then it is recommended to add and use new invariant values.</p></li></ul></div></div><p>The instructions below describe where to find and how to use this tool to register machine.config entries for the version being installed.</p><dl><dt class="em">Location of NpgsqlRegister.exe</dt><dd><p>The NpgsqlRegister.exe tool is stored in the following location.</p><pre class="border"><span class="i">fujitsuEnterprisePostgresClientInstallDir</span>\dotnet\NpgsqlRegister.exe</pre><p>The NpgsqlRegister.exe tool requires .NET Framework 4.6.1 or later to be installed. If not installed, install .NET Framework 4.6.1 or later, and then execute the command again.</p></dd></dl><dl><dt class="em">Using NpgsqlRegister.exe</dt><dd><p>Execute the command below as a user with administrator privileges.</p><pre class="border">&gt; NpgsqlRegister.exe</pre><p>The NpgsqlRegister.exe tool checks if a FUJITSU Enterprise Postgres invariant value exists. If a FUJITSU Enterprise Postgres invariant value does not exist in machine.config, an invariant value with the current version (FUJITSU.Npgsql) is registered to machine.config, and this will be notified to the user. If a FUJITSU Enterprise Postgres invariant value exists, the user will be prompted with the following options.</p><pre class="border">1 - Edit an existing DbProvider entry to point to the current version2 - Add a new Invariant alias DbProvider entry to point to the current version3 - Exit</pre><dl><dt class="em">Editing an existing DbProvider entry</dt><dd><p>When this option is selected, applications that use an existing DbProvider entry will reference the latest installed Npgsql version from the GAC.</p><p>A list of all FUJITSU Enterprise Postgres Npgsql invariant name entries that exist in machine.config will be displayed as follows.</p><p><span class="em">Example</span></p><pre class="border">Please select the Invariant attribute you would like to pointto the current version.1 - Invariant attribute: FUJITSU.Npgsql.12, Npgsql Version: 12.0.0.02 - Invariant attribute: FUJITSU.Npgsql.13, Npgsql Version: 13.0.0.03 - Invariant attribute: Npgsql, Npgsql Version: 13.0.0.04 - Exit</pre><p>Selecting one of the invariant values listed will result in the machine.config entries being updated to point to this version, and any existing application referencing this invariant value will start referencing this version of Npgsql.</p></dd></dl><dl><dt class="em">Adding a new entry to DbProvider</dt><dd><p>When this option is selected, a new invariant value can be registered. When referencing the new registered invariant value from the application, this FUJITSU Enterprise Postgres server version of Npgsql is referenced.</p><p>Upon selecting the option to add a new invariant value, the following will be displayed.</p><pre class="border">You have chosen to add a new DbProvider entry with an Invariant Alias to the machine.configThe Invariant attribute can either be in the form of 2 user defined formats (define <span class="i">xyz</span>):1 - 'FUJITSU.Npgsql.<span class="i">xyz</span>'2 - 'Npgsql.<span class="i">xyz</span>'or add a DbProvider entry with Invariant attribute set to 'Npgsql'3 - 'Npgsql'4 - ExitPlease enter one of the options (1 .. 4):</pre><p>By specifying a value to "<span class="i">xyz</span>" in the first two options, any invariant value can be created. However, the user must specify at least one alphanumeric character of up to 10 characters.</p><p>The option three registers a new invariant value "Npgsql".</p><p>If the specified value already exists, a warning will be output as follows.</p><pre class="border">A DbProvider entry with Invariant attribute 'Npgsql' already exists in machine.configIf you require this Invariant attribute, restart the application and choose 'Edit an existing DbProvider entry'</pre></dd></dl></dd></dl><p></p></div></div><div class="header_footer"><div class="back_next"><a href="j2675-00-02-04-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2675-00-03-00-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>