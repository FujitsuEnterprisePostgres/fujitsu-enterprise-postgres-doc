<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>5.6.3 Enabling Automatic Opening of the Keystore</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Operation Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2677-00-05-00-00.html">Chapter&nbsp;5 Protecting Storage Data Using Transparent Data Encryption</a> &gt; <a href="j2677-00-05-06-00.html">5.6 Managing the Keystore</a> &gt; 5.6.3 Enabling Automatic Opening of the Keystore</div><div class="back_next"><a href="j2677-00-05-06-02.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2677-00-05-06-04.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="br056300">5.6.3 Enabling Automatic Opening of the Keystore<a name="N42G"></a></h3><div class="body"><div class="textblock"><p>When using an automatically opening keystore, you do not need to enter the passphrase and you can automatically open the keystore when the instance starts. Execute the pgx_keystore command to enable automatic opening of the keystore.</p><pre class="border">&gt; pgx_keystore --enable-auto-open /key/store/location/keystore.ks Enter the passphrase: Automatic opening of the keystore is now enabled&gt;</pre><div class="ref"><p class="title">See</p><div class="refbody"><p>Refer to "pgx_keystore" in the Reference for information on pgx_keystore command.</p></div></div><p>When automatic opening is enabled, an automatically opening keystore is created in the same directory as the original keystore. The file name of the automatically opening keystore is keystore.aks. The file keystore.aks is an obfuscated copy of the decrypted content of the keystore.ks file. As long as this file exists, there is no need to enter the passphrase to open the keystore when starting the instance.</p><p>Do not delete the original keystore file, keystore.ks. It is required for changing the master encryption key and the passphrase. When you change the master encryption key and the passphrase, keystore.aks is recreated from the original keystore file, keystore.ks.</p><p>Protect keystore.ks, keystore.aks, and the directory that stores the keystore so that only the user who starts the instance can access them.</p><p>Configure the permission of the files so that only the user who starts the instance can access the SQL functions and commands that create these files. Accordingly, manually configure the same permission mode if the files are restored.</p><div class="ex"><p class="title">Example</p><div class="exbody"><pre class="border"># chown -R fsepuser:fsepuser /key/store/location# chmod 700 /key/store/location# chmod 600 /key/store/location/keystore.ks# chmod 600 /key/store/location/keystore.aks</pre></div></div><p>An automatically opening keystore will only open on the computer where it was created.</p><p>To disable automatic opening of the keystore, delete keystore.aks.</p><div class="note"><p class="title">Note</p><div class="notebody"><ul><li><p>To use WebAdmin for recovery, you must enable automatic opening of the keystore.</p></li><li><p>Refer to "<a href="j2677-00-05-07-00.html">5.7 Backing Up and Restoring/Recovering the Database</a>" after enabling or reconfiguring encryption to back up the database.</p></li><li><p>Specify a different directory from those below as the keystore storage destination:</p><ul><li><p>Data storage destination</p></li><li><p>Tablespace storage destination</p></li><li><p>Transaction log storage destination</p></li><li><p>Backup data storage destination</p></li></ul></li></ul></div></div><p></p></div></div><div class="header_footer"><div class="back_next"><a href="j2677-00-05-06-02.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2677-00-05-06-04.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>