<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>5.8 Importing and Exporting the Database</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Operation Guide</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2677-00-05-00-00.html">Chapter&nbsp;5 Protecting Storage Data Using Transparent Data Encryption</a> &gt; 5.8 Importing and Exporting the Database</div><div class="back_next"><a href="j2677-00-05-07-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2677-00-05-09-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h2 id="br058000">5.8 Importing and Exporting the Database<a name="N48G"></a></h2><div class="body"><div class="textblock"><p>The files output by the COPY TO command are not encrypted. Therefore, when transferring files to other systems, you should encrypt files using OpenSSL commands or other means and use scp or sftp to encrypt the data being transferred. </p><p>Use a safe method to delete obsolete plain text files.</p><p>You can use the following methods to safely delete files:</p><ul><li><p>shred command</p></li></ul><div class="ex"><p class="title">Example</p><div class="exbody"><pre class="border"># Export the contents of the table my_table to a CSV file.&gt; psql -c "COPY my_table TO '/tmp/my_table.csv' (FORMAT CSV)" postgres# Encrypt the exported file.&gt; openssl enc -e -aes256 -in my_table.csv -out my_table.csv.enc(The user is prompted to enter the passphrase to be used for encryption)# Safely delete plain text files.&gt; shred -u -x my_table.csv (Transfer encrypted files to other systems)# Decrypt the encrypted files on other systems.&gt; openssl enc -d -aes256 -in my_table.csv.enc -out my_table.csv(The user is prompted to enter the passphrase to be used for decryption)</pre></div></div><p>If you use COPY FROM to import data to tables and indexes in an encrypted tablespace, the imported data is automatically encrypted before being stored.</p><p></p></div></div><div class="header_footer"><div class="back_next"><a href="j2677-00-05-07-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2677-00-05-09-00.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2015-2021 FUJITSU LIMITED</div></div></body></html>