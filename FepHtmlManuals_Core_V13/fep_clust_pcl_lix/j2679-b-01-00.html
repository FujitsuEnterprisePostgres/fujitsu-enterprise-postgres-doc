<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>B.1 pgx_pclrsc</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Cluster Operation Guide(PRIMECLUSTER)</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2679-b-00-00.html">Appendix&nbsp;B Command Reference</a> &gt; B.1 pgx_pclrsc</div><div class="back_next"><a href="j2679-b-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><img src="image/spacewhite.gif" width="64" height="27" alt=""></div></div><h2 id="mID_0d_pgx_pclrsc">B.1 pgx_pclrsc</h2><div class="body"><div class="textblock"><p></p></div><p class="subhead_1" id="IDclust0d-cmdN1"><span class="em">Name</span></p><div class="textblock"><p>pgx_pclrsc -- Register, unregister, or display FUJITSU Enterprise Postgres database cluster with PRIMECLUSTER as resource of PRIMECLUSTER.</p></div><p class="subhead_1" id="IDclust0d-cmdN2"><span class="em">Synopsis</span></p><div class="textblock"><pre>pgx_pclrsc  -a  -c  <span class="i">name</span>  -u  <span class="i">osuser</span>  -D <span class="i">directory</span> -w <span class="i">directory</span><span class="i"><br>           </span> -n <span class="i">nodes</span> [options...]pgx_pclrsc -d -c <span class="i">name</span><span class="i"><br></span>pgx_pclrsc -p [-c <span class="i">name</span>]</pre></div><p class="subhead_1" id="IDclust0d-cmdN3"><span class="em">Description</span></p><div class="textblock"><p>pgx_pclrsc is an utility for registering or unregistering FUJITSU Enterprise Postgres database cluster with PRIMECLUSTER, or displaying settings of FUJITSU Enterprise Postgres database  cluster registered with PRIMECLUSTER. Execute the command on a member node of the cluster. Only the super user(root) can execute this command.</p></div><p class="subhead_1" id="IDclust0d-cmdN4"><span class="em">Options</span></p><div class="textblock"><dl><dt class="em">-a<br>--add</dt><dd><p>Register the specified database cluster with PRIMECLUSTER. If the specified database cluster has already been registered with PRIMECLUSTER, then terminate abnormally.</p></dd></dl><dl><dt class="em">-c <span class="i">name</span><br>--db-cluster-name=<span class="i">name</span></dt><dd><p>Specify database cluster name. name is case-sensitive, and must be within 16 bytes, and an initial letter must be ascii alphabet, and following letters must be ascii alphabet or ascii digit or underscore(_).</p></dd></dl><dl><dt class="em">-d<br>--delete</dt><dd><p>Unregister the specified database cluster from PRIMECLUSTER.</p></dd></dl><dl><dt class="em">-D directory<br>--pgdata=<span class="i">directory</span></dt><dd><p>Specify an absolute path of data directory.</p></dd></dl><dl><dt class="em">--db-user=<span class="i">name</span></dt><dd><p>Specify a database super user. Default is the user specified with '-u'.</p></dd></dl><dl><dt class="em">-n nodes<br>--member-nodes=<span class="i">nodes</span></dt><dd><p>Specify names of all member nodes of the cluster. Specfity a cluster node name with uffix "RMS" to the name. Separate names with comma(,). (e.g. -n node1RMS,node2RMS)</p></dd></dl><dl><dt class="em">-p<br>--print</dt><dd><p>Print a list of database clusters registered with PRIMECLUSTER.  If -c option is specified, then print settings of the database cluster.</p></dd></dl><dl><dt class="em">--response-timeout=<span class="i">seconds</span></dt><dd><p>Specify timeout of the query for health check. It's used with a count specified with '--timeout-retry-num'.  The query is "SELECT 1" to the database "template1".  If '0', wait infinitely. (default: '0')</p></dd></dl><dl><dt class="em">--timeout-retry-count=<span class="i">count</span></dt><dd><p>Specify a limit count of retrying query when timeout is occurred. If retry counter is over the limit, then PRIMECLUSTER considers status of the database server as FAULT. If a query doesn't timeout once, retry counter is reset. (default: '6')</p></dd></dl><dl><dt class="em">--trace-max-file-size=<span class="i">size</span></dt><dd><p>Specify max size(KB) of trace file. (default: '10240')</p></dd></dl><dl><dt class="em">-u osuser<br>--os-user=<span class="i">osuser</span></dt><dd><p>Specify an OS user who can start/stop FUJITSU Enterprise Postgres database server.</p></dd></dl><dl><dt class="em">-w directory<br>--work-dir=<span class="i">directory</span></dt><dd><p>Specify a directory for temporary data and trace files. It's used for starting, stopping or checking FUJITSU Enterprise Postgres database server. If the directory doesn't exist, then create it. Owner of the directory created by the command is set to the user specified with '-u'. Permission of the directory created by the command is set to 0700.</p></dd></dl><dl><dt class="em">--watch-interval=<span class="i">seconds</span></dt><dd><p>Specify an interval. It's used for the amount of time between health checks. (default: '3')</p></dd></dl></div><p class="subhead_1" id="IDclust0d-cmdN5"><span class="em">Diagnostics</span></p><div class="textblock"><p>0 : On success</p><p>otherwise : On error</p></div><p class="subhead_1" id="IDclust0d-cmdN6"><span class="em">Notes</span></p><div class="textblock"><p>Before unregistering a resource, stop RMS of PRIMECLUSTER.</p></div><p class="subhead_1" id="IDclust0d-cmdN7"><span class="em">Example</span></p><div class="textblock"><p>The simplest example of registering a resource.</p><pre>    # pgx_pclrsc -a -c inst1 -u postgres -D /mnt/swdsk1/pgdata -w /var/tmp/work -n node1RMS,node2RMS</pre></div></div><div class="header_footer"><div class="back_next"><a href="j2679-b-00-00.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><img src="image/spacewhite.gif" width="64" height="27" alt=""></div><div class="copyright">Copyright 2018-2021 FUJITSU LIMITED</div></div></body></html>