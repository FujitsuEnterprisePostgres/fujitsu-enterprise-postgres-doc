<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html lang="en"><head><META http-equiv="Content-Type" content="text/html; charset=UTF-8"><META CONTENT="4.3" NAME="GeneratorVersion"><title>A.1.2 Creating a Cluster Application and Configuring Its Attributes</title><link rel="stylesheet" href="manualmain.css" type="TEXT/CSS"><script language="JavaScript" src="topbutton.js"></script></head><body onload="init()"><div class="topButton" id="topButton0"><a class="topButton" href="#top"><img src="image/top.gif" width="62" height="20" border="0" alt="Top" title="Top"></a></div><div class="top_header"><div class="top_header_title"><a title="Title Page" class="top_link" target="_top" HREF="index.html">Enterprise Postgres 13&nbsp;Cluster Operation Guide(PRIMECLUSTER)</a></div><div class="top_header_graphic"><span class="top_logo"><img src="image/logo-white-fj.gif" width="148" height="32" alt=""></span><span class="top_keygraphic"><img src="image/cover-header-graphic.gif" width="148" height="32" alt="FUJITSU Software"></span></div></div><div class="header_footer"><div class="breadcrumbslist"><a href="j2679-a-00-00.html">Appendix&nbsp;A Creating Resources and Creating/Modifying Cluster Applications</a> &gt; <a href="j2679-a-01-00.html">A.1 Creating Resources and Cluster Applications</a> &gt; A.1.2 Creating a Cluster Application and Configuring Its Attributes</div><div class="back_next"><a href="j2679-a-01-01.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2679-a-01-03.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div></div><h3 id="IDclust0a-lN3">A.1.2 Creating a Cluster Application and Configuring Its Attributes<a name="N44G"></a></h3><div class="body"><div class="textblock"><ol><li><p>Select [Application-Create].</p><pre class="border">pcl-vm13: Main configuration menu, current configuration: configNo RMS active in the cluster 1) HELP                                10) Configuration-Remove 2) QUIT                                11) Configuration-Freeze 3) Application-Create                  12) Configuration-Thaw 4) Application-Edit                    13) Configuration-Edit-Global-Settings 5) Application-Remove                  14) Configuration-Consistency-Report 6) Application-Clone                   15) Configuration-ScriptExecution 7) Configuration-Generate              16) RMS-CreateMachine 8) Configuration-Activate              17) RMS-RemoveMachine 9) Configuration-CopyChoose an action: 3</pre></li><li><p>Select [STANDBY].</p><pre class="border">Creation: Application type selection menu:1) HELP                                 7) SCALABLE2) QUIT                                 8) STANDBY3) RETURN4) OPTIONS5) DEMO6) GENERICApplication Type: 8</pre></li><li><p>Select [Machines+Basics].</p><pre class="border">Settings of turnkey wizard "STANDBY" (APP1:not yet consistent)1) HELP                                 4) REMOVE+EXIT2) NO-SAVE+EXIT                         5) ApplicationName=APP13) SAVE+EXIT                            6) Machines+Basics(-)Choose the setting to process: 6</pre><div class="note"><p class="title">Note</p><div class="notebody"><p>Although ApplicationName can be set to any name within the range of constraints of PRIMECLUSTER, do not set it to the database cluster name specified when registering a database cluster to PRIMECLUSTER using the pgx_pclrsc command. If the same name is set, RMS will fail to start.</p></div></div></li><li><p>Select [AdditionalMachine].</p><pre class="border">Machines+Basics (app1:consistent) 1) HELP                                14) (AutoStartUp=no) 2) -                                   15) (AutoSwitchOver=No) 3) SAVE+EXIT                           16) (PreserveState=no) 4) REMOVE+EXIT                         17) (PersistentFault=0) 5) AdditionalMachine                   18) (ShutdownPriority=) 6) AdditionalConsole                   19) (OnlinePriority=) 7) Machines[0]=pcl-vm13RMS             20) (StandbyTransitions=) 8) (PreCheckScript=)                   21) (LicenseToKill=no) 9) (PreOnlineScript=)                  22) (AutoBreak=yes)10) (PostOnlineScript=)                 23) (AutoBreakMaintMode=no)11) (PreOfflineScript=)                 24) (HaltFlag=no)12) (OfflineDoneScript=)                25) (PartialCluster=0)13) (FaultScript=)                      26) (ScriptTimeout=)Choose the setting to process: 5</pre></li><li><p>Select a standby node.</p><pre class="border">1) HELP2) RETURN3) pcl-vm13RMS4) pcl-vm14RMSChoose a machine for this application: 4</pre></li><li><p>Ensure that all nodes that make up the cluster application are displayed in [Machines]. Note that the item displayed in Machines[0] needs to be the active node, and Machines[1] to be the standby node. If these are not set correctly, modify the setting.</p><pre class="border">Machines+Basics (app1:consistent) 1) HELP                                15) (AutoStartUp=no) 2) -                                   16) (AutoSwitchOver=No) 3) SAVE+EXIT                           17) (PreserveState=no) 4) REMOVE+EXIT                         18) (PersistentFault=0) 5) AdditionalMachine                   19) (ShutdownPriority=) 6) AdditionalConsole                   20) (OnlinePriority=) 7) Machines[0]=pcl-vm13RMS             21) (StandbyTransitions=) 8) Machines[1]=pcl-vm14RMS             22) (LicenseToKill=no) 9) (PreCheckScript=)                   23) (AutoBreak=yes)10) (PreOnlineScript=)                  24) (AutoBreakMaintMode=no)11) (PostOnlineScript=)                 25) (HaltFlag=no)12) (PreOfflineScript=)                 26) (PartialCluster=0)13) (OfflineDoneScript=)                27) (ScriptTimeout=)14) (FaultScript=)Choose the setting to process:</pre></li><li><p>Configure attributes for cluster applications from step 8.</p><p>Refer to the PRIMECLUSTER Installation and Administration Guide for information on the attributes for cluster applications.</p><p>Configure the attributes as shown below:</p><table><col><col><tr><th valign="top"><p>Attribute</p></th><th valign="top"><p>Value</p></th></tr><tr><td align="left" valign="top"><p>AutoStartUp</p><p>(Automatically starts cluster applications when the RMS is started.)</p></td><td align="left" valign="top"><p>Yes</p></td></tr><tr><td align="left" valign="top"><p>AutoSwitchOver</p><p>(Automatically switches nodes when a fault occurs in cluster applications.)</p></td><td align="left" valign="top"><ul><li><p>HostFailure</p></li><li><p>ResourceFailure</p></li><li><p>ShutDown</p></li></ul></td></tr><tr><td align="left" valign="top"><p>PersistentFault</p><p>(Selects whether to keep the Faulted state of the cluster application after restarting the RMS.) <span class="inline-note">*1</span></p></td><td align="left" valign="top"><p>0 or 1</p></td></tr><tr><td align="left" valign="top"><p>OnlinePriority</p><p>(Selects whether to use the same online nodes as those used before all clusters were restarted or follow the configured order for nodes, when all clusters were restarted.) <span class="inline-note">*2</span></p></td><td align="left" valign="top"><p>0 or 1</p></td></tr><tr><td align="left" valign="top"><p>StandbyTransitions</p><p>(Timing to perform standby state transition.)</p></td><td align="left" valign="top"><ul><li><p>ClearFaultRequest</p></li><li><p>StartUp</p></li><li><p>SwitchRequest</p></li></ul></td></tr><tr><td align="left" valign="top"><p>HaltFlag</p><p>(Selects whether to terminate the node forcibly when another error occurs during the Fault process.)</p></td><td align="left" valign="top"><p>Yes</p></td></tr></table><p class="supple">*1: If 0 is specified, the Faulted state is automatically canceled when the RMS is started. If 1 is specified, the Faulted state is kept.</p><p class="supple">*2: If 0 is specified, cluster applications will become Online in accordance with the node setting order when all clusters are restarted. If 1 is specified, cluster applications will become Online on nodes where the cluster applications were Online before the restart.</p></li><li><p>Select [AutoStartUp].</p><pre class="border">Machines+Basics (app1:consistent) 1) HELP                                15) (AutoStartUp=no) 2) -                                   16) (AutoSwitchOver=No) 3) SAVE+EXIT                           17) (PreserveState=no) 4) REMOVE+EXIT                         18) (PersistentFault=0) 5) AdditionalMachine                   19) (ShutdownPriority=) 6) AdditionalConsole                   20) (OnlinePriority=) 7) Machines[0]=pcl-vm13RMS             21) (StandbyTransitions=) 8) Machines[1]=pcl-vm14RMS             22) (LicenseToKill=no) 9) (PreCheckScript=)                   23) (AutoBreak=yes)10) (PreOnlineScript=)                  24) (AutoBreakMaintMode=no)11) (PostOnlineScript=)                 25) (HaltFlag=no)12) (PreOfflineScript=)                 26) (PartialCluster=0)13) (OfflineDoneScript=)                27) (ScriptTimeout=)14) (FaultScript=)Choose the setting to process: 15</pre></li><li><p>Select [yes].</p><pre class="border">1) HELP2) RETURN3) yes4) noSet the AutoStartUp mode: 3</pre></li><li><p>Select [AutoSwitchOver].</p><pre class="border">Machines+Basics (app1:consistent) 1) HELP                                15) (AutoStartUp=yes) 2) -                                   16) (AutoSwitchOver=No) 3) SAVE+EXIT                           17) (PreserveState=no) 4) REMOVE+EXIT                         18) (PersistentFault=0) 5) AdditionalMachine                   19) (ShutdownPriority=) 6) AdditionalConsole                   20) (OnlinePriority=) 7) Machines[0]=pcl-vm13RMS             21) (StandbyTransitions=) 8) Machines[1]=pcl-vm14RMS             22) (LicenseToKill=no) 9) (PreCheckScript=)                   23) (AutoBreak=yes)10) (PreOnlineScript=)                  24) (AutoBreakMaintMode=no)11) (PostOnlineScript=)                 25) (HaltFlag=no)12) (PreOfflineScript=)                 26) (PartialCluster=0)13) (OfflineDoneScript=)                27) (ScriptTimeout=)14) (FaultScript=)Choose the setting to process: 16</pre></li><li><p>Select [HOSTFAILURE], then [RESOURCEFAILURE], then [SHUTDOWN], and then select [SAVE+RETURN] when the following window is displayed:</p><pre class="border">Set flags for AutoSwitchOver:  Currently set: HOSTFAILURE,RESOURCEFAILURE,SHUTDOWN (HRS)1) HELP                   4) DEFAULT                7) NOT:RESOURCEFAILURE(R)2) -                      5) NO(N)                  8) NOT:SHUTDOWN(S)3) SAVE+RETURN            6) NOT:HOSTFAILURE(H)Choose one of the flags: 3</pre></li><li><p>Select [PersistentFault].</p><pre class="border">Machines+Basics (app1:consistent) 1) HELP 2) - 3) SAVE+EXIT 4) REMOVE+EXIT 5) AdditionalMachine 6) AdditionalConsole 7) Machines[0]=pcl-vm13RMS 8) Machines[1]=pcl-vm14RMS 9) (PreCheckScript=)10) (PreOnlineScript=)11) (PostOnlineScript=)12) (PreOfflineScript=)13) (OfflineDoneScript=)14) (FaultScript=)15) (AutoStartUp=yes)16) (AutoSwitchOver=HostFailure|ResourceFailure|ShutDown)17) (PreserveState=no)18) (PersistentFault=0)19) (ShutdownPriority=)20) (OnlinePriority=)21) (StandbyTransitions=)22) (LicenseToKill=no)23) (AutoBreak=yes)24) (AutoBreakMaintMode=no)25) (HaltFlag=no)26) (PartialCluster=0)27) (ScriptTimeout=)Choose the setting to process: 18</pre></li><li><p>Select [0] or [1] (the example below selects [1]).</p><pre class="border">1) HELP2) RETURN3) 04) 1Enable persistent fault feature for this application: 4</pre></li><li><p>Select [OnlinePriority].</p><pre class="border">Machines+Basics (app1:consistent) 1) HELP 2) - 3) SAVE+EXIT 4) REMOVE+EXIT 5) AdditionalMachine 6) AdditionalConsole 7) Machines[0]=pcl-vm13RMS 8) Machines[1]=pcl-vm14RMS 9) (PreCheckScript=)10) (PreOnlineScript=)11) (PostOnlineScript=)12) (PreOfflineScript=)13) (OfflineDoneScript=)14) (FaultScript=)15) (AutoStartUp=yes)16) (AutoSwitchOver=HostFailure|ResourceFailure|ShutDown)17) (PreserveState=no)18) (PersistentFault=1)19) (ShutdownPriority=)20) (OnlinePriority=)21) (StandbyTransitions=)22) (LicenseToKill=no)23) (AutoBreak=yes)24) (AutoBreakMaintMode=no)25) (HaltFlag=no)26) (PartialCluster=0)27) (ScriptTimeout=)Choose the setting to process: 20</pre></li><li><p>Select [0] or [1] (the example below selects [1]).</p><pre class="border">1) HELP2) RETURN3) 04) 1Enable Online Priority (Active Standby) feature for this application: 4</pre></li><li><p>Select [StandbyTransitions].</p><pre class="border">Machines+Basics (app1:consistent) 1) HELP 2) - 3) SAVE+EXIT 4) REMOVE+EXIT 5) AdditionalMachine 6) AdditionalConsole 7) Machines[0]=pcl-vm13RMS 8) Machines[1]=pcl-vm14RMS 9) (PreCheckScript=)10) (PreOnlineScript=)11) (PostOnlineScript=)12) (PreOfflineScript=)13) (OfflineDoneScript=)14) (FaultScript=)15) (AutoStartUp=yes)16) (AutoSwitchOver=HostFailure|ResourceFailure|ShutDown)17) (PreserveState=no)18) (PersistentFault=1)19) (ShutdownPriority=)20) (OnlinePriority=1)21) (StandbyTransitions=)22) (LicenseToKill=no)23) (AutoBreak=yes)24) (AutoBreakMaintMode=no)25) (HaltFlag=no)26) (PartialCluster=0)27) (ScriptTimeout=)Choose the setting to process: 21</pre></li><li><p>Select [CLEARFAULTREQUEST], then [STARTUP], then [SWITCHREQUEST], and then select [SAVE+RETURN] when the following window is displayed:</p><pre class="border">Set flags for StandbyTransitions: Currently set: ClearFaultRequst,StartUp,SwitchRequest (CTW)1) HELP                                 5) NOT:CLEARFAULTREQUEST(C)2) -                                    6) NOT:STARTUP(T)3) SAVE+RETURN                          7) NOT:SWITCHREQUEST(W)4) NO(N)Choose one of the flags: 3</pre></li><li><p>Select [HaltFlag].</p><pre class="border">Machines+Basics (app1:consistent) 1) HELP 2) - 3) SAVE+EXIT 4) REMOVE+EXIT 5) AdditionalMachine 6) AdditionalConsole 7) Machines[0]=pcl-vm13RMS 8) Machines[1]=pcl-vm14RMS 9) (PreCheckScript=)10) (PreOnlineScript=)11) (PostOnlineScript=)12) (PreOfflineScript=)13) (OfflineDoneScript=)14) (FaultScript=)15) (AutoStartUp=yes)16) (AutoSwitchOver=HostFailure|ResourceFailure|ShutDown)17) (PreserveState=no)18) (PersistentFault=1)19) (ShutdownPriority=)20) (OnlinePriority=1)21) (StandbyTransitions=ClearFaultRequest|StartUp|SwitchRequest)22) (LicenseToKill=no)23) (AutoBreak=yes)24) (AutoBreakMaintMode=no)25) (HaltFlag=no)26) (PartialCluster=0)27) (ScriptTimeout=)Choose the setting to process: 25</pre></li><li><p>Select [yes].</p><pre class="border">1) HELP2) RETURN3) yes4) noSet the Halt mode: 3</pre></li><li><p>Ensure that all attributes are displayed as set in the previous steps, and then select [SAVE+EXIT].</p><pre class="border">Machines+Basics (app1:consistent) 1) HELP 2) - 3) SAVE+EXIT 4) REMOVE+EXIT 5) AdditionalMachine 6) AdditionalConsole 7) Machines[0]=pcl-vm13RMS 8) Machines[1]=pcl-vm14RMS 9) (PreCheckScript=)10) (PreOnlineScript=)11) (PostOnlineScript=)12) (PreOfflineScript=)13) (OfflineDoneScript=)14) (FaultScript=)15) (AutoStartUp=yes)16) (AutoSwitchOver=HostFailure|ResourceFailure|ShutDown)17) (PreserveState=no)18) (PersistentFault=1)19) (ShutdownPriority=)20) (OnlinePriority=1)21) (StandbyTransitions=ClearFaultRequest|StartUp|SwitchRequest)22) (LicenseToKill=no)23) (AutoBreak=yes)24) (AutoBreakMaintMode=no)25) (HaltFlag=yes)26) (PartialCluster=0)27) (ScriptTimeout=)Choose the setting to process: 3</pre></li><li><p>The following window will be displayed:</p><pre class="border">Settings of turnkey wizard "STANDBY" (APP1:not yet consistent) 1) HELP                                10) Enterprise-Postgres(-) 2) -                                   11) Symfoware(-) 3) SAVE+EXIT                           12) Procedure:SystemState3(-) 4) -                                   13) Procedure:SystemState2(-) 5) ApplicationName=APP1                14) Gls:Global-Link-Services(-) 6) Machines+Basics(app1)               15) IpAddresses(-) 7) CommandLines(-)                     16) LocalFileSystems(-) 8) Procedure:Application(-)            17) Gds:Global-Disk-Services(-) 9) Procedure:BasicApplication(-)Choose the setting to process:</pre></li></ol><p></p></div></div><div class="header_footer"><div class="back_next"><a href="j2679-a-01-01.html"><img src="image/back2.gif" width="65" height="27" border="0" alt="Previous" title="Previous"></a><a href="j2679-a-01-03.html"><img src="image/next2.gif" width="64" height="27" border="0" alt="Next" title="Next"></a></div><div class="copyright">Copyright 2018-2021 FUJITSU LIMITED</div></div></body></html>